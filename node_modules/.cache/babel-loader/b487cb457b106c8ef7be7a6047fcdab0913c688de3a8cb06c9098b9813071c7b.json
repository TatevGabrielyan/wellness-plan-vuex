{"ast":null,"code":"/**\r\n * DevExtreme (esm/viz/core/plaque.js)\r\n * Version: 22.1.6\r\n * Build date: Tue Oct 18 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"x\", \"y\", \"canvas\", \"offsetX\", \"offsetY\", \"offset\"];\nimport { extend } from \"../../core/utils/extend\";\nimport { isDefined } from \"../../core/utils/type\";\nvar math = Math;\nvar round = math.round;\nvar max = math.max;\nvar min = math.min;\nvar sin = math.sin;\nvar cos = math.cos;\nvar asin = math.asin;\nvar PI = math.PI;\nvar buildPath = function () {\n  for (var _len = arguments.length, points = new Array(_len), _key = 0; _key < _len; _key++) {\n    points[_key] = arguments[_key];\n  }\n  return points.join(\"\");\n};\nfunction getArc(cornerRadius, xDirection, yDirection) {\n  return \"a \".concat(cornerRadius, \" \").concat(cornerRadius, \" 0 0 1 \").concat(xDirection * cornerRadius, \" \").concat(yDirection * cornerRadius);\n}\nfunction getAbsoluteArc(cornerRadius, x, y) {\n  return \"A \".concat(cornerRadius, \" \").concat(cornerRadius, \" 0 0 1 \").concat(x, \" \").concat(y);\n}\nfunction rotateX(x, y, angle, x0, y0) {\n  return (x - x0) * round(cos(angle)) + (y - y0) * round(sin(angle)) + x0;\n}\nfunction rotateY(x, y, angle, x0, y0) {\n  return -(x - x0) * round(sin(angle)) + (y - y0) * round(cos(angle)) + y0;\n}\nfunction rotateSize(options, angle) {\n  if (angle % 90 === 0 && angle % 180 !== 0) {\n    return {\n      width: options.height,\n      height: options.width\n    };\n  }\n  return options;\n}\nfunction getCloudAngle(_ref, x, y, anchorX, anchorY) {\n  var {\n    width: width,\n    height: height\n  } = _ref;\n  var halfWidth = width / 2;\n  var halfHeight = height / 2;\n  var xr = Math.ceil(x + halfWidth);\n  var xl = Math.floor(x - halfWidth);\n  var yt = Math.floor(y - halfHeight);\n  var yb = Math.ceil(y + halfHeight);\n  if (anchorX < xl && anchorY < yt || anchorX >= xl && anchorX <= xr && anchorY < yt) {\n    return 270;\n  }\n  if (anchorX > xr && anchorY > yb || anchorX >= xl && anchorX <= xr && anchorY > yb) {\n    return 90;\n  } else if (anchorX < xl && anchorY > yb || anchorX < xl && anchorY >= yt && anchorY <= yb) {\n    return 180;\n  }\n  return 0;\n}\nfunction getCloudPoints(_ref2, x, y, anchorX, anchorY, _ref3, bounded) {\n  var {\n    width: width,\n    height: height\n  } = _ref2;\n  var {\n    arrowWidth: arrowWidth,\n    cornerRadius = 0\n  } = _ref3;\n  var halfArrowWidth = arrowWidth / 2;\n  var halfWidth = width / 2;\n  var halfHeight = height / 2;\n  var xr = Math.ceil(x + halfWidth);\n  var xl = Math.floor(x - halfWidth);\n  var yt = Math.floor(y - halfHeight);\n  var yb = Math.ceil(y + halfHeight);\n  var leftTopCorner = [xl, yt];\n  var rightTopCorner = [xr, yt];\n  var rightBottomCorner = [xr, yb];\n  var leftBottomCorner = [xl, yb];\n  var arrowX = anchorX <= xl ? xl : xr <= anchorX ? xr : anchorX;\n  var arrowY = anchorY <= yt ? yt : yb <= anchorY ? yb : anchorY;\n  var arrowBaseBottom = min(arrowY + halfArrowWidth, yb);\n  var arrowBaseTop = max(arrowY - halfArrowWidth, yt);\n  var arrowBaseLeft = max(arrowX - halfArrowWidth, xl);\n  cornerRadius = Math.min(width / 2, height / 2, cornerRadius);\n  var points;\n  leftTopCorner[1] += cornerRadius;\n  rightTopCorner[0] -= cornerRadius;\n  rightBottomCorner[1] -= cornerRadius;\n  leftBottomCorner[0] += cornerRadius;\n  if (!bounded || xl <= anchorX && anchorX <= xr && yt <= anchorY && anchorY <= yb) {\n    points = buildPath(leftTopCorner, getArc(cornerRadius, 1, -1), \"L\", rightTopCorner, getArc(cornerRadius, 1, 1), \"L\", rightBottomCorner, getArc(cornerRadius, -1, 1), \"L\", leftBottomCorner, getArc(cornerRadius, -1, -1));\n  } else if (anchorX > xr && anchorY < yt) {\n    var arrowAngle = arrowWidth / cornerRadius || 0;\n    var angle = PI / 4 + arrowAngle / 2;\n    var endAngle = PI / 4 - arrowAngle / 2;\n    var arrowEndPointX = rightTopCorner[0] + cos(endAngle) * cornerRadius;\n    var arrowEndPointY = rightTopCorner[1] + (1 - sin(endAngle)) * cornerRadius;\n    var arrowArc = buildPath(\"L\", rightTopCorner, getArc(cornerRadius, cos(angle), 1 - sin(angle)), \"L\", [anchorX, anchorY, arrowEndPointX, arrowEndPointY], getAbsoluteArc(cornerRadius, rightTopCorner[0] + cornerRadius, rightTopCorner[1] + cornerRadius));\n    if (Math.abs(angle) > PI / 2) {\n      arrowArc = buildPath(\"L\", [arrowBaseLeft, yt, anchorX, anchorY, xr, arrowBaseBottom]);\n    }\n    points = buildPath(leftTopCorner, getArc(cornerRadius, 1, -1), arrowArc, \"L\", rightBottomCorner, getArc(cornerRadius, -1, 1), \"L\", leftBottomCorner, getArc(cornerRadius, -1, -1));\n  } else if (anchorX > xr && anchorY >= yt && anchorY <= yb) {\n    var _arrowArc;\n    if (arrowBaseTop >= rightTopCorner[1] + cornerRadius && arrowBaseBottom <= rightBottomCorner[1]) {\n      _arrowArc = buildPath(getArc(cornerRadius, 1, 1), \"L\", [xr, arrowBaseTop, anchorX, anchorY, xr, arrowBaseBottom], \"L\", rightBottomCorner, getArc(cornerRadius, -1, 1));\n    } else if (arrowBaseTop < rightTopCorner[1] + cornerRadius && arrowBaseBottom >= rightTopCorner[1] + cornerRadius && arrowBaseBottom <= rightBottomCorner[1]) {\n      var arrowWidthRest = rightTopCorner[1] + cornerRadius - arrowBaseTop;\n      var _angle = arrowWidthRest / cornerRadius;\n      var arrowBaseTopX = rightTopCorner[0] + cos(_angle) * cornerRadius;\n      var arrowBaseTopY = rightTopCorner[1] + (1 - sin(_angle)) * cornerRadius;\n      _arrowArc = buildPath(getArc(cornerRadius, cos(_angle), 1 - sin(_angle)), \"L\", [arrowBaseTopX, arrowBaseTopY, anchorX, anchorY, xr, arrowBaseBottom], \"L\", rightBottomCorner, getArc(cornerRadius, -1, 1));\n    } else if (arrowBaseTop < rightTopCorner[1] + cornerRadius && arrowBaseBottom < rightTopCorner[1] + cornerRadius) {\n      var _arrowWidthRest = rightTopCorner[1] + cornerRadius - arrowBaseTop;\n      var _arrowAngle = _arrowWidthRest / cornerRadius;\n      var _angle2 = _arrowAngle;\n      var _arrowBaseTopX = rightTopCorner[0] + cos(_angle2) * cornerRadius;\n      var _arrowBaseTopY = rightTopCorner[1] + (1 - sin(_angle2)) * cornerRadius;\n      var bottomAngle = Math.sin((rightTopCorner[1] + cornerRadius - arrowBaseBottom) / cornerRadius);\n      var arrowBaseBottomX = rightTopCorner[0] + cornerRadius * cos(bottomAngle);\n      var arrowBaseBottomY = rightTopCorner[1] + cornerRadius * (1 - sin(bottomAngle));\n      _arrowArc = buildPath(getArc(cornerRadius, cos(_angle2), 1 - sin(_angle2)), \"L\", [_arrowBaseTopX, _arrowBaseTopY, anchorX, anchorY, arrowBaseBottomX, arrowBaseBottomY], getAbsoluteArc(cornerRadius, rightTopCorner[0] + cornerRadius, rightTopCorner[1] + cornerRadius), \"L\", rightBottomCorner, getArc(cornerRadius, -1, 1));\n    } else if (arrowBaseTop <= rightTopCorner[1] + cornerRadius && arrowBaseBottom >= rightBottomCorner[1]) {\n      var topAngle = asin((rightTopCorner[1] + cornerRadius - arrowBaseTop) / cornerRadius);\n      var _arrowBaseTopX2 = rightTopCorner[0] + cornerRadius * cos(topAngle);\n      var _arrowBaseTopY2 = rightTopCorner[1] + cornerRadius * (1 - sin(topAngle));\n      var _bottomAngle = asin((arrowBaseBottom - rightBottomCorner[1]) / cornerRadius);\n      var _arrowBaseBottomX = rightBottomCorner[0] + cornerRadius * (cos(_bottomAngle) - 1);\n      var _arrowBaseBottomY = rightBottomCorner[1] + cornerRadius * sin(_bottomAngle);\n      _arrowArc = buildPath(getArc(cornerRadius, cos(topAngle), 1 - sin(topAngle)), \"L\", [_arrowBaseTopX2, _arrowBaseTopY2, anchorX, anchorY, _arrowBaseBottomX, _arrowBaseBottomY], getAbsoluteArc(cornerRadius, rightBottomCorner[0] - cornerRadius, rightBottomCorner[1] + cornerRadius));\n    } else if (arrowBaseTop > rightTopCorner[1] + cornerRadius && arrowBaseTop <= rightBottomCorner[1] && arrowBaseBottom > rightBottomCorner[1]) {\n      var _bottomAngle2 = asin((arrowBaseBottom - rightBottomCorner[1]) / cornerRadius);\n      var _arrowBaseBottomX2 = rightBottomCorner[0] + cornerRadius * (cos(_bottomAngle2) - 1);\n      var _arrowBaseBottomY2 = rightBottomCorner[1] + cornerRadius * sin(_bottomAngle2);\n      _arrowArc = buildPath(getArc(cornerRadius, 1, 1), \"L\", [xr, arrowBaseTop, anchorX, anchorY, _arrowBaseBottomX2, _arrowBaseBottomY2], getAbsoluteArc(cornerRadius, rightBottomCorner[0] - cornerRadius, rightBottomCorner[1] + cornerRadius));\n    } else if (arrowBaseTop > rightTopCorner[1] + cornerRadius && arrowBaseBottom > rightBottomCorner[1]) {\n      var _bottomAngle3 = asin((arrowBaseBottom - rightBottomCorner[1]) / cornerRadius);\n      var _arrowBaseBottomX3 = rightBottomCorner[0] + cornerRadius * (cos(_bottomAngle3) - 1);\n      var _arrowBaseBottomY3 = rightBottomCorner[1] + cornerRadius * sin(_bottomAngle3);\n      var _topAngle = asin((arrowBaseTop - rightBottomCorner[1]) / cornerRadius);\n      var _arrowBaseTopX3 = rightBottomCorner[0] + cornerRadius * (cos(_topAngle) - 1);\n      var _arrowBaseTopY3 = rightBottomCorner[1] + cornerRadius * sin(_topAngle);\n      _arrowArc = buildPath(getArc(cornerRadius, 1, 1), \"L\", rightBottomCorner, getArc(cornerRadius, cos(_topAngle) - 1, sin(_topAngle)), \"L\", [_arrowBaseTopX3, _arrowBaseTopY3, anchorX, anchorY, _arrowBaseBottomX3, _arrowBaseBottomY3], getAbsoluteArc(cornerRadius, rightBottomCorner[0] - cornerRadius, rightBottomCorner[1] + cornerRadius));\n    }\n    points = buildPath(leftTopCorner, getArc(cornerRadius, 1, -1), \"L\", rightTopCorner, _arrowArc, \"L\", leftBottomCorner, getArc(cornerRadius, -1, -1));\n  }\n  return buildPath(\"M\", points, \"Z\");\n}\nexport class Plaque {\n  constructor(options, widget, root, contentTemplate) {\n    var bounded = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : true;\n    var measureContent = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : (_, g) => g.getBBox();\n    var moveContentGroup = arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : (_, g, x, y) => g.move(x, y);\n    this.widget = widget;\n    this.options = options;\n    this.root = root;\n    this.contentTemplate = contentTemplate;\n    this.bonded = bounded;\n    this.measureContent = measureContent;\n    this.moveContentGroup = moveContentGroup;\n  }\n  draw(_ref4) {\n    var {\n        x: anchorX,\n        y: anchorY,\n        canvas = {},\n        offsetX: offsetX,\n        offsetY: offsetY,\n        offset = 0\n      } = _ref4,\n      restProps = _objectWithoutPropertiesLoose(_ref4, _excluded);\n    var options = this.options;\n    var {\n      x: x,\n      y: y\n    } = options;\n    var bounds_xl = canvas.left,\n      bounds_xr = canvas.width - canvas.right,\n      bounds_width = canvas.width - canvas.right - canvas.left,\n      bounds_yt = canvas.top,\n      bounds_yb = canvas.height - canvas.bottom,\n      bounds_height = canvas.height - canvas.bottom - canvas.top;\n    if (!(isDefined(anchorX) && isDefined(anchorY)) && !(isDefined(x) && isDefined(y))) {\n      return false;\n    }\n    if (isDefined(anchorX) && (anchorX < bounds_xl || bounds_xr < anchorX || anchorY < bounds_yt || bounds_yb < anchorY)) {\n      return false;\n    }\n    if (!this._root) {\n      this._draw();\n    }\n    var shadowSettings = extend({\n      x: \"-50%\",\n      y: \"-50%\",\n      width: \"200%\",\n      height: \"200%\"\n    }, options.shadow);\n    var contentWidth = options.width > 0 ? options.width : null;\n    var contentHeight = options.height > 0 ? options.height : null;\n    var onRender = () => {\n      var _this$_root;\n      var bBox = this._contentBBox = this.measureContent(this.widget, this._contentGroup);\n      var size = this._size = {\n        width: max(contentWidth, bBox.width) + 2 * options.paddingLeftRight,\n        height: max(contentHeight, bBox.height) + 2 * options.paddingTopBottom,\n        offset: offset\n      };\n      var xOff = shadowSettings.offsetX;\n      var yOff = shadowSettings.offsetY;\n      var blur = 2 * shadowSettings.blur + 1;\n      var lm = max(blur - xOff, 0);\n      var rm = max(blur + xOff, 0);\n      var tm = max(blur - yOff, 0);\n      var bm = max(blur + yOff, 0);\n      this.margins = {\n        lm: lm,\n        rm: rm,\n        tm: tm,\n        bm: bm\n      };\n      if (!isDefined(x)) {\n        if (isDefined(offsetX)) {\n          x = anchorX + offsetX;\n        } else if (bounds_width < size.width) {\n          x = round(bounds_xl + bounds_width / 2);\n        } else {\n          x = min(max(anchorX, Math.ceil(bounds_xl + size.width / 2 + lm)), Math.floor(bounds_xr - size.width / 2 - rm));\n        }\n      } else {\n        x += offsetX || 0;\n        if (!isDefined(anchorX)) {\n          anchorX = x;\n        }\n      }\n      if (!isDefined(y)) {\n        if (isDefined(offsetY)) {\n          y = anchorY + offsetY;\n        } else {\n          var y_top = anchorY - options.arrowLength - size.height / 2 - offset;\n          var y_bottom = anchorY + options.arrowLength + size.height / 2 + offset;\n          if (bounds_height < size.height + options.arrowLength) {\n            y = round(bounds_yt + size.height / 2);\n          } else if (y_top - size.height / 2 - tm < bounds_yt) {\n            if (y_bottom + size.height / 2 + bm < bounds_yb) {\n              y = y_bottom;\n              anchorY += offset;\n            } else {\n              y = round(bounds_yt + size.height / 2);\n            }\n          } else {\n            y = y_top;\n            anchorY -= offset;\n          }\n        }\n      } else {\n        y += offsetY || 0;\n        if (!isDefined(anchorY)) {\n          anchorY = y + size.height / 2;\n        }\n      }\n      this.anchorX = anchorX;\n      this.anchorY = anchorY;\n      this.move(x, y);\n      null === (_this$_root = this._root) || void 0 === _this$_root ? void 0 : _this$_root.append(this.root);\n    };\n    if (this.contentTemplate.render) {\n      this.contentTemplate.render({\n        model: options,\n        container: this._contentGroup.element,\n        onRendered: onRender\n      });\n    } else {\n      return this.contentTemplate(_extends({\n        group: this._contentGroup,\n        onRender: onRender\n      }, restProps));\n    }\n    return true;\n  }\n  _draw() {\n    var renderer = this.widget._renderer;\n    var options = this.options;\n    var shadowSettings = extend({\n      x: \"-50%\",\n      y: \"-50%\",\n      width: \"200%\",\n      height: \"200%\"\n    }, options.shadow);\n    var shadow = this._shadow = renderer.shadowFilter().attr(shadowSettings);\n    var cloudSettings = {\n      opacity: options.opacity,\n      \"stroke-width\": 0,\n      fill: options.color\n    };\n    var borderOptions = options.border || {};\n    if (borderOptions.visible) {\n      extend(cloudSettings, {\n        \"stroke-width\": borderOptions.width,\n        stroke: borderOptions.color,\n        \"stroke-opacity\": borderOptions.opacity,\n        dashStyle: borderOptions.dashStyle\n      });\n    }\n    var group = this._root = renderer.g().append(this.root);\n    if (options.type) {\n      group.attr({\n        class: \"dxc-\".concat(options.type, \"-annotation\")\n      });\n    }\n    var cloudGroup = renderer.g().attr({\n      filter: shadow.id\n    }).append(group);\n    this._cloud = renderer.path([], \"area\").attr(cloudSettings).sharp().append(cloudGroup);\n    this._contentGroup = renderer.g().append(group);\n  }\n  getBBox() {\n    var size = this._size || {};\n    var margins = this.margins || {};\n    var rotationAngle = getCloudAngle(size, this.x, this.y, this.anchorX, this.anchorY);\n    return {\n      x: Math.floor(this.x - size.width / 2 - margins.lm),\n      y: Math.floor(this.y - size.height / 2 - margins.tm - (270 === rotationAngle ? this.options.arrowLength : 0)),\n      width: size.width + margins.lm + margins.rm,\n      height: size.height + margins.tm + margins.bm + (90 === rotationAngle || 270 === rotationAngle ? this.options.arrowLength : 0)\n    };\n  }\n  clear() {\n    if (this._root) {\n      this._root.remove();\n      this._shadow.remove();\n      this._root = null;\n    }\n    return this;\n  }\n  customizeCloud(attr) {\n    if (this._cloud) {\n      this._cloud.attr(attr);\n    }\n  }\n  moveRoot(x, y) {\n    if (this._root) {\n      this._root.move(x, y);\n    }\n  }\n  move(x, y) {\n    x = round(x);\n    y = round(y);\n    this.x = x;\n    this.y = y;\n    var rotationAngle = getCloudAngle(this._size, x, y, this.anchorX, this.anchorY);\n    var radRotationAngle = rotationAngle * PI / 180;\n    this._cloud.attr({\n      d: getCloudPoints(rotateSize(this._size, rotationAngle), x, y, rotateX(this.anchorX, this.anchorY, radRotationAngle, x, y), rotateY(this.anchorX, this.anchorY, radRotationAngle, x, y), this.options, this.bonded)\n    }).rotate(rotationAngle, x, y);\n    this.moveContentGroup(this.widget, this._contentGroup, x - this._contentBBox.x - this._contentBBox.width / 2, y - this._contentBBox.y - this._contentBBox.height / 2);\n  }\n  hitTest(x, y) {\n    var {\n      width: width,\n      height: height\n    } = this._size || {};\n    return Math.abs(x - this.x) <= width / 2 && Math.abs(y - this.y) <= height / 2;\n  }\n}","map":{"version":3,"names":["_extends","_objectWithoutPropertiesLoose","_excluded","extend","isDefined","math","Math","round","max","min","sin","cos","asin","PI","buildPath","_len","arguments","length","points","Array","_key","join","getArc","cornerRadius","xDirection","yDirection","concat","getAbsoluteArc","x","y","rotateX","angle","x0","y0","rotateY","rotateSize","options","width","height","getCloudAngle","_ref","anchorX","anchorY","halfWidth","halfHeight","xr","ceil","xl","floor","yt","yb","getCloudPoints","_ref2","_ref3","bounded","arrowWidth","halfArrowWidth","leftTopCorner","rightTopCorner","rightBottomCorner","leftBottomCorner","arrowX","arrowY","arrowBaseBottom","arrowBaseTop","arrowBaseLeft","arrowAngle","endAngle","arrowEndPointX","arrowEndPointY","arrowArc","abs","_arrowArc","arrowWidthRest","_angle","arrowBaseTopX","arrowBaseTopY","_arrowWidthRest","_arrowAngle","_angle2","_arrowBaseTopX","_arrowBaseTopY","bottomAngle","arrowBaseBottomX","arrowBaseBottomY","topAngle","_arrowBaseTopX2","_arrowBaseTopY2","_bottomAngle","_arrowBaseBottomX","_arrowBaseBottomY","_bottomAngle2","_arrowBaseBottomX2","_arrowBaseBottomY2","_bottomAngle3","_arrowBaseBottomX3","_arrowBaseBottomY3","_topAngle","_arrowBaseTopX3","_arrowBaseTopY3","Plaque","constructor","widget","root","contentTemplate","measureContent","_","g","getBBox","moveContentGroup","move","bonded","draw","_ref4","canvas","offsetX","offsetY","offset","restProps","bounds_xl","left","bounds_xr","right","bounds_width","bounds_yt","top","bounds_yb","bottom","bounds_height","_root","_draw","shadowSettings","shadow","contentWidth","contentHeight","onRender","_this$_root","bBox","_contentBBox","_contentGroup","size","_size","paddingLeftRight","paddingTopBottom","xOff","yOff","blur","lm","rm","tm","bm","margins","y_top","arrowLength","y_bottom","append","render","model","container","element","onRendered","group","renderer","_renderer","_shadow","shadowFilter","attr","cloudSettings","opacity","fill","color","borderOptions","border","visible","stroke","dashStyle","type","class","cloudGroup","filter","id","_cloud","path","sharp","rotationAngle","clear","remove","customizeCloud","moveRoot","radRotationAngle","d","rotate","hitTest"],"sources":["C:/Users/User/vue-chart/node_modules/devextreme/esm/viz/core/plaque.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/viz/core/plaque.js)\r\n * Version: 22.1.6\r\n * Build date: Tue Oct 18 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\r\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\r\nvar _excluded = [\"x\", \"y\", \"canvas\", \"offsetX\", \"offsetY\", \"offset\"];\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    isDefined\r\n} from \"../../core/utils/type\";\r\nvar math = Math;\r\nvar round = math.round;\r\nvar max = math.max;\r\nvar min = math.min;\r\nvar sin = math.sin;\r\nvar cos = math.cos;\r\nvar asin = math.asin;\r\nvar PI = math.PI;\r\nvar buildPath = function() {\r\n    for (var _len = arguments.length, points = new Array(_len), _key = 0; _key < _len; _key++) {\r\n        points[_key] = arguments[_key]\r\n    }\r\n    return points.join(\"\")\r\n};\r\n\r\nfunction getArc(cornerRadius, xDirection, yDirection) {\r\n    return \"a \".concat(cornerRadius, \" \").concat(cornerRadius, \" 0 0 1 \").concat(xDirection * cornerRadius, \" \").concat(yDirection * cornerRadius)\r\n}\r\n\r\nfunction getAbsoluteArc(cornerRadius, x, y) {\r\n    return \"A \".concat(cornerRadius, \" \").concat(cornerRadius, \" 0 0 1 \").concat(x, \" \").concat(y)\r\n}\r\n\r\nfunction rotateX(x, y, angle, x0, y0) {\r\n    return (x - x0) * round(cos(angle)) + (y - y0) * round(sin(angle)) + x0\r\n}\r\n\r\nfunction rotateY(x, y, angle, x0, y0) {\r\n    return -(x - x0) * round(sin(angle)) + (y - y0) * round(cos(angle)) + y0\r\n}\r\n\r\nfunction rotateSize(options, angle) {\r\n    if (angle % 90 === 0 && angle % 180 !== 0) {\r\n        return {\r\n            width: options.height,\r\n            height: options.width\r\n        }\r\n    }\r\n    return options\r\n}\r\n\r\nfunction getCloudAngle(_ref, x, y, anchorX, anchorY) {\r\n    var {\r\n        width: width,\r\n        height: height\r\n    } = _ref;\r\n    var halfWidth = width / 2;\r\n    var halfHeight = height / 2;\r\n    var xr = Math.ceil(x + halfWidth);\r\n    var xl = Math.floor(x - halfWidth);\r\n    var yt = Math.floor(y - halfHeight);\r\n    var yb = Math.ceil(y + halfHeight);\r\n    if (anchorX < xl && anchorY < yt || anchorX >= xl && anchorX <= xr && anchorY < yt) {\r\n        return 270\r\n    }\r\n    if (anchorX > xr && anchorY > yb || anchorX >= xl && anchorX <= xr && anchorY > yb) {\r\n        return 90\r\n    } else if (anchorX < xl && anchorY > yb || anchorX < xl && anchorY >= yt && anchorY <= yb) {\r\n        return 180\r\n    }\r\n    return 0\r\n}\r\n\r\nfunction getCloudPoints(_ref2, x, y, anchorX, anchorY, _ref3, bounded) {\r\n    var {\r\n        width: width,\r\n        height: height\r\n    } = _ref2;\r\n    var {\r\n        arrowWidth: arrowWidth,\r\n        cornerRadius: cornerRadius = 0\r\n    } = _ref3;\r\n    var halfArrowWidth = arrowWidth / 2;\r\n    var halfWidth = width / 2;\r\n    var halfHeight = height / 2;\r\n    var xr = Math.ceil(x + halfWidth);\r\n    var xl = Math.floor(x - halfWidth);\r\n    var yt = Math.floor(y - halfHeight);\r\n    var yb = Math.ceil(y + halfHeight);\r\n    var leftTopCorner = [xl, yt];\r\n    var rightTopCorner = [xr, yt];\r\n    var rightBottomCorner = [xr, yb];\r\n    var leftBottomCorner = [xl, yb];\r\n    var arrowX = anchorX <= xl ? xl : xr <= anchorX ? xr : anchorX;\r\n    var arrowY = anchorY <= yt ? yt : yb <= anchorY ? yb : anchorY;\r\n    var arrowBaseBottom = min(arrowY + halfArrowWidth, yb);\r\n    var arrowBaseTop = max(arrowY - halfArrowWidth, yt);\r\n    var arrowBaseLeft = max(arrowX - halfArrowWidth, xl);\r\n    cornerRadius = Math.min(width / 2, height / 2, cornerRadius);\r\n    var points;\r\n    leftTopCorner[1] += cornerRadius;\r\n    rightTopCorner[0] -= cornerRadius;\r\n    rightBottomCorner[1] -= cornerRadius;\r\n    leftBottomCorner[0] += cornerRadius;\r\n    if (!bounded || xl <= anchorX && anchorX <= xr && yt <= anchorY && anchorY <= yb) {\r\n        points = buildPath(leftTopCorner, getArc(cornerRadius, 1, -1), \"L\", rightTopCorner, getArc(cornerRadius, 1, 1), \"L\", rightBottomCorner, getArc(cornerRadius, -1, 1), \"L\", leftBottomCorner, getArc(cornerRadius, -1, -1))\r\n    } else if (anchorX > xr && anchorY < yt) {\r\n        var arrowAngle = arrowWidth / cornerRadius || 0;\r\n        var angle = PI / 4 + arrowAngle / 2;\r\n        var endAngle = PI / 4 - arrowAngle / 2;\r\n        var arrowEndPointX = rightTopCorner[0] + cos(endAngle) * cornerRadius;\r\n        var arrowEndPointY = rightTopCorner[1] + (1 - sin(endAngle)) * cornerRadius;\r\n        var arrowArc = buildPath(\"L\", rightTopCorner, getArc(cornerRadius, cos(angle), 1 - sin(angle)), \"L\", [anchorX, anchorY, arrowEndPointX, arrowEndPointY], getAbsoluteArc(cornerRadius, rightTopCorner[0] + cornerRadius, rightTopCorner[1] + cornerRadius));\r\n        if (Math.abs(angle) > PI / 2) {\r\n            arrowArc = buildPath(\"L\", [arrowBaseLeft, yt, anchorX, anchorY, xr, arrowBaseBottom])\r\n        }\r\n        points = buildPath(leftTopCorner, getArc(cornerRadius, 1, -1), arrowArc, \"L\", rightBottomCorner, getArc(cornerRadius, -1, 1), \"L\", leftBottomCorner, getArc(cornerRadius, -1, -1))\r\n    } else if (anchorX > xr && anchorY >= yt && anchorY <= yb) {\r\n        var _arrowArc;\r\n        if (arrowBaseTop >= rightTopCorner[1] + cornerRadius && arrowBaseBottom <= rightBottomCorner[1]) {\r\n            _arrowArc = buildPath(getArc(cornerRadius, 1, 1), \"L\", [xr, arrowBaseTop, anchorX, anchorY, xr, arrowBaseBottom], \"L\", rightBottomCorner, getArc(cornerRadius, -1, 1))\r\n        } else if (arrowBaseTop < rightTopCorner[1] + cornerRadius && arrowBaseBottom >= rightTopCorner[1] + cornerRadius && arrowBaseBottom <= rightBottomCorner[1]) {\r\n            var arrowWidthRest = rightTopCorner[1] + cornerRadius - arrowBaseTop;\r\n            var _angle = arrowWidthRest / cornerRadius;\r\n            var arrowBaseTopX = rightTopCorner[0] + cos(_angle) * cornerRadius;\r\n            var arrowBaseTopY = rightTopCorner[1] + (1 - sin(_angle)) * cornerRadius;\r\n            _arrowArc = buildPath(getArc(cornerRadius, cos(_angle), 1 - sin(_angle)), \"L\", [arrowBaseTopX, arrowBaseTopY, anchorX, anchorY, xr, arrowBaseBottom], \"L\", rightBottomCorner, getArc(cornerRadius, -1, 1))\r\n        } else if (arrowBaseTop < rightTopCorner[1] + cornerRadius && arrowBaseBottom < rightTopCorner[1] + cornerRadius) {\r\n            var _arrowWidthRest = rightTopCorner[1] + cornerRadius - arrowBaseTop;\r\n            var _arrowAngle = _arrowWidthRest / cornerRadius;\r\n            var _angle2 = _arrowAngle;\r\n            var _arrowBaseTopX = rightTopCorner[0] + cos(_angle2) * cornerRadius;\r\n            var _arrowBaseTopY = rightTopCorner[1] + (1 - sin(_angle2)) * cornerRadius;\r\n            var bottomAngle = Math.sin((rightTopCorner[1] + cornerRadius - arrowBaseBottom) / cornerRadius);\r\n            var arrowBaseBottomX = rightTopCorner[0] + cornerRadius * cos(bottomAngle);\r\n            var arrowBaseBottomY = rightTopCorner[1] + cornerRadius * (1 - sin(bottomAngle));\r\n            _arrowArc = buildPath(getArc(cornerRadius, cos(_angle2), 1 - sin(_angle2)), \"L\", [_arrowBaseTopX, _arrowBaseTopY, anchorX, anchorY, arrowBaseBottomX, arrowBaseBottomY], getAbsoluteArc(cornerRadius, rightTopCorner[0] + cornerRadius, rightTopCorner[1] + cornerRadius), \"L\", rightBottomCorner, getArc(cornerRadius, -1, 1))\r\n        } else if (arrowBaseTop <= rightTopCorner[1] + cornerRadius && arrowBaseBottom >= rightBottomCorner[1]) {\r\n            var topAngle = asin((rightTopCorner[1] + cornerRadius - arrowBaseTop) / cornerRadius);\r\n            var _arrowBaseTopX2 = rightTopCorner[0] + cornerRadius * cos(topAngle);\r\n            var _arrowBaseTopY2 = rightTopCorner[1] + cornerRadius * (1 - sin(topAngle));\r\n            var _bottomAngle = asin((arrowBaseBottom - rightBottomCorner[1]) / cornerRadius);\r\n            var _arrowBaseBottomX = rightBottomCorner[0] + cornerRadius * (cos(_bottomAngle) - 1);\r\n            var _arrowBaseBottomY = rightBottomCorner[1] + cornerRadius * sin(_bottomAngle);\r\n            _arrowArc = buildPath(getArc(cornerRadius, cos(topAngle), 1 - sin(topAngle)), \"L\", [_arrowBaseTopX2, _arrowBaseTopY2, anchorX, anchorY, _arrowBaseBottomX, _arrowBaseBottomY], getAbsoluteArc(cornerRadius, rightBottomCorner[0] - cornerRadius, rightBottomCorner[1] + cornerRadius))\r\n        } else if (arrowBaseTop > rightTopCorner[1] + cornerRadius && arrowBaseTop <= rightBottomCorner[1] && arrowBaseBottom > rightBottomCorner[1]) {\r\n            var _bottomAngle2 = asin((arrowBaseBottom - rightBottomCorner[1]) / cornerRadius);\r\n            var _arrowBaseBottomX2 = rightBottomCorner[0] + cornerRadius * (cos(_bottomAngle2) - 1);\r\n            var _arrowBaseBottomY2 = rightBottomCorner[1] + cornerRadius * sin(_bottomAngle2);\r\n            _arrowArc = buildPath(getArc(cornerRadius, 1, 1), \"L\", [xr, arrowBaseTop, anchorX, anchorY, _arrowBaseBottomX2, _arrowBaseBottomY2], getAbsoluteArc(cornerRadius, rightBottomCorner[0] - cornerRadius, rightBottomCorner[1] + cornerRadius))\r\n        } else if (arrowBaseTop > rightTopCorner[1] + cornerRadius && arrowBaseBottom > rightBottomCorner[1]) {\r\n            var _bottomAngle3 = asin((arrowBaseBottom - rightBottomCorner[1]) / cornerRadius);\r\n            var _arrowBaseBottomX3 = rightBottomCorner[0] + cornerRadius * (cos(_bottomAngle3) - 1);\r\n            var _arrowBaseBottomY3 = rightBottomCorner[1] + cornerRadius * sin(_bottomAngle3);\r\n            var _topAngle = asin((arrowBaseTop - rightBottomCorner[1]) / cornerRadius);\r\n            var _arrowBaseTopX3 = rightBottomCorner[0] + cornerRadius * (cos(_topAngle) - 1);\r\n            var _arrowBaseTopY3 = rightBottomCorner[1] + cornerRadius * sin(_topAngle);\r\n            _arrowArc = buildPath(getArc(cornerRadius, 1, 1), \"L\", rightBottomCorner, getArc(cornerRadius, cos(_topAngle) - 1, sin(_topAngle)), \"L\", [_arrowBaseTopX3, _arrowBaseTopY3, anchorX, anchorY, _arrowBaseBottomX3, _arrowBaseBottomY3], getAbsoluteArc(cornerRadius, rightBottomCorner[0] - cornerRadius, rightBottomCorner[1] + cornerRadius))\r\n        }\r\n        points = buildPath(leftTopCorner, getArc(cornerRadius, 1, -1), \"L\", rightTopCorner, _arrowArc, \"L\", leftBottomCorner, getArc(cornerRadius, -1, -1))\r\n    }\r\n    return buildPath(\"M\", points, \"Z\")\r\n}\r\nexport class Plaque {\r\n    constructor(options, widget, root, contentTemplate) {\r\n        var bounded = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : true;\r\n        var measureContent = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : (_, g) => g.getBBox();\r\n        var moveContentGroup = arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : (_, g, x, y) => g.move(x, y);\r\n        this.widget = widget;\r\n        this.options = options;\r\n        this.root = root;\r\n        this.contentTemplate = contentTemplate;\r\n        this.bonded = bounded;\r\n        this.measureContent = measureContent;\r\n        this.moveContentGroup = moveContentGroup\r\n    }\r\n    draw(_ref4) {\r\n        var {\r\n            x: anchorX,\r\n            y: anchorY,\r\n            canvas: canvas = {},\r\n            offsetX: offsetX,\r\n            offsetY: offsetY,\r\n            offset: offset = 0\r\n        } = _ref4, restProps = _objectWithoutPropertiesLoose(_ref4, _excluded);\r\n        var options = this.options;\r\n        var {\r\n            x: x,\r\n            y: y\r\n        } = options;\r\n        var bounds_xl = canvas.left,\r\n            bounds_xr = canvas.width - canvas.right,\r\n            bounds_width = canvas.width - canvas.right - canvas.left,\r\n            bounds_yt = canvas.top,\r\n            bounds_yb = canvas.height - canvas.bottom,\r\n            bounds_height = canvas.height - canvas.bottom - canvas.top;\r\n        if (!(isDefined(anchorX) && isDefined(anchorY)) && !(isDefined(x) && isDefined(y))) {\r\n            return false\r\n        }\r\n        if (isDefined(anchorX) && (anchorX < bounds_xl || bounds_xr < anchorX || anchorY < bounds_yt || bounds_yb < anchorY)) {\r\n            return false\r\n        }\r\n        if (!this._root) {\r\n            this._draw()\r\n        }\r\n        var shadowSettings = extend({\r\n            x: \"-50%\",\r\n            y: \"-50%\",\r\n            width: \"200%\",\r\n            height: \"200%\"\r\n        }, options.shadow);\r\n        var contentWidth = options.width > 0 ? options.width : null;\r\n        var contentHeight = options.height > 0 ? options.height : null;\r\n        var onRender = () => {\r\n            var _this$_root;\r\n            var bBox = this._contentBBox = this.measureContent(this.widget, this._contentGroup);\r\n            var size = this._size = {\r\n                width: max(contentWidth, bBox.width) + 2 * options.paddingLeftRight,\r\n                height: max(contentHeight, bBox.height) + 2 * options.paddingTopBottom,\r\n                offset: offset\r\n            };\r\n            var xOff = shadowSettings.offsetX;\r\n            var yOff = shadowSettings.offsetY;\r\n            var blur = 2 * shadowSettings.blur + 1;\r\n            var lm = max(blur - xOff, 0);\r\n            var rm = max(blur + xOff, 0);\r\n            var tm = max(blur - yOff, 0);\r\n            var bm = max(blur + yOff, 0);\r\n            this.margins = {\r\n                lm: lm,\r\n                rm: rm,\r\n                tm: tm,\r\n                bm: bm\r\n            };\r\n            if (!isDefined(x)) {\r\n                if (isDefined(offsetX)) {\r\n                    x = anchorX + offsetX\r\n                } else if (bounds_width < size.width) {\r\n                    x = round(bounds_xl + bounds_width / 2)\r\n                } else {\r\n                    x = min(max(anchorX, Math.ceil(bounds_xl + size.width / 2 + lm)), Math.floor(bounds_xr - size.width / 2 - rm))\r\n                }\r\n            } else {\r\n                x += offsetX || 0;\r\n                if (!isDefined(anchorX)) {\r\n                    anchorX = x\r\n                }\r\n            }\r\n            if (!isDefined(y)) {\r\n                if (isDefined(offsetY)) {\r\n                    y = anchorY + offsetY\r\n                } else {\r\n                    var y_top = anchorY - options.arrowLength - size.height / 2 - offset;\r\n                    var y_bottom = anchorY + options.arrowLength + size.height / 2 + offset;\r\n                    if (bounds_height < size.height + options.arrowLength) {\r\n                        y = round(bounds_yt + size.height / 2)\r\n                    } else if (y_top - size.height / 2 - tm < bounds_yt) {\r\n                        if (y_bottom + size.height / 2 + bm < bounds_yb) {\r\n                            y = y_bottom;\r\n                            anchorY += offset\r\n                        } else {\r\n                            y = round(bounds_yt + size.height / 2)\r\n                        }\r\n                    } else {\r\n                        y = y_top;\r\n                        anchorY -= offset\r\n                    }\r\n                }\r\n            } else {\r\n                y += offsetY || 0;\r\n                if (!isDefined(anchorY)) {\r\n                    anchorY = y + size.height / 2\r\n                }\r\n            }\r\n            this.anchorX = anchorX;\r\n            this.anchorY = anchorY;\r\n            this.move(x, y);\r\n            null === (_this$_root = this._root) || void 0 === _this$_root ? void 0 : _this$_root.append(this.root)\r\n        };\r\n        if (this.contentTemplate.render) {\r\n            this.contentTemplate.render({\r\n                model: options,\r\n                container: this._contentGroup.element,\r\n                onRendered: onRender\r\n            })\r\n        } else {\r\n            return this.contentTemplate(_extends({\r\n                group: this._contentGroup,\r\n                onRender: onRender\r\n            }, restProps))\r\n        }\r\n        return true\r\n    }\r\n    _draw() {\r\n        var renderer = this.widget._renderer;\r\n        var options = this.options;\r\n        var shadowSettings = extend({\r\n            x: \"-50%\",\r\n            y: \"-50%\",\r\n            width: \"200%\",\r\n            height: \"200%\"\r\n        }, options.shadow);\r\n        var shadow = this._shadow = renderer.shadowFilter().attr(shadowSettings);\r\n        var cloudSettings = {\r\n            opacity: options.opacity,\r\n            \"stroke-width\": 0,\r\n            fill: options.color\r\n        };\r\n        var borderOptions = options.border || {};\r\n        if (borderOptions.visible) {\r\n            extend(cloudSettings, {\r\n                \"stroke-width\": borderOptions.width,\r\n                stroke: borderOptions.color,\r\n                \"stroke-opacity\": borderOptions.opacity,\r\n                dashStyle: borderOptions.dashStyle\r\n            })\r\n        }\r\n        var group = this._root = renderer.g().append(this.root);\r\n        if (options.type) {\r\n            group.attr({\r\n                class: \"dxc-\".concat(options.type, \"-annotation\")\r\n            })\r\n        }\r\n        var cloudGroup = renderer.g().attr({\r\n            filter: shadow.id\r\n        }).append(group);\r\n        this._cloud = renderer.path([], \"area\").attr(cloudSettings).sharp().append(cloudGroup);\r\n        this._contentGroup = renderer.g().append(group)\r\n    }\r\n    getBBox() {\r\n        var size = this._size || {};\r\n        var margins = this.margins || {};\r\n        var rotationAngle = getCloudAngle(size, this.x, this.y, this.anchorX, this.anchorY);\r\n        return {\r\n            x: Math.floor(this.x - size.width / 2 - margins.lm),\r\n            y: Math.floor(this.y - size.height / 2 - margins.tm - (270 === rotationAngle ? this.options.arrowLength : 0)),\r\n            width: size.width + margins.lm + margins.rm,\r\n            height: size.height + margins.tm + margins.bm + (90 === rotationAngle || 270 === rotationAngle ? this.options.arrowLength : 0)\r\n        }\r\n    }\r\n    clear() {\r\n        if (this._root) {\r\n            this._root.remove();\r\n            this._shadow.remove();\r\n            this._root = null\r\n        }\r\n        return this\r\n    }\r\n    customizeCloud(attr) {\r\n        if (this._cloud) {\r\n            this._cloud.attr(attr)\r\n        }\r\n    }\r\n    moveRoot(x, y) {\r\n        if (this._root) {\r\n            this._root.move(x, y)\r\n        }\r\n    }\r\n    move(x, y) {\r\n        x = round(x);\r\n        y = round(y);\r\n        this.x = x;\r\n        this.y = y;\r\n        var rotationAngle = getCloudAngle(this._size, x, y, this.anchorX, this.anchorY);\r\n        var radRotationAngle = rotationAngle * PI / 180;\r\n        this._cloud.attr({\r\n            d: getCloudPoints(rotateSize(this._size, rotationAngle), x, y, rotateX(this.anchorX, this.anchorY, radRotationAngle, x, y), rotateY(this.anchorX, this.anchorY, radRotationAngle, x, y), this.options, this.bonded)\r\n        }).rotate(rotationAngle, x, y);\r\n        this.moveContentGroup(this.widget, this._contentGroup, x - this._contentBBox.x - this._contentBBox.width / 2, y - this._contentBBox.y - this._contentBBox.height / 2)\r\n    }\r\n    hitTest(x, y) {\r\n        var {\r\n            width: width,\r\n            height: height\r\n        } = this._size || {};\r\n        return Math.abs(x - this.x) <= width / 2 && Math.abs(y - this.y) <= height / 2\r\n    }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}