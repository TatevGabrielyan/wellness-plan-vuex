{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/**\r\n * DevExtreme (esm/viz/core/renderers/renderer.js)\r\n * Version: 22.1.6\r\n * Build date: Tue Oct 18 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../../../core/renderer\";\nimport domAdapter from \"../../../core/dom_adapter\";\nimport { getWindow } from \"../../../core/utils/window\";\nimport callOnce from \"../../../core/utils/call_once\";\nimport eventsEngine from \"../../../events/core/events_engine\";\nimport browser from \"../../../core/utils/browser\";\nimport { getSvgMarkup } from \"../../../core/utils/svg\";\nimport { AnimationController } from \"./animation\";\nimport { normalizeBBox, rotateBBox, normalizeEnum } from \"../utils\";\nimport { isDefined } from \"../../../core/utils/type\";\nvar window = getWindow();\nvar {\n  max: max,\n  min: min,\n  floor: floor,\n  round: round,\n  sin: sin,\n  cos: cos,\n  abs: abs,\n  PI: PI\n} = Math;\nvar PI_DIV_180 = PI / 180;\nvar SHARPING_CORRECTION = .5;\nvar ARC_COORD_PREC = 5;\nvar pxAddingExceptions = {\n  \"column-count\": true,\n  \"fill-opacity\": true,\n  \"flex-grow\": true,\n  \"flex-shrink\": true,\n  \"font-weight\": true,\n  \"line-height\": true,\n  opacity: true,\n  order: true,\n  orphans: true,\n  widows: true,\n  \"z-index\": true,\n  zoom: true\n};\nvar KEY_TEXT = \"text\";\nvar KEY_STROKE = \"stroke\";\nvar KEY_STROKE_WIDTH = \"stroke-width\";\nvar KEY_STROKE_OPACITY = \"stroke-opacity\";\nvar KEY_FONT_SIZE = \"font-size\";\nvar KEY_FONT_STYLE = \"font-style\";\nvar KEY_FONT_WEIGHT = \"font-weight\";\nvar KEY_TEXT_DECORATION = \"text-decoration\";\nvar KEY_TEXTS_ALIGNMENT = \"textsAlignment\";\nvar NONE = \"none\";\nvar DEFAULT_FONT_SIZE = 12;\nvar ELLIPSIS = \"...\";\nvar objectCreate = function () {\n  if (!Object.create) {\n    return function (proto) {\n      var F = function () {};\n      F.prototype = proto;\n      return new F();\n    };\n  } else {\n    return function (proto) {\n      return Object.create(proto);\n    };\n  }\n}();\nvar DEFAULTS = {\n  scaleX: 1,\n  scaleY: 1,\n  \"pointer-events\": null\n};\nvar getBackup = callOnce(function () {\n  var backupContainer = domAdapter.createElement(\"div\");\n  backupContainer.style.left = \"-9999px\";\n  backupContainer.style.position = \"absolute\";\n  return {\n    backupContainer: backupContainer,\n    backupCounter: 0\n  };\n});\nfunction backupRoot(root) {\n  if (0 === getBackup().backupCounter) {\n    domAdapter.getBody().appendChild(getBackup().backupContainer);\n  }\n  ++getBackup().backupCounter;\n  root.append({\n    element: getBackup().backupContainer\n  });\n}\nfunction restoreRoot(root, container) {\n  root.append({\n    element: container\n  });\n  --getBackup().backupCounter;\n  if (0 === getBackup().backupCounter) {\n    domAdapter.getBody().removeChild(getBackup().backupContainer);\n  }\n}\nvar getNextDefsSvgId = function () {\n  var numDefsSvgElements = 1;\n  return function () {\n    return \"DevExpress_\" + numDefsSvgElements++;\n  };\n}();\nfunction isObjectArgument(value) {\n  return value && \"string\" !== typeof value;\n}\nfunction createElement(tagName) {\n  return domAdapter.createElementNS(\"http://www.w3.org/2000/svg\", tagName);\n}\nexport function getFuncIri(id, pathModified) {\n  return null !== id ? \"url(\" + (pathModified ? window.location.href.split(\"#\")[0] : \"\") + \"#\" + id + \")\" : id;\n}\nfunction extend(target, source) {\n  var key;\n  for (key in source) {\n    target[key] = source[key];\n  }\n  return target;\n}\nfunction roundValue(value, exp) {\n  value = value.toString().split(\"e\");\n  value = round(+(value[0] + \"e\" + (value[1] ? +value[1] + exp : exp)));\n  value = value.toString().split(\"e\");\n  return +(value[0] + \"e\" + (value[1] ? +value[1] - exp : -exp));\n}\nfunction getBoundingClientRect(element) {\n  var box;\n  try {\n    box = element.getBoundingClientRect();\n  } catch (e) {}\n  return box || {\n    left: 0,\n    top: 0\n  };\n}\nvar preserveAspectRatioMap = {\n  full: NONE,\n  lefttop: \"xMinYMin\",\n  leftcenter: \"xMinYMid\",\n  leftbottom: \"xMinYMax\",\n  centertop: \"xMidYMin\",\n  center: \"xMidYMid\",\n  centerbottom: \"xMidYMax\",\n  righttop: \"xMaxYMin\",\n  rightcenter: \"xMaxYMid\",\n  rightbottom: \"xMaxYMax\"\n};\nexport function processHatchingAttrs(element, attrs) {\n  if (attrs.hatching && \"none\" !== normalizeEnum(attrs.hatching.direction)) {\n    attrs = extend({}, attrs);\n    attrs.fill = element._hatching = element.renderer.lockHatching(attrs.fill, attrs.hatching, element._hatching);\n    delete attrs.hatching;\n  } else if (element._hatching) {\n    element.renderer.releaseHatching(element._hatching);\n    element._hatching = null;\n  }\n  return attrs;\n}\nfunction normalizeArcParams(x, y, innerR, outerR, startAngle, endAngle) {\n  var isCircle;\n  var noArc = true;\n  var angleDiff = roundValue(endAngle, 3) - roundValue(startAngle, 3);\n  if (angleDiff) {\n    if (abs(angleDiff) % 360 === 0) {\n      startAngle = 0;\n      endAngle = 360;\n      isCircle = true;\n      endAngle -= .01;\n    }\n    if (startAngle > 360) {\n      startAngle %= 360;\n    }\n    if (endAngle > 360) {\n      endAngle %= 360;\n    }\n    if (startAngle > endAngle) {\n      startAngle -= 360;\n    }\n    noArc = false;\n  }\n  startAngle *= PI_DIV_180;\n  endAngle *= PI_DIV_180;\n  return [x, y, min(outerR, innerR), max(outerR, innerR), cos(startAngle), sin(startAngle), cos(endAngle), sin(endAngle), isCircle, floor(abs(endAngle - startAngle) / PI) % 2 ? \"1\" : \"0\", noArc];\n}\nvar buildArcPath = function (x, y, innerR, outerR, startAngleCos, startAngleSin, endAngleCos, endAngleSin, isCircle, longFlag) {\n  return [\"M\", (x + outerR * startAngleCos).toFixed(ARC_COORD_PREC), (y - outerR * startAngleSin).toFixed(ARC_COORD_PREC), \"A\", outerR.toFixed(ARC_COORD_PREC), outerR.toFixed(ARC_COORD_PREC), 0, longFlag, 0, (x + outerR * endAngleCos).toFixed(ARC_COORD_PREC), (y - outerR * endAngleSin).toFixed(ARC_COORD_PREC), isCircle ? \"M\" : \"L\", (x + innerR * endAngleCos).toFixed(5), (y - innerR * endAngleSin).toFixed(ARC_COORD_PREC), \"A\", innerR.toFixed(ARC_COORD_PREC), innerR.toFixed(ARC_COORD_PREC), 0, longFlag, 1, (x + innerR * startAngleCos).toFixed(ARC_COORD_PREC), (y - innerR * startAngleSin).toFixed(ARC_COORD_PREC), \"Z\"].join(\" \");\n};\nfunction buildPathSegments(points, type) {\n  var list = [[\"M\", 0, 0]];\n  switch (type) {\n    case \"line\":\n      list = buildLineSegments(points);\n      break;\n    case \"area\":\n      list = buildLineSegments(points, true);\n      break;\n    case \"bezier\":\n      list = buildCurveSegments(points);\n      break;\n    case \"bezierarea\":\n      list = buildCurveSegments(points, true);\n  }\n  return list;\n}\nfunction buildLineSegments(points, close) {\n  return buildSegments(points, buildSimpleLineSegment, close);\n}\nfunction buildCurveSegments(points, close) {\n  return buildSegments(points, buildSimpleCurveSegment, close);\n}\nfunction buildSegments(points, buildSimpleSegment, close) {\n  var _points$;\n  var i;\n  var ii;\n  var list = [];\n  if (null !== (_points$ = points[0]) && void 0 !== _points$ && _points$.length) {\n    for (i = 0, ii = points.length; i < ii; ++i) {\n      buildSimpleSegment(points[i], close, list);\n    }\n  } else {\n    buildSimpleSegment(points, close, list);\n  }\n  return list;\n}\nfunction buildSimpleLineSegment(points, close, list) {\n  var i = 0;\n  var k0 = list.length;\n  var k = k0;\n  var ii = (points || []).length;\n  if (ii) {\n    if (void 0 !== points[0].x) {\n      for (; i < ii;) {\n        list[k++] = [\"L\", points[i].x, points[i++].y];\n      }\n    } else {\n      for (; i < ii;) {\n        list[k++] = [\"L\", points[i++], points[i++]];\n      }\n    }\n    list[k0][0] = \"M\";\n  } else {\n    list[k] = [\"M\", 0, 0];\n  }\n  close && list.push([\"Z\"]);\n  return list;\n}\nfunction buildSimpleCurveSegment(points, close, list) {\n  var i;\n  var k = list.length;\n  var ii = (points || []).length;\n  if (ii) {\n    if (void 0 !== points[0].x) {\n      list[k++] = [\"M\", points[0].x, points[0].y];\n      for (i = 1; i < ii;) {\n        list[k++] = [\"C\", points[i].x, points[i++].y, points[i].x, points[i++].y, points[i].x, points[i++].y];\n      }\n    } else {\n      list[k++] = [\"M\", points[0], points[1]];\n      for (i = 2; i < ii;) {\n        list[k++] = [\"C\", points[i++], points[i++], points[i++], points[i++], points[i++], points[i++]];\n      }\n    }\n  } else {\n    list[k] = [\"M\", 0, 0];\n  }\n  close && list.push([\"Z\"]);\n  return list;\n}\nfunction combinePathParam(segments) {\n  var d = [];\n  var k = 0;\n  var i;\n  var ii = segments.length;\n  var segment;\n  var j;\n  var jj;\n  for (i = 0; i < ii; ++i) {\n    segment = segments[i];\n    for (j = 0, jj = segment.length; j < jj; ++j) {\n      d[k++] = segment[j];\n    }\n  }\n  return d.join(\" \");\n}\nfunction compensateSegments(oldSegments, newSegments, type) {\n  var oldLength = oldSegments.length;\n  var newLength = newSegments.length;\n  var i;\n  var originalNewSegments;\n  var makeEqualSegments = -1 !== type.indexOf(\"area\") ? makeEqualAreaSegments : makeEqualLineSegments;\n  if (0 === oldLength) {\n    for (i = 0; i < newLength; i++) {\n      oldSegments.push(newSegments[i].slice(0));\n    }\n  } else if (oldLength < newLength) {\n    makeEqualSegments(oldSegments, newSegments, type);\n  } else if (oldLength > newLength) {\n    originalNewSegments = newSegments.slice(0);\n    makeEqualSegments(newSegments, oldSegments, type);\n  }\n  return originalNewSegments;\n}\nfunction prepareConstSegment(constSeg, type) {\n  var x = constSeg[constSeg.length - 2];\n  var y = constSeg[constSeg.length - 1];\n  switch (type) {\n    case \"line\":\n    case \"area\":\n      constSeg[0] = \"L\";\n      break;\n    case \"bezier\":\n    case \"bezierarea\":\n      constSeg[0] = \"C\";\n      constSeg[1] = constSeg[3] = constSeg[5] = x;\n      constSeg[2] = constSeg[4] = constSeg[6] = y;\n  }\n}\nfunction makeEqualLineSegments(short, long, type) {\n  var constSeg = short[short.length - 1].slice();\n  var i = short.length;\n  prepareConstSegment(constSeg, type);\n  for (; i < long.length; i++) {\n    short[i] = constSeg.slice(0);\n  }\n}\nfunction makeEqualAreaSegments(short, long, type) {\n  var i;\n  var head;\n  var shortLength = short.length;\n  var longLength = long.length;\n  var constsSeg1;\n  var constsSeg2;\n  if ((shortLength - 1) % 2 === 0 && (longLength - 1) % 2 === 0) {\n    i = (shortLength - 1) / 2 - 1;\n    head = short.slice(0, i + 1);\n    constsSeg1 = head[head.length - 1].slice(0);\n    constsSeg2 = short.slice(i + 1)[0].slice(0);\n    prepareConstSegment(constsSeg1, type);\n    prepareConstSegment(constsSeg2, type);\n    for (var j = i; j < (longLength - 1) / 2 - 1; j++) {\n      short.splice(j + 1, 0, constsSeg1);\n      short.splice(j + 3, 0, constsSeg2);\n    }\n  }\n}\nfunction baseCss(that, styles) {\n  var elemStyles = that._styles;\n  var key;\n  var value;\n  styles = styles || {};\n  for (key in styles) {\n    value = styles[key];\n    if (isDefined(value)) {\n      value += \"number\" === typeof value && !pxAddingExceptions[key] ? \"px\" : \"\";\n      elemStyles[key] = \"\" !== value ? value : null;\n    }\n  }\n  for (key in elemStyles) {\n    value = elemStyles[key];\n    if (value) {\n      that.element.style[key] = value;\n    } else if (null === value) {\n      that.element.style[key] = \"\";\n    }\n  }\n  return that;\n}\nfunction fixFuncIri(wrapper, attribute) {\n  var element = wrapper.element;\n  var id = wrapper.attr(attribute);\n  if (id && -1 !== id.indexOf(\"DevExpress\")) {\n    element.removeAttribute(attribute);\n    element.setAttribute(attribute, getFuncIri(id, wrapper.renderer.pathModified));\n  }\n}\nfunction baseAttr(that, attrs) {\n  attrs = attrs || {};\n  var settings = that._settings;\n  var attributes = {};\n  var key;\n  var value;\n  var elem = that.element;\n  var renderer = that.renderer;\n  var rtl = renderer.rtl;\n  var hasTransformations;\n  var recalculateDashStyle;\n  var sw;\n  var i;\n  if (!isObjectArgument(attrs)) {\n    if (attrs in settings) {\n      return settings[attrs];\n    }\n    if (attrs in DEFAULTS) {\n      return DEFAULTS[attrs];\n    }\n    return 0;\n  }\n  extend(attributes, attrs);\n  for (key in attributes) {\n    value = attributes[key];\n    if (void 0 === value) {\n      continue;\n    }\n    settings[key] = value;\n    if (\"align\" === key) {\n      key = \"text-anchor\";\n      value = {\n        left: rtl ? \"end\" : \"start\",\n        center: \"middle\",\n        right: rtl ? \"start\" : \"end\"\n      }[value] || null;\n    } else if (\"dashStyle\" === key) {\n      recalculateDashStyle = true;\n      continue;\n    } else if (key === KEY_STROKE_WIDTH) {\n      recalculateDashStyle = true;\n    } else if (value && (\"fill\" === key || \"clip-path\" === key || \"filter\" === key) && 0 === value.indexOf(\"DevExpress\")) {\n      that._addFixIRICallback();\n      value = getFuncIri(value, renderer.pathModified);\n    } else if (/^(translate(X|Y)|rotate[XY]?|scale(X|Y)|sharp|sharpDirection)$/i.test(key)) {\n      hasTransformations = true;\n      continue;\n    } else if (/^(x|y|d)$/i.test(key)) {\n      hasTransformations = true;\n    }\n    if (null === value) {\n      elem.removeAttribute(key);\n    } else {\n      elem.setAttribute(key, value);\n    }\n  }\n  if (recalculateDashStyle && \"dashStyle\" in settings) {\n    value = settings.dashStyle;\n    sw = (\"_originalSW\" in that ? that._originalSW : settings[KEY_STROKE_WIDTH]) || 1;\n    key = \"stroke-dasharray\";\n    value = null === value ? \"\" : normalizeEnum(value);\n    if (\"\" === value || \"solid\" === value || value === NONE) {\n      that.element.removeAttribute(key);\n    } else {\n      value = value.replace(/longdash/g, \"8,3,\").replace(/dash/g, \"4,3,\").replace(/dot/g, \"1,3,\").replace(/,$/, \"\").split(\",\");\n      i = value.length;\n      while (i--) {\n        value[i] = parseInt(value[i]) * sw;\n      }\n      that.element.setAttribute(key, value.join(\",\"));\n    }\n  }\n  if (hasTransformations) {\n    that._applyTransformation();\n  }\n  return that;\n}\nfunction pathAttr(attrs) {\n  var segments;\n  if (isObjectArgument(attrs)) {\n    attrs = extend({}, attrs);\n    segments = attrs.segments;\n    if (\"points\" in attrs) {\n      segments = buildPathSegments(attrs.points, this.type);\n      delete attrs.points;\n    }\n    if (segments) {\n      attrs.d = combinePathParam(segments);\n      this.segments = segments;\n      delete attrs.segments;\n    }\n  }\n  return baseAttr(this, attrs);\n}\nfunction arcAttr(attrs) {\n  var settings = this._settings;\n  var x;\n  var y;\n  var innerRadius;\n  var outerRadius;\n  var startAngle;\n  var endAngle;\n  if (isObjectArgument(attrs)) {\n    attrs = extend({}, attrs);\n    if (\"x\" in attrs || \"y\" in attrs || \"innerRadius\" in attrs || \"outerRadius\" in attrs || \"startAngle\" in attrs || \"endAngle\" in attrs) {\n      settings.x = x = \"x\" in attrs ? attrs.x : settings.x;\n      delete attrs.x;\n      settings.y = y = \"y\" in attrs ? attrs.y : settings.y;\n      delete attrs.y;\n      settings.innerRadius = innerRadius = \"innerRadius\" in attrs ? attrs.innerRadius : settings.innerRadius;\n      delete attrs.innerRadius;\n      settings.outerRadius = outerRadius = \"outerRadius\" in attrs ? attrs.outerRadius : settings.outerRadius;\n      delete attrs.outerRadius;\n      settings.startAngle = startAngle = \"startAngle\" in attrs ? attrs.startAngle : settings.startAngle;\n      delete attrs.startAngle;\n      settings.endAngle = endAngle = \"endAngle\" in attrs ? attrs.endAngle : settings.endAngle;\n      delete attrs.endAngle;\n      attrs.d = buildArcPath.apply(null, normalizeArcParams(x, y, innerRadius, outerRadius, startAngle, endAngle));\n    }\n  }\n  return baseAttr(this, attrs);\n}\nfunction rectAttr(attrs) {\n  var x;\n  var y;\n  var width;\n  var height;\n  var sw;\n  var maxSW;\n  var newSW;\n  if (isObjectArgument(attrs)) {\n    attrs = extend({}, attrs);\n    if (void 0 !== attrs.x || void 0 !== attrs.y || void 0 !== attrs.width || void 0 !== attrs.height || void 0 !== attrs[KEY_STROKE_WIDTH]) {\n      void 0 !== attrs.x ? x = this._originalX = attrs.x : x = this._originalX || 0;\n      void 0 !== attrs.y ? y = this._originalY = attrs.y : y = this._originalY || 0;\n      void 0 !== attrs.width ? width = this._originalWidth = attrs.width : width = this._originalWidth || 0;\n      void 0 !== attrs.height ? height = this._originalHeight = attrs.height : height = this._originalHeight || 0;\n      void 0 !== attrs[KEY_STROKE_WIDTH] ? sw = this._originalSW = attrs[KEY_STROKE_WIDTH] : sw = this._originalSW;\n      maxSW = ~~((width < height ? width : height) / 2);\n      newSW = (sw || 0) < maxSW ? sw || 0 : maxSW;\n      attrs.x = x + newSW / 2;\n      attrs.y = y + newSW / 2;\n      attrs.width = width - newSW;\n      attrs.height = height - newSW;\n      ((sw || 0) !== newSW || !(0 === newSW && void 0 === sw)) && (attrs[KEY_STROKE_WIDTH] = newSW);\n    }\n    if (\"sharp\" in attrs) {\n      delete attrs.sharp;\n    }\n  }\n  return baseAttr(this, attrs);\n}\nfunction textAttr(attrs) {\n  var isResetRequired;\n  if (!isObjectArgument(attrs)) {\n    return baseAttr(this, attrs);\n  }\n  attrs = extend({}, attrs);\n  var settings = this._settings;\n  var wasStroked = isDefined(settings[KEY_STROKE]) && isDefined(settings[KEY_STROKE_WIDTH]);\n  if (void 0 !== attrs[KEY_TEXT]) {\n    settings[KEY_TEXT] = attrs[KEY_TEXT];\n    delete attrs[KEY_TEXT];\n    isResetRequired = true;\n  }\n  if (void 0 !== attrs[KEY_STROKE]) {\n    settings[KEY_STROKE] = attrs[KEY_STROKE];\n    delete attrs[KEY_STROKE];\n  }\n  if (void 0 !== attrs[KEY_STROKE_WIDTH]) {\n    settings[KEY_STROKE_WIDTH] = attrs[KEY_STROKE_WIDTH];\n    delete attrs[KEY_STROKE_WIDTH];\n  }\n  if (void 0 !== attrs[KEY_STROKE_OPACITY]) {\n    settings[KEY_STROKE_OPACITY] = attrs[KEY_STROKE_OPACITY];\n    delete attrs[KEY_STROKE_OPACITY];\n  }\n  if (void 0 !== attrs[KEY_TEXTS_ALIGNMENT]) {\n    alignTextNodes(this, attrs[KEY_TEXTS_ALIGNMENT]);\n    delete attrs[KEY_TEXTS_ALIGNMENT];\n  }\n  var isStroked = isDefined(settings[KEY_STROKE]) && isDefined(settings[KEY_STROKE_WIDTH]);\n  baseAttr(this, attrs);\n  isResetRequired = isResetRequired || isStroked !== wasStroked && settings[KEY_TEXT];\n  if (isResetRequired) {\n    createTextNodes(this, settings.text, isStroked);\n    this._hasEllipsis = false;\n  }\n  if (isResetRequired || void 0 !== attrs.x || void 0 !== attrs.y) {\n    locateTextNodes(this);\n  }\n  if (isStroked) {\n    strokeTextNodes(this);\n  }\n  return this;\n}\nfunction textCss(styles) {\n  styles = styles || {};\n  baseCss(this, styles);\n  if (KEY_FONT_SIZE in styles) {\n    locateTextNodes(this);\n  }\n  return this;\n}\nfunction orderHtmlTree(list, line, node, parentStyle, parentClassName) {\n  var style;\n  var realStyle;\n  var i;\n  var ii;\n  var nodes;\n  if (void 0 !== node.wholeText) {\n    list.push({\n      value: node.wholeText,\n      style: parentStyle,\n      className: parentClassName,\n      line: line,\n      height: parentStyle[KEY_FONT_SIZE] || 0\n    });\n  } else if (\"BR\" === node.tagName) {\n    ++line;\n  } else if (domAdapter.isElementNode(node)) {\n    extend(style = {}, parentStyle);\n    switch (node.tagName) {\n      case \"B\":\n      case \"STRONG\":\n        style[KEY_FONT_WEIGHT] = \"bold\";\n        break;\n      case \"I\":\n      case \"EM\":\n        style[KEY_FONT_STYLE] = \"italic\";\n        break;\n      case \"U\":\n        style[KEY_TEXT_DECORATION] = \"underline\";\n    }\n    realStyle = node.style;\n    realStyle.color && (style.fill = realStyle.color);\n    realStyle.fontSize && (style[KEY_FONT_SIZE] = realStyle.fontSize);\n    realStyle.fontStyle && (style[KEY_FONT_STYLE] = realStyle.fontStyle);\n    realStyle.fontWeight && (style[KEY_FONT_WEIGHT] = realStyle.fontWeight);\n    realStyle.textDecoration && (style[KEY_TEXT_DECORATION] = realStyle.textDecoration);\n    for (i = 0, nodes = node.childNodes, ii = nodes.length; i < ii; ++i) {\n      line = orderHtmlTree(list, line, nodes[i], style, node.className || parentClassName);\n    }\n  }\n  return line;\n}\nfunction adjustLineHeights(items) {\n  var i;\n  var ii;\n  var currentItem = items[0];\n  var item;\n  for (i = 1, ii = items.length; i < ii; ++i) {\n    item = items[i];\n    if (item.line === currentItem.line) {\n      currentItem.height = maxLengthFontSize(currentItem.height, item.height);\n      currentItem.inherits = currentItem.inherits || 0 === parseFloat(item.height);\n      item.height = NaN;\n    } else {\n      currentItem = item;\n    }\n  }\n}\nfunction removeExtraAttrs(html) {\n  var findStyleAndClassAttrs = /(style|class)\\s*=\\s*([\"'])(?:(?!\\2).)*\\2\\s?/gi;\n  return html.replace(/(?:(<[a-z0-9]+\\s*))([\\s\\S]*?)(>|\\/>)/gi, function (allTagAttrs, p1, p2, p3) {\n    p2 = (p2 && p2.match(findStyleAndClassAttrs) || []).map(function (str) {\n      return str;\n    }).join(\" \");\n    return p1 + p2 + p3;\n  });\n}\nfunction parseHTML(text) {\n  var items = [];\n  var div = domAdapter.createElement(\"div\");\n  div.innerHTML = text.replace(/\\r/g, \"\").replace(/\\n/g, \"<br/>\");\n  orderHtmlTree(items, 0, div, {}, \"\");\n  adjustLineHeights(items);\n  return items;\n}\nfunction parseMultiline(text) {\n  var texts = text.replace(/\\r/g, \"\").split(/\\n/g);\n  var i = 0;\n  var items = [];\n  for (; i < texts.length; i++) {\n    items.push({\n      value: texts[i].trim(),\n      height: 0,\n      line: i\n    });\n  }\n  return items;\n}\nfunction createTspans(items, element, fieldName) {\n  var i;\n  var ii;\n  var item;\n  for (i = 0, ii = items.length; i < ii; ++i) {\n    item = items[i];\n    item[fieldName] = createElement(\"tspan\");\n    item[fieldName].appendChild(domAdapter.createTextNode(item.value));\n    item.style && baseCss({\n      element: item[fieldName],\n      _styles: {}\n    }, item.style);\n    item.className && item[fieldName].setAttribute(\"class\", item.className);\n    element.appendChild(item[fieldName]);\n  }\n}\nfunction restoreText() {\n  if (this._hasEllipsis) {\n    this.attr({\n      text: this._settings.text\n    });\n  }\n}\nfunction applyEllipsis(maxWidth) {\n  var lines;\n  var hasEllipsis = false;\n  var i;\n  var ii;\n  var lineParts;\n  var j;\n  var jj;\n  var text;\n  restoreText.call(this);\n  var ellipsis = this.renderer.text(ELLIPSIS).attr(this._styles).append(this.renderer.root);\n  var ellipsisWidth = ellipsis.getBBox().width;\n  if (this._getElementBBox().width > maxWidth) {\n    if (maxWidth - ellipsisWidth < 0) {\n      maxWidth = 0;\n    } else {\n      maxWidth -= ellipsisWidth;\n    }\n    lines = prepareLines(this.element, this._texts, maxWidth);\n    for (i = 0, ii = lines.length; i < ii; ++i) {\n      lineParts = lines[i].parts;\n      if (1 === lines[i].commonLength) {\n        continue;\n      }\n      for (j = 0, jj = lineParts.length; j < jj; ++j) {\n        text = lineParts[j];\n        if (isDefined(text.endIndex)) {\n          setNewText(text, text.endIndex);\n          hasEllipsis = true;\n        } else if (text.startBox > maxWidth) {\n          removeTextSpan(text);\n        }\n      }\n    }\n  }\n  ellipsis.remove();\n  this._hasEllipsis = hasEllipsis;\n  return hasEllipsis;\n}\nfunction cloneAndRemoveAttrs(node) {\n  var clone;\n  if (node) {\n    clone = node.cloneNode();\n    clone.removeAttribute(\"y\");\n    clone.removeAttribute(\"x\");\n  }\n  return clone || node;\n}\nfunction detachTitleElements(element) {\n  var titleElements = domAdapter.querySelectorAll(element, \"title\");\n  for (var i = 0; i < titleElements.length; i++) {\n    element.removeChild(titleElements[i]);\n  }\n  return titleElements;\n}\nfunction detachAndStoreTitleElements(element) {\n  var titleElements = detachTitleElements(element);\n  return () => {\n    for (var i = 0; i < titleElements.length; i++) {\n      element.appendChild(titleElements[i]);\n    }\n  };\n}\nfunction setMaxSize(maxWidth, maxHeight) {\n  var options = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};\n  var that = this;\n  var lines = [];\n  var textChanged = false;\n  var textIsEmpty = false;\n  var ellipsisMaxWidth = maxWidth;\n  restoreText.call(that);\n  var restoreTitleElement = detachAndStoreTitleElements(this.element);\n  var ellipsis = that.renderer.text(ELLIPSIS).attr(that._styles).append(that.renderer.root);\n  var ellipsisWidth = ellipsis.getBBox().width;\n  var {\n    width: width,\n    height: height\n  } = that._getElementBBox();\n  if ((width || height) && (width > maxWidth || maxHeight && height > maxHeight)) {\n    if (maxWidth - ellipsisWidth < 0) {\n      ellipsisMaxWidth = 0;\n    } else {\n      ellipsisMaxWidth -= ellipsisWidth;\n    }\n    lines = applyOverflowRules(that.element, that._texts, maxWidth, ellipsisMaxWidth, options);\n    lines = setMaxHeight(lines, ellipsisMaxWidth, options, maxHeight, parseFloat(this._getLineHeight()));\n    this._texts = lines.reduce((texts, line) => texts.concat(line.parts), []).filter(t => \"\" !== t.value).map(t => {\n      t.stroke && t.tspan.parentNode.appendChild(t.stroke);\n      return t;\n    }).map(t => {\n      t.tspan.parentNode.appendChild(t.tspan);\n      return t;\n    });\n    !this._texts.length && (this._texts = null);\n    textChanged = true;\n    if (this._texts) {\n      locateTextNodes(this);\n    } else {\n      this.element.textContent = \"\";\n      textIsEmpty = true;\n    }\n  }\n  ellipsis.remove();\n  that._hasEllipsis = textChanged;\n  restoreTitleElement();\n  return {\n    rowCount: lines.length,\n    textChanged: textChanged,\n    textIsEmpty: textIsEmpty\n  };\n}\nfunction getIndexForEllipsis(text, maxWidth, startBox, endBox) {\n  var k;\n  var kk;\n  if (startBox <= maxWidth && endBox > maxWidth) {\n    for (k = 1, kk = text.value.length; k <= kk; ++k) {\n      if (startBox + text.tspan.getSubStringLength(0, k) > maxWidth) {\n        return k - 1;\n      }\n    }\n  }\n}\nfunction getTextWidth(text) {\n  return text.value.length ? text.tspan.getSubStringLength(0, text.value.length) : 0;\n}\nfunction prepareLines(element, texts, maxWidth) {\n  var lines = [];\n  var i;\n  var ii;\n  var text;\n  var startBox;\n  var endBox;\n  if (texts) {\n    for (i = 0, ii = texts.length; i < ii; ++i) {\n      text = texts[i];\n      if (!lines[text.line]) {\n        text.startBox = startBox = 0;\n        lines.push({\n          commonLength: text.value.length,\n          parts: [text]\n        });\n      } else {\n        text.startBox = startBox;\n        lines[text.line].parts.push(text);\n        lines[text.line].commonLength += text.value.length;\n      }\n      endBox = startBox + text.tspan.getSubStringLength(0, text.value.length);\n      text.endIndex = getIndexForEllipsis(text, maxWidth, startBox, endBox);\n      startBox = endBox;\n    }\n  } else {\n    text = {\n      value: element.textContent,\n      tspan: element\n    };\n    text.startBox = startBox = 0;\n    endBox = startBox + getTextWidth(text);\n    text.endIndex = getIndexForEllipsis(text, maxWidth, startBox, endBox);\n    lines = [{\n      commonLength: element.textContent.length,\n      parts: [text]\n    }];\n  }\n  return lines;\n}\nfunction getSpaceBreakIndex(text, maxWidth) {\n  var initialIndices = text.startBox > 0 ? [0] : [];\n  var spaceIndices = text.value.split(\"\").reduce((indices, char, index) => {\n    if (\" \" === char) {\n      indices.push(index);\n    }\n    return indices;\n  }, initialIndices);\n  var spaceIndex = 0;\n  while (void 0 !== spaceIndices[spaceIndex + 1] && text.startBox + text.tspan.getSubStringLength(0, spaceIndices[spaceIndex + 1]) < maxWidth) {\n    spaceIndex++;\n  }\n  return spaceIndices[spaceIndex];\n}\nfunction getWordBreakIndex(text, maxWidth) {\n  for (var i = 0; i < text.value.length - 1; i++) {\n    if (text.startBox + text.tspan.getSubStringLength(0, i + 1) > maxWidth) {\n      return i;\n    }\n  }\n}\nfunction getEllipsisString(ellipsisMaxWidth, _ref) {\n  var {\n    hideOverflowEllipsis: hideOverflowEllipsis\n  } = _ref;\n  return hideOverflowEllipsis && 0 === ellipsisMaxWidth ? \"\" : ELLIPSIS;\n}\nfunction setEllipsis(text, ellipsisMaxWidth, options) {\n  var ellipsis = getEllipsisString(ellipsisMaxWidth, options);\n  if (text.value.length && text.tspan.parentNode) {\n    for (var i = text.value.length - 1; i >= 1; i--) {\n      if (text.startBox + text.tspan.getSubStringLength(0, i) < ellipsisMaxWidth) {\n        setNewText(text, i, ellipsis);\n        break;\n      } else if (1 === i) {\n        setNewText(text, 0, ellipsis);\n      }\n    }\n  }\n}\nfunction wordWrap(text, maxWidth, ellipsisMaxWidth, options, lastStepBreakIndex) {\n  var wholeText = text.value;\n  var breakIndex;\n  if (\"none\" !== options.wordWrap) {\n    breakIndex = \"normal\" === options.wordWrap ? getSpaceBreakIndex(text, maxWidth) : getWordBreakIndex(text, maxWidth);\n  }\n  var restLines = [];\n  var restText;\n  if (isFinite(breakIndex) && !(0 === lastStepBreakIndex && 0 === breakIndex)) {\n    setNewText(text, breakIndex, \"\");\n    var newTextOffset = \" \" === wholeText[breakIndex] ? 1 : 0;\n    var restString = wholeText.slice(breakIndex + newTextOffset);\n    if (restString.length) {\n      var restTspan = cloneAndRemoveAttrs(text.tspan);\n      restTspan.textContent = restString;\n      text.tspan.parentNode.appendChild(restTspan);\n      restText = extend(extend({}, text), {\n        value: restString,\n        startBox: 0,\n        height: 0,\n        tspan: restTspan,\n        stroke: cloneAndRemoveAttrs(text.stroke),\n        endBox: restTspan.getSubStringLength(0, restString.length)\n      });\n      restText.stroke && (restText.stroke.textContent = restString);\n      if (restText.endBox > maxWidth) {\n        restLines = wordWrap(restText, maxWidth, ellipsisMaxWidth, options, breakIndex);\n        if (!restLines.length) {\n          return [];\n        }\n      }\n    }\n  }\n  if (text.value.length) {\n    if (\"ellipsis\" === options.textOverflow && text.tspan.getSubStringLength(0, text.value.length) > maxWidth) {\n      setEllipsis(text, ellipsisMaxWidth, options);\n    }\n    if (\"hide\" === options.textOverflow && text.tspan.getSubStringLength(0, text.value.length) > maxWidth) {\n      return [];\n    }\n  } else {\n    text.tspan.parentNode.removeChild(text.tspan);\n  }\n  var parts = [];\n  if (restText) {\n    parts.push(restText);\n  }\n  return [{\n    commonLength: wholeText.length,\n    parts: parts\n  }].concat(restLines);\n}\nfunction calculateLineHeight(line, lineHeight) {\n  return line.parts.reduce((height, text) => max(height, getItemLineHeight(text, lineHeight)), 0);\n}\nfunction setMaxHeight(lines, ellipsisMaxWidth, options, maxHeight, lineHeight) {\n  var textOverflow = options.textOverflow;\n  if (!isFinite(maxHeight) || 0 === Number(maxHeight) || \"none\" === textOverflow) {\n    return lines;\n  }\n  var result = lines.reduce((_ref2, l, index, arr) => {\n    var [lines, commonHeight] = _ref2;\n    var height = calculateLineHeight(l, lineHeight);\n    commonHeight += height;\n    if (commonHeight < maxHeight) {\n      lines.push(l);\n    } else {\n      l.parts.forEach(item => {\n        removeTextSpan(item);\n      });\n      if (\"ellipsis\" === textOverflow) {\n        var prevLine = arr[index - 1];\n        if (prevLine) {\n          var text = prevLine.parts[prevLine.parts.length - 1];\n          if (!text.hasEllipsis) {\n            if (0 === ellipsisMaxWidth || text.endBox < ellipsisMaxWidth) {\n              setNewText(text, text.value.length, getEllipsisString(ellipsisMaxWidth, options));\n            } else {\n              setEllipsis(text, ellipsisMaxWidth, options);\n            }\n          }\n        }\n      }\n    }\n    return [lines, commonHeight];\n  }, [[], 0]);\n  if (\"hide\" === textOverflow && result[1] > maxHeight) {\n    result[0].forEach(l => {\n      l.parts.forEach(item => {\n        removeTextSpan(item);\n      });\n    });\n    return [];\n  }\n  return result[0];\n}\nfunction applyOverflowRules(element, texts, maxWidth, ellipsisMaxWidth, options) {\n  if (!texts) {\n    var textValue = element.textContent;\n    var text = {\n      value: textValue,\n      height: 0,\n      line: 0\n    };\n    element.textContent = \"\";\n    createTspans([text], element, \"tspan\");\n    texts = [text];\n  }\n  return texts.reduce((_ref3, text) => {\n    var [lines, startBox, endBox, stop, lineNumber] = _ref3;\n    var line = lines[lines.length - 1];\n    if (stop) {\n      return [lines, startBox, endBox, stop];\n    }\n    if (!line || text.line !== lineNumber) {\n      text.startBox = startBox = 0;\n      lines.push({\n        commonLength: text.value.length,\n        parts: [text]\n      });\n    } else {\n      text.startBox = startBox;\n      if (startBox > ellipsisMaxWidth && \"none\" === options.wordWrap && \"ellipsis\" === options.textOverflow) {\n        removeTextSpan(text);\n        return [lines, startBox, endBox, stop, lineNumber];\n      }\n      line.parts.push(text);\n      line.commonLength += text.value.length;\n    }\n    text.endBox = endBox = startBox + getTextWidth(text);\n    startBox = endBox;\n    if (isDefined(maxWidth) && endBox > maxWidth) {\n      var wordWrapLines = wordWrap(text, maxWidth, ellipsisMaxWidth, options);\n      if (!wordWrapLines.length) {\n        lines = [];\n        stop = true;\n      } else {\n        lines = lines.concat(wordWrapLines.filter(l => l.parts.length > 0));\n      }\n    }\n    return [lines, startBox, endBox, stop, text.line];\n  }, [[], 0, 0, false, 0])[0];\n}\nfunction setNewText(text, index) {\n  var insertString = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : ELLIPSIS;\n  var newText = text.value.substr(0, index) + insertString;\n  text.value = text.tspan.textContent = newText;\n  text.stroke && (text.stroke.textContent = newText);\n  if (insertString === ELLIPSIS) {\n    text.hasEllipsis = true;\n  }\n}\nfunction removeTextSpan(text) {\n  text.tspan.parentNode && text.tspan.parentNode.removeChild(text.tspan);\n  text.stroke && text.stroke.parentNode && text.stroke.parentNode.removeChild(text.stroke);\n}\nfunction createTextNodes(wrapper, text, isStroked) {\n  var items;\n  var parsedHtml;\n  wrapper._texts = null;\n  wrapper.clear();\n  if (null === text) {\n    return;\n  }\n  text = \"\" + text;\n  if (!wrapper.renderer.encodeHtml && (/<[a-z][\\s\\S]*>/i.test(text) || -1 !== text.indexOf(\"&\"))) {\n    parsedHtml = removeExtraAttrs(text);\n    items = parseHTML(parsedHtml);\n  } else if (/\\n/g.test(text)) {\n    items = parseMultiline(text);\n  } else if (isStroked) {\n    items = [{\n      value: text.trim(),\n      height: 0\n    }];\n  }\n  if (items) {\n    if (items.length) {\n      wrapper._texts = items;\n      if (isStroked) {\n        createTspans(items, wrapper.element, KEY_STROKE);\n      }\n      createTspans(items, wrapper.element, \"tspan\");\n    }\n  } else {\n    wrapper.element.appendChild(domAdapter.createTextNode(text));\n  }\n}\nfunction setTextNodeAttribute(item, name, value) {\n  item.tspan.setAttribute(name, value);\n  item.stroke && item.stroke.setAttribute(name, value);\n}\nfunction getItemLineHeight(item, defaultValue) {\n  return item.inherits ? maxLengthFontSize(item.height, defaultValue) : item.height || defaultValue;\n}\nfunction locateTextNodes(wrapper) {\n  if (!wrapper._texts) {\n    return;\n  }\n  var items = wrapper._texts;\n  var x = wrapper._settings.x;\n  var lineHeight = wrapper._getLineHeight();\n  var i;\n  var ii;\n  var item = items[0];\n  setTextNodeAttribute(item, \"x\", x);\n  setTextNodeAttribute(item, \"y\", wrapper._settings.y);\n  for (i = 1, ii = items.length; i < ii; ++i) {\n    item = items[i];\n    if (parseFloat(item.height) >= 0) {\n      setTextNodeAttribute(item, \"x\", x);\n      var height = getItemLineHeight(item, lineHeight);\n      setTextNodeAttribute(item, \"dy\", height);\n    }\n  }\n}\nfunction alignTextNodes(wrapper, alignment) {\n  if (!wrapper._texts || \"center\" === alignment) {\n    return;\n  }\n  var items = wrapper._texts;\n  var direction = \"left\" === alignment ? -1 : 1;\n  var maxTextWidth = Math.max.apply(Math, items.map(t => getTextWidth(t)));\n  for (var i = 0; i < items.length; i++) {\n    var item = items[i];\n    var textWidth = getTextWidth(item);\n    if (0 !== maxTextWidth && maxTextWidth !== textWidth) {\n      setTextNodeAttribute(item, \"dx\", direction * round((maxTextWidth - textWidth) / 2 * 10) / 10);\n    }\n  }\n}\nfunction maxLengthFontSize(fontSize1, fontSize2) {\n  var parsedHeight1 = parseFloat(fontSize1);\n  var parsedHeight2 = parseFloat(fontSize2);\n  var height1 = parsedHeight1 || DEFAULT_FONT_SIZE;\n  var height2 = parsedHeight2 || DEFAULT_FONT_SIZE;\n  return height1 > height2 ? !isNaN(parsedHeight1) ? fontSize1 : height1 : !isNaN(parsedHeight2) ? fontSize2 : height2;\n}\nfunction strokeTextNodes(wrapper) {\n  if (!wrapper._texts) {\n    return;\n  }\n  var items = wrapper._texts;\n  var stroke = wrapper._settings[KEY_STROKE];\n  var strokeWidth = wrapper._settings[KEY_STROKE_WIDTH];\n  var strokeOpacity = wrapper._settings[KEY_STROKE_OPACITY] || 1;\n  var tspan;\n  var i;\n  var ii;\n  for (i = 0, ii = items.length; i < ii; ++i) {\n    tspan = items[i].stroke;\n    tspan.setAttribute(KEY_STROKE, stroke);\n    tspan.setAttribute(KEY_STROKE_WIDTH, strokeWidth);\n    tspan.setAttribute(KEY_STROKE_OPACITY, strokeOpacity);\n    tspan.setAttribute(\"stroke-linejoin\", \"round\");\n  }\n}\nfunction baseAnimate(that, params, options, complete) {\n  options = options || {};\n  var key;\n  var value;\n  var renderer = that.renderer;\n  var settings = that._settings;\n  var animationParams = {};\n  var defaults = {\n    translateX: 0,\n    translateY: 0,\n    scaleX: 1,\n    scaleY: 1,\n    rotate: 0,\n    rotateX: 0,\n    rotateY: 0\n  };\n  if (complete) {\n    options.complete = complete;\n  }\n  if (renderer.animationEnabled()) {\n    for (key in params) {\n      value = params[key];\n      if (/^(translate(X|Y)|rotate[XY]?|scale(X|Y))$/i.test(key)) {\n        animationParams.transform = animationParams.transform || {\n          from: {},\n          to: {}\n        };\n        animationParams.transform.from[key] = key in settings ? Number(settings[key].toFixed(3)) : defaults[key];\n        animationParams.transform.to[key] = value;\n      } else if (\"arc\" === key || \"segments\" === key) {\n        animationParams[key] = value;\n      } else {\n        animationParams[key] = {\n          from: key in settings ? settings[key] : parseFloat(that.element.getAttribute(key) || 0),\n          to: value\n        };\n      }\n    }\n    renderer.animateElement(that, animationParams, extend(extend({}, renderer._animation), options));\n  } else {\n    options.step && options.step.call(that, 1, 1);\n    options.complete && options.complete.call(that);\n    that.attr(params);\n  }\n  return that;\n}\nfunction pathAnimate(params, options, complete) {\n  var curSegments = this.segments || [];\n  var newSegments;\n  var endSegments;\n  if (this.renderer.animationEnabled() && \"points\" in params) {\n    newSegments = buildPathSegments(params.points, this.type);\n    endSegments = compensateSegments(curSegments, newSegments, this.type);\n    params.segments = {\n      from: curSegments,\n      to: newSegments,\n      end: endSegments\n    };\n    delete params.points;\n  }\n  return baseAnimate(this, params, options, complete);\n}\nfunction arcAnimate(params, options, complete) {\n  var settings = this._settings;\n  var arcParams = {\n    from: {},\n    to: {}\n  };\n  if (this.renderer.animationEnabled() && (\"x\" in params || \"y\" in params || \"innerRadius\" in params || \"outerRadius\" in params || \"startAngle\" in params || \"endAngle\" in params)) {\n    arcParams.from.x = settings.x || 0;\n    arcParams.from.y = settings.y || 0;\n    arcParams.from.innerRadius = settings.innerRadius || 0;\n    arcParams.from.outerRadius = settings.outerRadius || 0;\n    arcParams.from.startAngle = settings.startAngle || 0;\n    arcParams.from.endAngle = settings.endAngle || 0;\n    arcParams.to.x = \"x\" in params ? params.x : settings.x;\n    delete params.x;\n    arcParams.to.y = \"y\" in params ? params.y : settings.y;\n    delete params.y;\n    arcParams.to.innerRadius = \"innerRadius\" in params ? params.innerRadius : settings.innerRadius;\n    delete params.innerRadius;\n    arcParams.to.outerRadius = \"outerRadius\" in params ? params.outerRadius : settings.outerRadius;\n    delete params.outerRadius;\n    arcParams.to.startAngle = \"startAngle\" in params ? params.startAngle : settings.startAngle;\n    delete params.startAngle;\n    arcParams.to.endAngle = \"endAngle\" in params ? params.endAngle : settings.endAngle;\n    delete params.endAngle;\n    params.arc = arcParams;\n  }\n  return baseAnimate(this, params, options, complete);\n}\nfunction buildLink(target, parameters) {\n  var obj = {\n    is: false,\n    name: parameters.name || parameters,\n    after: parameters.after\n  };\n  if (target) {\n    obj.to = target;\n  } else {\n    obj.virtual = true;\n  }\n  return obj;\n}\nexport var SvgElement = function (renderer, tagName, type) {\n  this.renderer = renderer;\n  this.element = createElement(tagName);\n  this._settings = {};\n  this._styles = {};\n  if (\"path\" === tagName) {\n    this.type = type || \"line\";\n  }\n};\nfunction removeFuncIriCallback(callback) {\n  fixFuncIriCallbacks.remove(callback);\n}\nSvgElement.prototype = {\n  constructor: SvgElement,\n  _getJQElement: function () {\n    return this._$element || (this._$element = $(this.element));\n  },\n  _addFixIRICallback: function () {\n    var that = this;\n    var fn = function () {\n      fixFuncIri(that, \"fill\");\n      fixFuncIri(that, \"clip-path\");\n      fixFuncIri(that, \"filter\");\n    };\n    that.element._fixFuncIri = fn;\n    fn.renderer = that.renderer;\n    fixFuncIriCallbacks.add(fn);\n    that._addFixIRICallback = function () {};\n  },\n  _clearChildrenFuncIri: function () {\n    !function clearChildren(element) {\n      var i;\n      for (i = 0; i < element.childNodes.length; i++) {\n        removeFuncIriCallback(element.childNodes[i]._fixFuncIri);\n        clearChildren(element.childNodes[i]);\n      }\n    }(this.element);\n  },\n  dispose: function () {\n    removeFuncIriCallback(this.element._fixFuncIri);\n    this._clearChildrenFuncIri();\n    this._getJQElement().remove();\n    return this;\n  },\n  append: function (parent) {\n    (parent || this.renderer.root).element.appendChild(this.element);\n    return this;\n  },\n  remove: function () {\n    var element = this.element;\n    element.parentNode && element.parentNode.removeChild(element);\n    return this;\n  },\n  enableLinks: function () {\n    this._links = [];\n    return this;\n  },\n  virtualLink: function (parameters) {\n    linkItem({\n      _link: buildLink(null, parameters)\n    }, this);\n    return this;\n  },\n  linkAfter: function (name) {\n    this._linkAfter = name;\n    return this;\n  },\n  linkOn: function (target, parameters) {\n    this._link = buildLink(target, parameters);\n    linkItem(this, target);\n    return this;\n  },\n  linkOff: function () {\n    unlinkItem(this);\n    this._link = null;\n    return this;\n  },\n  linkAppend: function () {\n    var link = this._link;\n    var items = link.to._links;\n    var i;\n    var next;\n    for (i = link.i + 1; (next = items[i]) && !next._link.is; ++i) {}\n    this._insert(link.to, next);\n    link.is = true;\n    return this;\n  },\n  _insert: function (parent, next) {\n    parent.element.insertBefore(this.element, next ? next.element : null);\n  },\n  linkRemove: function () {\n    this.remove();\n    this._link.is = false;\n    return this;\n  },\n  clear: function () {\n    this._clearChildrenFuncIri();\n    this._getJQElement().empty();\n    return this;\n  },\n  toBackground: function () {\n    var elem = this.element;\n    var parent = elem.parentNode;\n    parent && parent.insertBefore(elem, parent.firstChild);\n    return this;\n  },\n  toForeground: function () {\n    var elem = this.element;\n    var parent = elem.parentNode;\n    parent && parent.appendChild(elem);\n    return this;\n  },\n  attr: function (attrs) {\n    return baseAttr(this, attrs);\n  },\n  smartAttr: function (attrs) {\n    return this.attr(processHatchingAttrs(this, attrs));\n  },\n  css: function (styles) {\n    return baseCss(this, styles);\n  },\n  animate: function (params, options, complete) {\n    return baseAnimate(this, params, options, complete);\n  },\n  sharp(pos, sharpDirection) {\n    return this.attr({\n      sharp: pos || true,\n      sharpDirection: sharpDirection\n    });\n  },\n  _applyTransformation() {\n    var tr = this._settings;\n    var rotateX;\n    var rotateY;\n    var transformations = [];\n    var sharpMode = tr.sharp;\n    var trDirection = tr.sharpDirection || 1;\n    var strokeOdd = tr[KEY_STROKE_WIDTH] % 2;\n    var correctionX = strokeOdd && (\"h\" === sharpMode || true === sharpMode) ? SHARPING_CORRECTION * trDirection : 0;\n    var correctionY = strokeOdd && (\"v\" === sharpMode || true === sharpMode) ? SHARPING_CORRECTION * trDirection : 0;\n    transformations.push(\"translate(\" + ((tr.translateX || 0) + correctionX) + \",\" + ((tr.translateY || 0) + correctionY) + \")\");\n    if (tr.rotate) {\n      if (\"rotateX\" in tr) {\n        rotateX = tr.rotateX;\n      } else {\n        rotateX = tr.x;\n      }\n      if (\"rotateY\" in tr) {\n        rotateY = tr.rotateY;\n      } else {\n        rotateY = tr.y;\n      }\n      transformations.push(\"rotate(\" + tr.rotate + \",\" + (rotateX || 0) + \",\" + (rotateY || 0) + \")\");\n    }\n    var scaleXDefined = isDefined(tr.scaleX);\n    var scaleYDefined = isDefined(tr.scaleY);\n    if (scaleXDefined || scaleYDefined) {\n      transformations.push(\"scale(\" + (scaleXDefined ? tr.scaleX : 1) + \",\" + (scaleYDefined ? tr.scaleY : 1) + \")\");\n    }\n    if (transformations.length) {\n      this.element.setAttribute(\"transform\", transformations.join(\" \"));\n    }\n  },\n  move: function (x, y, animate, animOptions) {\n    var obj = {};\n    isDefined(x) && (obj.translateX = x);\n    isDefined(y) && (obj.translateY = y);\n    if (!animate) {\n      this.attr(obj);\n    } else {\n      this.animate(obj, animOptions);\n    }\n    return this;\n  },\n  rotate: function (angle, x, y, animate, animOptions) {\n    var obj = {\n      rotate: angle || 0\n    };\n    isDefined(x) && (obj.rotateX = x);\n    isDefined(y) && (obj.rotateY = y);\n    if (!animate) {\n      this.attr(obj);\n    } else {\n      this.animate(obj, animOptions);\n    }\n    return this;\n  },\n  _getElementBBox: function () {\n    var elem = this.element;\n    var bBox;\n    try {\n      bBox = elem.getBBox && elem.getBBox();\n    } catch (e) {}\n    return bBox || {\n      x: 0,\n      y: 0,\n      width: elem.offsetWidth || 0,\n      height: elem.offsetHeight || 0\n    };\n  },\n  getBBox: function () {\n    var transformation = this._settings;\n    var bBox = this._getElementBBox();\n    if (transformation.rotate) {\n      bBox = rotateBBox(bBox, [(\"rotateX\" in transformation ? transformation.rotateX : transformation.x) || 0, (\"rotateY\" in transformation ? transformation.rotateY : transformation.y) || 0], -transformation.rotate);\n    } else {\n      bBox = normalizeBBox(bBox);\n    }\n    return bBox;\n  },\n  markup: function () {\n    return getSvgMarkup(this.element);\n  },\n  getOffset: function () {\n    return this._getJQElement().offset();\n  },\n  stopAnimation: function (disableComplete) {\n    var animation = this.animation;\n    animation && animation.stop(disableComplete);\n    return this;\n  },\n  setTitle: function (text) {\n    var titleElem = createElement(\"title\");\n    titleElem.textContent = text || \"\";\n    this.element.appendChild(titleElem);\n  },\n  removeTitle() {\n    detachTitleElements(this.element);\n  },\n  data: function (obj, val) {\n    var elem = this.element;\n    var key;\n    if (void 0 !== val) {\n      elem[obj] = val;\n    } else {\n      for (key in obj) {\n        elem[key] = obj[key];\n      }\n    }\n    return this;\n  },\n  on: function () {\n    var args = [this._getJQElement()];\n    args.push.apply(args, arguments);\n    eventsEngine.on.apply(eventsEngine, args);\n    return this;\n  },\n  off: function () {\n    var args = [this._getJQElement()];\n    args.push.apply(args, arguments);\n    eventsEngine.off.apply(eventsEngine, args);\n    return this;\n  },\n  trigger: function () {\n    var args = [this._getJQElement()];\n    args.push.apply(args, arguments);\n    eventsEngine.trigger.apply(eventsEngine, args);\n    return this;\n  }\n};\nexport var PathSvgElement = function (renderer, type) {\n  SvgElement.call(this, renderer, \"path\", type);\n};\nPathSvgElement.prototype = objectCreate(SvgElement.prototype);\nextend(PathSvgElement.prototype, {\n  constructor: PathSvgElement,\n  attr: pathAttr,\n  animate: pathAnimate\n});\nexport var ArcSvgElement = function (renderer) {\n  SvgElement.call(this, renderer, \"path\", \"arc\");\n};\nArcSvgElement.prototype = objectCreate(SvgElement.prototype);\nextend(ArcSvgElement.prototype, {\n  constructor: ArcSvgElement,\n  attr: arcAttr,\n  animate: arcAnimate\n});\nexport var RectSvgElement = function (renderer) {\n  SvgElement.call(this, renderer, \"rect\");\n};\nRectSvgElement.prototype = objectCreate(SvgElement.prototype);\nextend(RectSvgElement.prototype, {\n  constructor: RectSvgElement,\n  attr: rectAttr\n});\nexport var TextSvgElement = function (renderer) {\n  SvgElement.call(this, renderer, \"text\");\n  this.css({\n    \"white-space\": \"pre\"\n  });\n};\nTextSvgElement.prototype = objectCreate(SvgElement.prototype);\nextend(TextSvgElement.prototype, {\n  constructor: TextSvgElement,\n  attr: textAttr,\n  css: textCss,\n  applyEllipsis: applyEllipsis,\n  setMaxSize: setMaxSize,\n  restoreText: restoreText,\n  _getLineHeight() {\n    return !isNaN(parseFloat(this._styles[KEY_FONT_SIZE])) ? this._styles[KEY_FONT_SIZE] : DEFAULT_FONT_SIZE;\n  }\n});\nfunction updateIndexes(items, k) {\n  var i;\n  var item;\n  for (i = k; item = items[i]; ++i) {\n    item._link.i = i;\n  }\n}\nfunction linkItem(target, container) {\n  var items = container._links;\n  var key = target._link.after = target._link.after || container._linkAfter;\n  var i;\n  var item;\n  if (key) {\n    for (i = 0; (item = items[i]) && item._link.name !== key; ++i) {}\n    if (item) {\n      for (++i; (item = items[i]) && item._link.after === key; ++i) {}\n    }\n  } else {\n    i = items.length;\n  }\n  items.splice(i, 0, target);\n  updateIndexes(items, i);\n}\nfunction unlinkItem(target) {\n  var i;\n  var items = target._link.to._links;\n  for (i = 0; items[i] !== target; ++i) {}\n  items.splice(i, 1);\n  updateIndexes(items, i);\n}\nexport function Renderer(options) {\n  this.root = this._createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    fill: NONE,\n    stroke: NONE,\n    \"stroke-width\": 0\n  }).attr({\n    class: options.cssClass\n  }).css({\n    \"line-height\": \"normal\",\n    \"-ms-user-select\": NONE,\n    \"-moz-user-select\": NONE,\n    \"-webkit-user-select\": NONE,\n    \"-webkit-tap-highlight-color\": \"rgba(0, 0, 0, 0)\",\n    display: \"block\",\n    overflow: \"hidden\"\n  });\n  this._init();\n  this.pathModified = !!options.pathModified;\n  this._$container = $(options.container);\n  this.root.append({\n    element: options.container\n  });\n  this.fixPlacement();\n  this._locker = 0;\n  this._backed = false;\n}\nRenderer.prototype = {\n  constructor: Renderer,\n  _init: function () {\n    this._defs = this._createElement(\"defs\").append(this.root);\n    this._animationController = new AnimationController(this.root.element);\n    this._animation = {\n      enabled: true,\n      duration: 1e3,\n      easing: \"easeOutCubic\"\n    };\n  },\n  fixPlacement: function () {\n    if (!browser.mozilla) {\n      return;\n    }\n    var box = getBoundingClientRect(this._$container.get(0));\n    var dx = roundValue(box.left % 1, 2);\n    var dy = roundValue(box.top % 1, 2);\n    if (browser.mozilla) {\n      this.root.move(-dx, -dy);\n    }\n  },\n  removePlacementFix: function () {\n    if (!browser.mozilla) {\n      return;\n    }\n    if (browser.mozilla) {\n      this.root.attr({\n        transform: null\n      });\n    }\n  },\n  setOptions: function (options) {\n    this.rtl = !!options.rtl;\n    this.encodeHtml = !!options.encodeHtml;\n    this.updateAnimationOptions(options.animation || {});\n    this.root.attr({\n      direction: this.rtl ? \"rtl\" : \"ltr\"\n    });\n    return this;\n  },\n  _createElement: function (tagName, attr, type) {\n    var elem = new SvgElement(this, tagName, type);\n    attr && elem.attr(attr);\n    return elem;\n  },\n  lock: function () {\n    if (0 === this._locker) {\n      this._backed = !this._$container.is(\":visible\");\n      if (this._backed) {\n        backupRoot(this.root);\n      }\n    }\n    ++this._locker;\n    return this;\n  },\n  unlock: function () {\n    --this._locker;\n    if (0 === this._locker) {\n      if (this._backed) {\n        restoreRoot(this.root, this._$container[0]);\n        this.fixPlacement();\n      }\n      this._backed = false;\n    }\n    return this;\n  },\n  resize: function (width, height) {\n    if (width >= 0 && height >= 0) {\n      this.root.attr({\n        width: width,\n        height: height\n      });\n    }\n    return this;\n  },\n  dispose: function () {\n    var key;\n    this.root.dispose();\n    this._defs.dispose();\n    this._animationController.dispose();\n    fixFuncIriCallbacks.removeByRenderer(this);\n    for (key in this) {\n      this[key] = null;\n    }\n    return this;\n  },\n  animationEnabled: function () {\n    return !!this._animation.enabled;\n  },\n  updateAnimationOptions: function (newOptions) {\n    extend(this._animation, newOptions);\n    return this;\n  },\n  stopAllAnimations: function (lock) {\n    this._animationController[lock ? \"lock\" : \"stop\"]();\n    return this;\n  },\n  animateElement: function (element, params, options) {\n    this._animationController.animateElement(element, params, options);\n    return this;\n  },\n  svg: function () {\n    this.removePlacementFix();\n    var markup = this.root.markup();\n    this.fixPlacement();\n    return markup;\n  },\n  getRootOffset: function () {\n    return this.root.getOffset();\n  },\n  onEndAnimation: function (endAnimation) {\n    this._animationController.onEndAnimation(endAnimation);\n  },\n  rect: function (x, y, width, height) {\n    var elem = new RectSvgElement(this);\n    return elem.attr({\n      x: x || 0,\n      y: y || 0,\n      width: width || 0,\n      height: height || 0\n    });\n  },\n  simpleRect: function () {\n    return this._createElement(\"rect\");\n  },\n  circle: function (x, y, r) {\n    return this._createElement(\"circle\", {\n      cx: x || 0,\n      cy: y || 0,\n      r: r || 0\n    });\n  },\n  g: function () {\n    return this._createElement(\"g\");\n  },\n  image: function (x, y, w, h, href, location) {\n    var image = this._createElement(\"image\", {\n      x: x || 0,\n      y: y || 0,\n      width: w || 0,\n      height: h || 0,\n      preserveAspectRatio: preserveAspectRatioMap[normalizeEnum(location)] || NONE\n    });\n    image.element.setAttributeNS(\"http://www.w3.org/1999/xlink\", \"href\", href || \"\");\n    return image;\n  },\n  path: function (points, type) {\n    var elem = new PathSvgElement(this, type);\n    return elem.attr({\n      points: points || []\n    });\n  },\n  arc: function (x, y, innerRadius, outerRadius, startAngle, endAngle) {\n    var elem = new ArcSvgElement(this);\n    return elem.attr({\n      x: x || 0,\n      y: y || 0,\n      innerRadius: innerRadius || 0,\n      outerRadius: outerRadius || 0,\n      startAngle: startAngle || 0,\n      endAngle: endAngle || 0\n    });\n  },\n  text: function (_text, x, y) {\n    var elem = new TextSvgElement(this);\n    return elem.attr({\n      text: _text,\n      x: x || 0,\n      y: y || 0\n    });\n  },\n  linearGradient: function (stops) {\n    var id = getNextDefsSvgId();\n    var that = this;\n    var gradient = that._createElement(\"linearGradient\", {\n      id: id\n    }).append(that._defs);\n    gradient.id = id;\n    stops.forEach(stop => {\n      that._createElement(\"stop\", {\n        offset: stop.offset,\n        \"stop-color\": stop[\"stop-color\"]\n      }).append(gradient);\n    });\n    return gradient;\n  },\n  pattern: function (color, hatching, _id) {\n    hatching = hatching || {};\n    var step = hatching.step || 6;\n    var stepTo2 = step / 2;\n    var stepBy15 = 1.5 * step;\n    var id = _id || getNextDefsSvgId();\n    var d = \"right\" === normalizeEnum(hatching.direction) ? \"M \" + stepTo2 + \" \" + -stepTo2 + \" L \" + -stepTo2 + \" \" + stepTo2 + \" M 0 \" + step + \" L \" + step + \" 0 M \" + stepBy15 + \" \" + stepTo2 + \" L \" + stepTo2 + \" \" + stepBy15 : \"M 0 0 L \" + step + \" \" + step + \" M \" + -stepTo2 + \" \" + stepTo2 + \" L \" + stepTo2 + \" \" + stepBy15 + \" M \" + stepTo2 + \" \" + -stepTo2 + \" L \" + stepBy15 + \" \" + stepTo2;\n    var pattern = this._createElement(\"pattern\", {\n      id: id,\n      width: step,\n      height: step,\n      patternUnits: \"userSpaceOnUse\"\n    }).append(this._defs);\n    pattern.id = id;\n    this.rect(0, 0, step, step).attr({\n      fill: color,\n      opacity: hatching.opacity\n    }).append(pattern);\n    new PathSvgElement(this).attr({\n      d: d,\n      \"stroke-width\": hatching.width || 1,\n      stroke: color\n    }).append(pattern);\n    return pattern;\n  },\n  _getPointsWithYOffset: function (points, offset) {\n    return points.map(function (point, index) {\n      if (index % 2 !== 0) {\n        return point + offset;\n      }\n      return point;\n    });\n  },\n  clipShape: function (method, methodArgs) {\n    var id = getNextDefsSvgId();\n    var clipPath = this._createElement(\"clipPath\", {\n      id: id\n    }).append(this._defs);\n    var shape = method.apply(this, methodArgs).append(clipPath);\n    shape.id = id;\n    shape.remove = function () {\n      throw \"Not implemented\";\n    };\n    shape.dispose = function () {\n      clipPath.dispose();\n      clipPath = null;\n      return this;\n    };\n    return shape;\n  },\n  clipRect(x, y, width, height) {\n    return this.clipShape(this.rect, arguments);\n  },\n  clipCircle(x, y, radius) {\n    return this.clipShape(this.circle, arguments);\n  },\n  shadowFilter: function (x, y, width, height, offsetX, offsetY, blur, color, opacity) {\n    var id = getNextDefsSvgId();\n    var filter = this._createElement(\"filter\", {\n      id: id,\n      x: x || 0,\n      y: y || 0,\n      width: width || 0,\n      height: height || 0\n    }).append(this._defs);\n    var gaussianBlur = this._createElement(\"feGaussianBlur\", {\n      in: \"SourceGraphic\",\n      result: \"gaussianBlurResult\",\n      stdDeviation: blur || 0\n    }).append(filter);\n    var offset = this._createElement(\"feOffset\", {\n      in: \"gaussianBlurResult\",\n      result: \"offsetResult\",\n      dx: offsetX || 0,\n      dy: offsetY || 0\n    }).append(filter);\n    var flood = this._createElement(\"feFlood\", {\n      result: \"floodResult\",\n      \"flood-color\": color || \"\",\n      \"flood-opacity\": opacity\n    }).append(filter);\n    var composite = this._createElement(\"feComposite\", {\n      in: \"floodResult\",\n      in2: \"offsetResult\",\n      operator: \"in\",\n      result: \"compositeResult\"\n    }).append(filter);\n    var finalComposite = this._createElement(\"feComposite\", {\n      in: \"SourceGraphic\",\n      in2: \"compositeResult\",\n      operator: \"over\"\n    }).append(filter);\n    filter.id = id;\n    filter.gaussianBlur = gaussianBlur;\n    filter.offset = offset;\n    filter.flood = flood;\n    filter.composite = composite;\n    filter.finalComposite = finalComposite;\n    filter.attr = function (attrs) {\n      var filterAttrs = {};\n      var offsetAttrs = {};\n      var floodAttrs = {};\n      \"x\" in attrs && (filterAttrs.x = attrs.x);\n      \"y\" in attrs && (filterAttrs.y = attrs.y);\n      \"width\" in attrs && (filterAttrs.width = attrs.width);\n      \"height\" in attrs && (filterAttrs.height = attrs.height);\n      baseAttr(this, filterAttrs);\n      \"blur\" in attrs && this.gaussianBlur.attr({\n        stdDeviation: attrs.blur\n      });\n      \"offsetX\" in attrs && (offsetAttrs.dx = attrs.offsetX);\n      \"offsetY\" in attrs && (offsetAttrs.dy = attrs.offsetY);\n      this.offset.attr(offsetAttrs);\n      \"color\" in attrs && (floodAttrs[\"flood-color\"] = attrs.color);\n      \"opacity\" in attrs && (floodAttrs[\"flood-opacity\"] = attrs.opacity);\n      this.flood.attr(floodAttrs);\n      return this;\n    };\n    return filter;\n  },\n  brightFilter: function (type, slope) {\n    var id = getNextDefsSvgId();\n    var filter = this._createElement(\"filter\", {\n      id: id\n    }).append(this._defs);\n    var componentTransferElement = this._createElement(\"feComponentTransfer\").append(filter);\n    var attrs = {\n      type: type,\n      slope: slope\n    };\n    filter.id = id;\n    this._createElement(\"feFuncR\", attrs).append(componentTransferElement);\n    this._createElement(\"feFuncG\", attrs).append(componentTransferElement);\n    this._createElement(\"feFuncB\", attrs).append(componentTransferElement);\n    return filter;\n  },\n  getGrayScaleFilter: function () {\n    if (this._grayScaleFilter) {\n      return this._grayScaleFilter;\n    }\n    var id = getNextDefsSvgId();\n    var filter = this._createElement(\"filter\", {\n      id: id\n    }).append(this._defs);\n    this._createElement(\"feColorMatrix\").attr({\n      type: \"matrix\",\n      values: \"0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 0.6 0\"\n    }).append(filter);\n    filter.id = id;\n    this._grayScaleFilter = filter;\n    return filter;\n  },\n  initHatching: function () {\n    var storage = this._hatchingStorage = this._hatchingStorage || {\n      byHash: {},\n      baseId: getNextDefsSvgId()\n    };\n    var byHash = storage.byHash;\n    var name;\n    for (name in byHash) {\n      byHash[name].pattern.dispose();\n    }\n    storage.byHash = {};\n    storage.refToHash = {};\n    storage.nextId = 0;\n  },\n  lockHatching: function (color, hatching, ref) {\n    var storage = this._hatchingStorage;\n    var hash = getHatchingHash(color, hatching);\n    var storageItem;\n    var pattern;\n    if (storage.refToHash[ref] !== hash) {\n      if (ref) {\n        this.releaseHatching(ref);\n      }\n      storageItem = storage.byHash[hash];\n      if (!storageItem) {\n        pattern = this.pattern(color, hatching, storage.baseId + \"-hatching-\" + storage.nextId++);\n        storageItem = storage.byHash[hash] = {\n          pattern: pattern,\n          count: 0\n        };\n        storage.refToHash[pattern.id] = hash;\n      }\n      ++storageItem.count;\n      ref = storageItem.pattern.id;\n    }\n    return ref;\n  },\n  releaseHatching: function (ref) {\n    var storage = this._hatchingStorage;\n    var hash = storage.refToHash[ref];\n    var storageItem = storage.byHash[hash];\n    if (storageItem && 0 === --storageItem.count) {\n      storageItem.pattern.dispose();\n      delete storage.byHash[hash];\n      delete storage.refToHash[ref];\n    }\n  }\n};\nfunction getHatchingHash(color, hatching) {\n  return \"@\" + color + \"::\" + hatching.step + \":\" + hatching.width + \":\" + hatching.opacity + \":\" + hatching.direction;\n}\nvar fixFuncIriCallbacks = function () {\n  var callbacks = [];\n  return {\n    add: function (fn) {\n      callbacks.push(fn);\n    },\n    remove: function (fn) {\n      callbacks = callbacks.filter(function (el) {\n        return el !== fn;\n      });\n    },\n    removeByRenderer: function (renderer) {\n      callbacks = callbacks.filter(function (el) {\n        return el.renderer !== renderer;\n      });\n    },\n    fire: function () {\n      callbacks.forEach(function (fn) {\n        fn();\n      });\n    }\n  };\n}();\nexport var refreshPaths = function () {\n  fixFuncIriCallbacks.fire();\n};","map":{"version":3,"names":["$","domAdapter","getWindow","callOnce","eventsEngine","browser","getSvgMarkup","AnimationController","normalizeBBox","rotateBBox","normalizeEnum","isDefined","window","max","min","floor","round","sin","cos","abs","PI","Math","PI_DIV_180","SHARPING_CORRECTION","ARC_COORD_PREC","pxAddingExceptions","opacity","order","orphans","widows","zoom","KEY_TEXT","KEY_STROKE","KEY_STROKE_WIDTH","KEY_STROKE_OPACITY","KEY_FONT_SIZE","KEY_FONT_STYLE","KEY_FONT_WEIGHT","KEY_TEXT_DECORATION","KEY_TEXTS_ALIGNMENT","NONE","DEFAULT_FONT_SIZE","ELLIPSIS","objectCreate","Object","create","proto","F","prototype","DEFAULTS","scaleX","scaleY","getBackup","backupContainer","createElement","style","left","position","backupCounter","backupRoot","root","getBody","appendChild","append","element","restoreRoot","container","removeChild","getNextDefsSvgId","numDefsSvgElements","isObjectArgument","value","tagName","createElementNS","getFuncIri","id","pathModified","location","href","split","extend","target","source","key","roundValue","exp","toString","getBoundingClientRect","box","e","top","preserveAspectRatioMap","full","lefttop","leftcenter","leftbottom","centertop","center","centerbottom","righttop","rightcenter","rightbottom","processHatchingAttrs","attrs","hatching","direction","fill","_hatching","renderer","lockHatching","releaseHatching","normalizeArcParams","x","y","innerR","outerR","startAngle","endAngle","isCircle","noArc","angleDiff","buildArcPath","startAngleCos","startAngleSin","endAngleCos","endAngleSin","longFlag","toFixed","join","buildPathSegments","points","type","list","buildLineSegments","buildCurveSegments","close","buildSegments","buildSimpleLineSegment","buildSimpleCurveSegment","buildSimpleSegment","_points$","i","ii","length","k0","k","push","combinePathParam","segments","d","segment","j","jj","compensateSegments","oldSegments","newSegments","oldLength","newLength","originalNewSegments","makeEqualSegments","indexOf","makeEqualAreaSegments","makeEqualLineSegments","slice","prepareConstSegment","constSeg","short","long","head","shortLength","longLength","constsSeg1","constsSeg2","splice","baseCss","that","styles","elemStyles","_styles","fixFuncIri","wrapper","attribute","attr","removeAttribute","setAttribute","baseAttr","settings","_settings","attributes","elem","rtl","hasTransformations","recalculateDashStyle","sw","right","_addFixIRICallback","test","dashStyle","_originalSW","replace","parseInt","_applyTransformation","pathAttr","arcAttr","innerRadius","outerRadius","apply","rectAttr","width","height","maxSW","newSW","_originalX","_originalY","_originalWidth","_originalHeight","sharp","textAttr","isResetRequired","wasStroked","alignTextNodes","isStroked","createTextNodes","text","_hasEllipsis","locateTextNodes","strokeTextNodes","textCss","orderHtmlTree","line","node","parentStyle","parentClassName","realStyle","nodes","wholeText","className","isElementNode","color","fontSize","fontStyle","fontWeight","textDecoration","childNodes","adjustLineHeights","items","currentItem","item","maxLengthFontSize","inherits","parseFloat","NaN","removeExtraAttrs","html","findStyleAndClassAttrs","allTagAttrs","p1","p2","p3","match","map","str","parseHTML","div","innerHTML","parseMultiline","texts","trim","createTspans","fieldName","createTextNode","restoreText","applyEllipsis","maxWidth","lines","hasEllipsis","lineParts","call","ellipsis","ellipsisWidth","getBBox","_getElementBBox","prepareLines","_texts","parts","commonLength","endIndex","setNewText","startBox","removeTextSpan","remove","cloneAndRemoveAttrs","clone","cloneNode","detachTitleElements","titleElements","querySelectorAll","detachAndStoreTitleElements","setMaxSize","maxHeight","options","arguments","textChanged","textIsEmpty","ellipsisMaxWidth","restoreTitleElement","applyOverflowRules","setMaxHeight","_getLineHeight","reduce","concat","filter","t","stroke","tspan","parentNode","textContent","rowCount","getIndexForEllipsis","endBox","kk","getSubStringLength","getTextWidth","getSpaceBreakIndex","initialIndices","spaceIndices","indices","char","index","spaceIndex","getWordBreakIndex","getEllipsisString","_ref","hideOverflowEllipsis","setEllipsis","wordWrap","lastStepBreakIndex","breakIndex","restLines","restText","isFinite","newTextOffset","restString","restTspan","textOverflow","calculateLineHeight","lineHeight","getItemLineHeight","Number","result","_ref2","l","arr","commonHeight","forEach","prevLine","textValue","_ref3","stop","lineNumber","wordWrapLines","insertString","newText","substr","parsedHtml","clear","encodeHtml","setTextNodeAttribute","name","defaultValue","alignment","maxTextWidth","textWidth","fontSize1","fontSize2","parsedHeight1","parsedHeight2","height1","height2","isNaN","strokeWidth","strokeOpacity","baseAnimate","params","complete","animationParams","defaults","translateX","translateY","rotate","rotateX","rotateY","animationEnabled","transform","from","to","getAttribute","animateElement","_animation","step","pathAnimate","curSegments","endSegments","end","arcAnimate","arcParams","arc","buildLink","parameters","obj","is","after","virtual","SvgElement","removeFuncIriCallback","callback","fixFuncIriCallbacks","constructor","_getJQElement","_$element","fn","_fixFuncIri","add","_clearChildrenFuncIri","clearChildren","dispose","parent","enableLinks","_links","virtualLink","linkItem","_link","linkAfter","_linkAfter","linkOn","linkOff","unlinkItem","linkAppend","link","next","_insert","insertBefore","linkRemove","empty","toBackground","firstChild","toForeground","smartAttr","css","animate","pos","sharpDirection","tr","transformations","sharpMode","trDirection","strokeOdd","correctionX","correctionY","scaleXDefined","scaleYDefined","move","animOptions","angle","bBox","offsetWidth","offsetHeight","transformation","markup","getOffset","offset","stopAnimation","disableComplete","animation","setTitle","titleElem","removeTitle","data","val","on","args","off","trigger","PathSvgElement","ArcSvgElement","RectSvgElement","TextSvgElement","updateIndexes","Renderer","_createElement","xmlns","version","class","cssClass","display","overflow","_init","_$container","fixPlacement","_locker","_backed","_defs","_animationController","enabled","duration","easing","mozilla","get","dx","dy","removePlacementFix","setOptions","updateAnimationOptions","lock","unlock","resize","removeByRenderer","newOptions","stopAllAnimations","svg","getRootOffset","onEndAnimation","endAnimation","rect","simpleRect","circle","r","cx","cy","g","image","w","h","preserveAspectRatio","setAttributeNS","path","_text","linearGradient","stops","gradient","pattern","_id","stepTo2","stepBy15","patternUnits","_getPointsWithYOffset","point","clipShape","method","methodArgs","clipPath","shape","clipRect","clipCircle","radius","shadowFilter","offsetX","offsetY","blur","gaussianBlur","in","stdDeviation","flood","composite","in2","operator","finalComposite","filterAttrs","offsetAttrs","floodAttrs","brightFilter","slope","componentTransferElement","getGrayScaleFilter","_grayScaleFilter","values","initHatching","storage","_hatchingStorage","byHash","baseId","refToHash","nextId","ref","hash","getHatchingHash","storageItem","count","callbacks","el","fire","refreshPaths"],"sources":["C:/Users/User/vue-chart/node_modules/devextreme/esm/viz/core/renderers/renderer.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/viz/core/renderers/renderer.js)\r\n * Version: 22.1.6\r\n * Build date: Tue Oct 18 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../../../core/renderer\";\r\nimport domAdapter from \"../../../core/dom_adapter\";\r\nimport {\r\n    getWindow\r\n} from \"../../../core/utils/window\";\r\nimport callOnce from \"../../../core/utils/call_once\";\r\nimport eventsEngine from \"../../../events/core/events_engine\";\r\nimport browser from \"../../../core/utils/browser\";\r\nimport {\r\n    getSvgMarkup\r\n} from \"../../../core/utils/svg\";\r\nimport {\r\n    AnimationController\r\n} from \"./animation\";\r\nimport {\r\n    normalizeBBox,\r\n    rotateBBox,\r\n    normalizeEnum\r\n} from \"../utils\";\r\nimport {\r\n    isDefined\r\n} from \"../../../core/utils/type\";\r\nvar window = getWindow();\r\nvar {\r\n    max: max,\r\n    min: min,\r\n    floor: floor,\r\n    round: round,\r\n    sin: sin,\r\n    cos: cos,\r\n    abs: abs,\r\n    PI: PI\r\n} = Math;\r\nvar PI_DIV_180 = PI / 180;\r\nvar SHARPING_CORRECTION = .5;\r\nvar ARC_COORD_PREC = 5;\r\nvar pxAddingExceptions = {\r\n    \"column-count\": true,\r\n    \"fill-opacity\": true,\r\n    \"flex-grow\": true,\r\n    \"flex-shrink\": true,\r\n    \"font-weight\": true,\r\n    \"line-height\": true,\r\n    opacity: true,\r\n    order: true,\r\n    orphans: true,\r\n    widows: true,\r\n    \"z-index\": true,\r\n    zoom: true\r\n};\r\nvar KEY_TEXT = \"text\";\r\nvar KEY_STROKE = \"stroke\";\r\nvar KEY_STROKE_WIDTH = \"stroke-width\";\r\nvar KEY_STROKE_OPACITY = \"stroke-opacity\";\r\nvar KEY_FONT_SIZE = \"font-size\";\r\nvar KEY_FONT_STYLE = \"font-style\";\r\nvar KEY_FONT_WEIGHT = \"font-weight\";\r\nvar KEY_TEXT_DECORATION = \"text-decoration\";\r\nvar KEY_TEXTS_ALIGNMENT = \"textsAlignment\";\r\nvar NONE = \"none\";\r\nvar DEFAULT_FONT_SIZE = 12;\r\nvar ELLIPSIS = \"...\";\r\nvar objectCreate = function() {\r\n    if (!Object.create) {\r\n        return function(proto) {\r\n            var F = function() {};\r\n            F.prototype = proto;\r\n            return new F\r\n        }\r\n    } else {\r\n        return function(proto) {\r\n            return Object.create(proto)\r\n        }\r\n    }\r\n}();\r\nvar DEFAULTS = {\r\n    scaleX: 1,\r\n    scaleY: 1,\r\n    \"pointer-events\": null\r\n};\r\nvar getBackup = callOnce((function() {\r\n    var backupContainer = domAdapter.createElement(\"div\");\r\n    backupContainer.style.left = \"-9999px\";\r\n    backupContainer.style.position = \"absolute\";\r\n    return {\r\n        backupContainer: backupContainer,\r\n        backupCounter: 0\r\n    }\r\n}));\r\n\r\nfunction backupRoot(root) {\r\n    if (0 === getBackup().backupCounter) {\r\n        domAdapter.getBody().appendChild(getBackup().backupContainer)\r\n    }++getBackup().backupCounter;\r\n    root.append({\r\n        element: getBackup().backupContainer\r\n    })\r\n}\r\n\r\nfunction restoreRoot(root, container) {\r\n    root.append({\r\n        element: container\r\n    });\r\n    --getBackup().backupCounter;\r\n    if (0 === getBackup().backupCounter) {\r\n        domAdapter.getBody().removeChild(getBackup().backupContainer)\r\n    }\r\n}\r\nvar getNextDefsSvgId = function() {\r\n    var numDefsSvgElements = 1;\r\n    return function() {\r\n        return \"DevExpress_\" + numDefsSvgElements++\r\n    }\r\n}();\r\n\r\nfunction isObjectArgument(value) {\r\n    return value && \"string\" !== typeof value\r\n}\r\n\r\nfunction createElement(tagName) {\r\n    return domAdapter.createElementNS(\"http://www.w3.org/2000/svg\", tagName)\r\n}\r\nexport function getFuncIri(id, pathModified) {\r\n    return null !== id ? \"url(\" + (pathModified ? window.location.href.split(\"#\")[0] : \"\") + \"#\" + id + \")\" : id\r\n}\r\n\r\nfunction extend(target, source) {\r\n    var key;\r\n    for (key in source) {\r\n        target[key] = source[key]\r\n    }\r\n    return target\r\n}\r\n\r\nfunction roundValue(value, exp) {\r\n    value = value.toString().split(\"e\");\r\n    value = round(+(value[0] + \"e\" + (value[1] ? +value[1] + exp : exp)));\r\n    value = value.toString().split(\"e\");\r\n    return +(value[0] + \"e\" + (value[1] ? +value[1] - exp : -exp))\r\n}\r\n\r\nfunction getBoundingClientRect(element) {\r\n    var box;\r\n    try {\r\n        box = element.getBoundingClientRect()\r\n    } catch (e) {}\r\n    return box || {\r\n        left: 0,\r\n        top: 0\r\n    }\r\n}\r\nvar preserveAspectRatioMap = {\r\n    full: NONE,\r\n    lefttop: \"xMinYMin\",\r\n    leftcenter: \"xMinYMid\",\r\n    leftbottom: \"xMinYMax\",\r\n    centertop: \"xMidYMin\",\r\n    center: \"xMidYMid\",\r\n    centerbottom: \"xMidYMax\",\r\n    righttop: \"xMaxYMin\",\r\n    rightcenter: \"xMaxYMid\",\r\n    rightbottom: \"xMaxYMax\"\r\n};\r\nexport function processHatchingAttrs(element, attrs) {\r\n    if (attrs.hatching && \"none\" !== normalizeEnum(attrs.hatching.direction)) {\r\n        attrs = extend({}, attrs);\r\n        attrs.fill = element._hatching = element.renderer.lockHatching(attrs.fill, attrs.hatching, element._hatching);\r\n        delete attrs.hatching\r\n    } else if (element._hatching) {\r\n        element.renderer.releaseHatching(element._hatching);\r\n        element._hatching = null\r\n    }\r\n    return attrs\r\n}\r\n\r\nfunction normalizeArcParams(x, y, innerR, outerR, startAngle, endAngle) {\r\n    var isCircle;\r\n    var noArc = true;\r\n    var angleDiff = roundValue(endAngle, 3) - roundValue(startAngle, 3);\r\n    if (angleDiff) {\r\n        if (abs(angleDiff) % 360 === 0) {\r\n            startAngle = 0;\r\n            endAngle = 360;\r\n            isCircle = true;\r\n            endAngle -= .01\r\n        }\r\n        if (startAngle > 360) {\r\n            startAngle %= 360\r\n        }\r\n        if (endAngle > 360) {\r\n            endAngle %= 360\r\n        }\r\n        if (startAngle > endAngle) {\r\n            startAngle -= 360\r\n        }\r\n        noArc = false\r\n    }\r\n    startAngle *= PI_DIV_180;\r\n    endAngle *= PI_DIV_180;\r\n    return [x, y, min(outerR, innerR), max(outerR, innerR), cos(startAngle), sin(startAngle), cos(endAngle), sin(endAngle), isCircle, floor(abs(endAngle - startAngle) / PI) % 2 ? \"1\" : \"0\", noArc]\r\n}\r\nvar buildArcPath = function(x, y, innerR, outerR, startAngleCos, startAngleSin, endAngleCos, endAngleSin, isCircle, longFlag) {\r\n    return [\"M\", (x + outerR * startAngleCos).toFixed(ARC_COORD_PREC), (y - outerR * startAngleSin).toFixed(ARC_COORD_PREC), \"A\", outerR.toFixed(ARC_COORD_PREC), outerR.toFixed(ARC_COORD_PREC), 0, longFlag, 0, (x + outerR * endAngleCos).toFixed(ARC_COORD_PREC), (y - outerR * endAngleSin).toFixed(ARC_COORD_PREC), isCircle ? \"M\" : \"L\", (x + innerR * endAngleCos).toFixed(5), (y - innerR * endAngleSin).toFixed(ARC_COORD_PREC), \"A\", innerR.toFixed(ARC_COORD_PREC), innerR.toFixed(ARC_COORD_PREC), 0, longFlag, 1, (x + innerR * startAngleCos).toFixed(ARC_COORD_PREC), (y - innerR * startAngleSin).toFixed(ARC_COORD_PREC), \"Z\"].join(\" \")\r\n};\r\n\r\nfunction buildPathSegments(points, type) {\r\n    var list = [\r\n        [\"M\", 0, 0]\r\n    ];\r\n    switch (type) {\r\n        case \"line\":\r\n            list = buildLineSegments(points);\r\n            break;\r\n        case \"area\":\r\n            list = buildLineSegments(points, true);\r\n            break;\r\n        case \"bezier\":\r\n            list = buildCurveSegments(points);\r\n            break;\r\n        case \"bezierarea\":\r\n            list = buildCurveSegments(points, true)\r\n    }\r\n    return list\r\n}\r\n\r\nfunction buildLineSegments(points, close) {\r\n    return buildSegments(points, buildSimpleLineSegment, close)\r\n}\r\n\r\nfunction buildCurveSegments(points, close) {\r\n    return buildSegments(points, buildSimpleCurveSegment, close)\r\n}\r\n\r\nfunction buildSegments(points, buildSimpleSegment, close) {\r\n    var _points$;\r\n    var i;\r\n    var ii;\r\n    var list = [];\r\n    if (null !== (_points$ = points[0]) && void 0 !== _points$ && _points$.length) {\r\n        for (i = 0, ii = points.length; i < ii; ++i) {\r\n            buildSimpleSegment(points[i], close, list)\r\n        }\r\n    } else {\r\n        buildSimpleSegment(points, close, list)\r\n    }\r\n    return list\r\n}\r\n\r\nfunction buildSimpleLineSegment(points, close, list) {\r\n    var i = 0;\r\n    var k0 = list.length;\r\n    var k = k0;\r\n    var ii = (points || []).length;\r\n    if (ii) {\r\n        if (void 0 !== points[0].x) {\r\n            for (; i < ii;) {\r\n                list[k++] = [\"L\", points[i].x, points[i++].y]\r\n            }\r\n        } else {\r\n            for (; i < ii;) {\r\n                list[k++] = [\"L\", points[i++], points[i++]]\r\n            }\r\n        }\r\n        list[k0][0] = \"M\"\r\n    } else {\r\n        list[k] = [\"M\", 0, 0]\r\n    }\r\n    close && list.push([\"Z\"]);\r\n    return list\r\n}\r\n\r\nfunction buildSimpleCurveSegment(points, close, list) {\r\n    var i;\r\n    var k = list.length;\r\n    var ii = (points || []).length;\r\n    if (ii) {\r\n        if (void 0 !== points[0].x) {\r\n            list[k++] = [\"M\", points[0].x, points[0].y];\r\n            for (i = 1; i < ii;) {\r\n                list[k++] = [\"C\", points[i].x, points[i++].y, points[i].x, points[i++].y, points[i].x, points[i++].y]\r\n            }\r\n        } else {\r\n            list[k++] = [\"M\", points[0], points[1]];\r\n            for (i = 2; i < ii;) {\r\n                list[k++] = [\"C\", points[i++], points[i++], points[i++], points[i++], points[i++], points[i++]]\r\n            }\r\n        }\r\n    } else {\r\n        list[k] = [\"M\", 0, 0]\r\n    }\r\n    close && list.push([\"Z\"]);\r\n    return list\r\n}\r\n\r\nfunction combinePathParam(segments) {\r\n    var d = [];\r\n    var k = 0;\r\n    var i;\r\n    var ii = segments.length;\r\n    var segment;\r\n    var j;\r\n    var jj;\r\n    for (i = 0; i < ii; ++i) {\r\n        segment = segments[i];\r\n        for (j = 0, jj = segment.length; j < jj; ++j) {\r\n            d[k++] = segment[j]\r\n        }\r\n    }\r\n    return d.join(\" \")\r\n}\r\n\r\nfunction compensateSegments(oldSegments, newSegments, type) {\r\n    var oldLength = oldSegments.length;\r\n    var newLength = newSegments.length;\r\n    var i;\r\n    var originalNewSegments;\r\n    var makeEqualSegments = -1 !== type.indexOf(\"area\") ? makeEqualAreaSegments : makeEqualLineSegments;\r\n    if (0 === oldLength) {\r\n        for (i = 0; i < newLength; i++) {\r\n            oldSegments.push(newSegments[i].slice(0))\r\n        }\r\n    } else if (oldLength < newLength) {\r\n        makeEqualSegments(oldSegments, newSegments, type)\r\n    } else if (oldLength > newLength) {\r\n        originalNewSegments = newSegments.slice(0);\r\n        makeEqualSegments(newSegments, oldSegments, type)\r\n    }\r\n    return originalNewSegments\r\n}\r\n\r\nfunction prepareConstSegment(constSeg, type) {\r\n    var x = constSeg[constSeg.length - 2];\r\n    var y = constSeg[constSeg.length - 1];\r\n    switch (type) {\r\n        case \"line\":\r\n        case \"area\":\r\n            constSeg[0] = \"L\";\r\n            break;\r\n        case \"bezier\":\r\n        case \"bezierarea\":\r\n            constSeg[0] = \"C\";\r\n            constSeg[1] = constSeg[3] = constSeg[5] = x;\r\n            constSeg[2] = constSeg[4] = constSeg[6] = y\r\n    }\r\n}\r\n\r\nfunction makeEqualLineSegments(short, long, type) {\r\n    var constSeg = short[short.length - 1].slice();\r\n    var i = short.length;\r\n    prepareConstSegment(constSeg, type);\r\n    for (; i < long.length; i++) {\r\n        short[i] = constSeg.slice(0)\r\n    }\r\n}\r\n\r\nfunction makeEqualAreaSegments(short, long, type) {\r\n    var i;\r\n    var head;\r\n    var shortLength = short.length;\r\n    var longLength = long.length;\r\n    var constsSeg1;\r\n    var constsSeg2;\r\n    if ((shortLength - 1) % 2 === 0 && (longLength - 1) % 2 === 0) {\r\n        i = (shortLength - 1) / 2 - 1;\r\n        head = short.slice(0, i + 1);\r\n        constsSeg1 = head[head.length - 1].slice(0);\r\n        constsSeg2 = short.slice(i + 1)[0].slice(0);\r\n        prepareConstSegment(constsSeg1, type);\r\n        prepareConstSegment(constsSeg2, type);\r\n        for (var j = i; j < (longLength - 1) / 2 - 1; j++) {\r\n            short.splice(j + 1, 0, constsSeg1);\r\n            short.splice(j + 3, 0, constsSeg2)\r\n        }\r\n    }\r\n}\r\n\r\nfunction baseCss(that, styles) {\r\n    var elemStyles = that._styles;\r\n    var key;\r\n    var value;\r\n    styles = styles || {};\r\n    for (key in styles) {\r\n        value = styles[key];\r\n        if (isDefined(value)) {\r\n            value += \"number\" === typeof value && !pxAddingExceptions[key] ? \"px\" : \"\";\r\n            elemStyles[key] = \"\" !== value ? value : null\r\n        }\r\n    }\r\n    for (key in elemStyles) {\r\n        value = elemStyles[key];\r\n        if (value) {\r\n            that.element.style[key] = value\r\n        } else if (null === value) {\r\n            that.element.style[key] = \"\"\r\n        }\r\n    }\r\n    return that\r\n}\r\n\r\nfunction fixFuncIri(wrapper, attribute) {\r\n    var element = wrapper.element;\r\n    var id = wrapper.attr(attribute);\r\n    if (id && -1 !== id.indexOf(\"DevExpress\")) {\r\n        element.removeAttribute(attribute);\r\n        element.setAttribute(attribute, getFuncIri(id, wrapper.renderer.pathModified))\r\n    }\r\n}\r\n\r\nfunction baseAttr(that, attrs) {\r\n    attrs = attrs || {};\r\n    var settings = that._settings;\r\n    var attributes = {};\r\n    var key;\r\n    var value;\r\n    var elem = that.element;\r\n    var renderer = that.renderer;\r\n    var rtl = renderer.rtl;\r\n    var hasTransformations;\r\n    var recalculateDashStyle;\r\n    var sw;\r\n    var i;\r\n    if (!isObjectArgument(attrs)) {\r\n        if (attrs in settings) {\r\n            return settings[attrs]\r\n        }\r\n        if (attrs in DEFAULTS) {\r\n            return DEFAULTS[attrs]\r\n        }\r\n        return 0\r\n    }\r\n    extend(attributes, attrs);\r\n    for (key in attributes) {\r\n        value = attributes[key];\r\n        if (void 0 === value) {\r\n            continue\r\n        }\r\n        settings[key] = value;\r\n        if (\"align\" === key) {\r\n            key = \"text-anchor\";\r\n            value = {\r\n                left: rtl ? \"end\" : \"start\",\r\n                center: \"middle\",\r\n                right: rtl ? \"start\" : \"end\"\r\n            } [value] || null\r\n        } else if (\"dashStyle\" === key) {\r\n            recalculateDashStyle = true;\r\n            continue\r\n        } else if (key === KEY_STROKE_WIDTH) {\r\n            recalculateDashStyle = true\r\n        } else if (value && (\"fill\" === key || \"clip-path\" === key || \"filter\" === key) && 0 === value.indexOf(\"DevExpress\")) {\r\n            that._addFixIRICallback();\r\n            value = getFuncIri(value, renderer.pathModified)\r\n        } else if (/^(translate(X|Y)|rotate[XY]?|scale(X|Y)|sharp|sharpDirection)$/i.test(key)) {\r\n            hasTransformations = true;\r\n            continue\r\n        } else if (/^(x|y|d)$/i.test(key)) {\r\n            hasTransformations = true\r\n        }\r\n        if (null === value) {\r\n            elem.removeAttribute(key)\r\n        } else {\r\n            elem.setAttribute(key, value)\r\n        }\r\n    }\r\n    if (recalculateDashStyle && \"dashStyle\" in settings) {\r\n        value = settings.dashStyle;\r\n        sw = (\"_originalSW\" in that ? that._originalSW : settings[KEY_STROKE_WIDTH]) || 1;\r\n        key = \"stroke-dasharray\";\r\n        value = null === value ? \"\" : normalizeEnum(value);\r\n        if (\"\" === value || \"solid\" === value || value === NONE) {\r\n            that.element.removeAttribute(key)\r\n        } else {\r\n            value = value.replace(/longdash/g, \"8,3,\").replace(/dash/g, \"4,3,\").replace(/dot/g, \"1,3,\").replace(/,$/, \"\").split(\",\");\r\n            i = value.length;\r\n            while (i--) {\r\n                value[i] = parseInt(value[i]) * sw\r\n            }\r\n            that.element.setAttribute(key, value.join(\",\"))\r\n        }\r\n    }\r\n    if (hasTransformations) {\r\n        that._applyTransformation()\r\n    }\r\n    return that\r\n}\r\n\r\nfunction pathAttr(attrs) {\r\n    var segments;\r\n    if (isObjectArgument(attrs)) {\r\n        attrs = extend({}, attrs);\r\n        segments = attrs.segments;\r\n        if (\"points\" in attrs) {\r\n            segments = buildPathSegments(attrs.points, this.type);\r\n            delete attrs.points\r\n        }\r\n        if (segments) {\r\n            attrs.d = combinePathParam(segments);\r\n            this.segments = segments;\r\n            delete attrs.segments\r\n        }\r\n    }\r\n    return baseAttr(this, attrs)\r\n}\r\n\r\nfunction arcAttr(attrs) {\r\n    var settings = this._settings;\r\n    var x;\r\n    var y;\r\n    var innerRadius;\r\n    var outerRadius;\r\n    var startAngle;\r\n    var endAngle;\r\n    if (isObjectArgument(attrs)) {\r\n        attrs = extend({}, attrs);\r\n        if (\"x\" in attrs || \"y\" in attrs || \"innerRadius\" in attrs || \"outerRadius\" in attrs || \"startAngle\" in attrs || \"endAngle\" in attrs) {\r\n            settings.x = x = \"x\" in attrs ? attrs.x : settings.x;\r\n            delete attrs.x;\r\n            settings.y = y = \"y\" in attrs ? attrs.y : settings.y;\r\n            delete attrs.y;\r\n            settings.innerRadius = innerRadius = \"innerRadius\" in attrs ? attrs.innerRadius : settings.innerRadius;\r\n            delete attrs.innerRadius;\r\n            settings.outerRadius = outerRadius = \"outerRadius\" in attrs ? attrs.outerRadius : settings.outerRadius;\r\n            delete attrs.outerRadius;\r\n            settings.startAngle = startAngle = \"startAngle\" in attrs ? attrs.startAngle : settings.startAngle;\r\n            delete attrs.startAngle;\r\n            settings.endAngle = endAngle = \"endAngle\" in attrs ? attrs.endAngle : settings.endAngle;\r\n            delete attrs.endAngle;\r\n            attrs.d = buildArcPath.apply(null, normalizeArcParams(x, y, innerRadius, outerRadius, startAngle, endAngle))\r\n        }\r\n    }\r\n    return baseAttr(this, attrs)\r\n}\r\n\r\nfunction rectAttr(attrs) {\r\n    var x;\r\n    var y;\r\n    var width;\r\n    var height;\r\n    var sw;\r\n    var maxSW;\r\n    var newSW;\r\n    if (isObjectArgument(attrs)) {\r\n        attrs = extend({}, attrs);\r\n        if (void 0 !== attrs.x || void 0 !== attrs.y || void 0 !== attrs.width || void 0 !== attrs.height || void 0 !== attrs[KEY_STROKE_WIDTH]) {\r\n            void 0 !== attrs.x ? x = this._originalX = attrs.x : x = this._originalX || 0;\r\n            void 0 !== attrs.y ? y = this._originalY = attrs.y : y = this._originalY || 0;\r\n            void 0 !== attrs.width ? width = this._originalWidth = attrs.width : width = this._originalWidth || 0;\r\n            void 0 !== attrs.height ? height = this._originalHeight = attrs.height : height = this._originalHeight || 0;\r\n            void 0 !== attrs[KEY_STROKE_WIDTH] ? sw = this._originalSW = attrs[KEY_STROKE_WIDTH] : sw = this._originalSW;\r\n            maxSW = ~~((width < height ? width : height) / 2);\r\n            newSW = (sw || 0) < maxSW ? sw || 0 : maxSW;\r\n            attrs.x = x + newSW / 2;\r\n            attrs.y = y + newSW / 2;\r\n            attrs.width = width - newSW;\r\n            attrs.height = height - newSW;\r\n            ((sw || 0) !== newSW || !(0 === newSW && void 0 === sw)) && (attrs[KEY_STROKE_WIDTH] = newSW)\r\n        }\r\n        if (\"sharp\" in attrs) {\r\n            delete attrs.sharp\r\n        }\r\n    }\r\n    return baseAttr(this, attrs)\r\n}\r\n\r\nfunction textAttr(attrs) {\r\n    var isResetRequired;\r\n    if (!isObjectArgument(attrs)) {\r\n        return baseAttr(this, attrs)\r\n    }\r\n    attrs = extend({}, attrs);\r\n    var settings = this._settings;\r\n    var wasStroked = isDefined(settings[KEY_STROKE]) && isDefined(settings[KEY_STROKE_WIDTH]);\r\n    if (void 0 !== attrs[KEY_TEXT]) {\r\n        settings[KEY_TEXT] = attrs[KEY_TEXT];\r\n        delete attrs[KEY_TEXT];\r\n        isResetRequired = true\r\n    }\r\n    if (void 0 !== attrs[KEY_STROKE]) {\r\n        settings[KEY_STROKE] = attrs[KEY_STROKE];\r\n        delete attrs[KEY_STROKE]\r\n    }\r\n    if (void 0 !== attrs[KEY_STROKE_WIDTH]) {\r\n        settings[KEY_STROKE_WIDTH] = attrs[KEY_STROKE_WIDTH];\r\n        delete attrs[KEY_STROKE_WIDTH]\r\n    }\r\n    if (void 0 !== attrs[KEY_STROKE_OPACITY]) {\r\n        settings[KEY_STROKE_OPACITY] = attrs[KEY_STROKE_OPACITY];\r\n        delete attrs[KEY_STROKE_OPACITY]\r\n    }\r\n    if (void 0 !== attrs[KEY_TEXTS_ALIGNMENT]) {\r\n        alignTextNodes(this, attrs[KEY_TEXTS_ALIGNMENT]);\r\n        delete attrs[KEY_TEXTS_ALIGNMENT]\r\n    }\r\n    var isStroked = isDefined(settings[KEY_STROKE]) && isDefined(settings[KEY_STROKE_WIDTH]);\r\n    baseAttr(this, attrs);\r\n    isResetRequired = isResetRequired || isStroked !== wasStroked && settings[KEY_TEXT];\r\n    if (isResetRequired) {\r\n        createTextNodes(this, settings.text, isStroked);\r\n        this._hasEllipsis = false\r\n    }\r\n    if (isResetRequired || void 0 !== attrs.x || void 0 !== attrs.y) {\r\n        locateTextNodes(this)\r\n    }\r\n    if (isStroked) {\r\n        strokeTextNodes(this)\r\n    }\r\n    return this\r\n}\r\n\r\nfunction textCss(styles) {\r\n    styles = styles || {};\r\n    baseCss(this, styles);\r\n    if (KEY_FONT_SIZE in styles) {\r\n        locateTextNodes(this)\r\n    }\r\n    return this\r\n}\r\n\r\nfunction orderHtmlTree(list, line, node, parentStyle, parentClassName) {\r\n    var style;\r\n    var realStyle;\r\n    var i;\r\n    var ii;\r\n    var nodes;\r\n    if (void 0 !== node.wholeText) {\r\n        list.push({\r\n            value: node.wholeText,\r\n            style: parentStyle,\r\n            className: parentClassName,\r\n            line: line,\r\n            height: parentStyle[KEY_FONT_SIZE] || 0\r\n        })\r\n    } else if (\"BR\" === node.tagName) {\r\n        ++line\r\n    } else if (domAdapter.isElementNode(node)) {\r\n        extend(style = {}, parentStyle);\r\n        switch (node.tagName) {\r\n            case \"B\":\r\n            case \"STRONG\":\r\n                style[KEY_FONT_WEIGHT] = \"bold\";\r\n                break;\r\n            case \"I\":\r\n            case \"EM\":\r\n                style[KEY_FONT_STYLE] = \"italic\";\r\n                break;\r\n            case \"U\":\r\n                style[KEY_TEXT_DECORATION] = \"underline\"\r\n        }\r\n        realStyle = node.style;\r\n        realStyle.color && (style.fill = realStyle.color);\r\n        realStyle.fontSize && (style[KEY_FONT_SIZE] = realStyle.fontSize);\r\n        realStyle.fontStyle && (style[KEY_FONT_STYLE] = realStyle.fontStyle);\r\n        realStyle.fontWeight && (style[KEY_FONT_WEIGHT] = realStyle.fontWeight);\r\n        realStyle.textDecoration && (style[KEY_TEXT_DECORATION] = realStyle.textDecoration);\r\n        for (i = 0, nodes = node.childNodes, ii = nodes.length; i < ii; ++i) {\r\n            line = orderHtmlTree(list, line, nodes[i], style, node.className || parentClassName)\r\n        }\r\n    }\r\n    return line\r\n}\r\n\r\nfunction adjustLineHeights(items) {\r\n    var i;\r\n    var ii;\r\n    var currentItem = items[0];\r\n    var item;\r\n    for (i = 1, ii = items.length; i < ii; ++i) {\r\n        item = items[i];\r\n        if (item.line === currentItem.line) {\r\n            currentItem.height = maxLengthFontSize(currentItem.height, item.height);\r\n            currentItem.inherits = currentItem.inherits || 0 === parseFloat(item.height);\r\n            item.height = NaN\r\n        } else {\r\n            currentItem = item\r\n        }\r\n    }\r\n}\r\n\r\nfunction removeExtraAttrs(html) {\r\n    var findStyleAndClassAttrs = /(style|class)\\s*=\\s*([\"'])(?:(?!\\2).)*\\2\\s?/gi;\r\n    return html.replace(/(?:(<[a-z0-9]+\\s*))([\\s\\S]*?)(>|\\/>)/gi, (function(allTagAttrs, p1, p2, p3) {\r\n        p2 = (p2 && p2.match(findStyleAndClassAttrs) || []).map((function(str) {\r\n            return str\r\n        })).join(\" \");\r\n        return p1 + p2 + p3\r\n    }))\r\n}\r\n\r\nfunction parseHTML(text) {\r\n    var items = [];\r\n    var div = domAdapter.createElement(\"div\");\r\n    div.innerHTML = text.replace(/\\r/g, \"\").replace(/\\n/g, \"<br/>\");\r\n    orderHtmlTree(items, 0, div, {}, \"\");\r\n    adjustLineHeights(items);\r\n    return items\r\n}\r\n\r\nfunction parseMultiline(text) {\r\n    var texts = text.replace(/\\r/g, \"\").split(/\\n/g);\r\n    var i = 0;\r\n    var items = [];\r\n    for (; i < texts.length; i++) {\r\n        items.push({\r\n            value: texts[i].trim(),\r\n            height: 0,\r\n            line: i\r\n        })\r\n    }\r\n    return items\r\n}\r\n\r\nfunction createTspans(items, element, fieldName) {\r\n    var i;\r\n    var ii;\r\n    var item;\r\n    for (i = 0, ii = items.length; i < ii; ++i) {\r\n        item = items[i];\r\n        item[fieldName] = createElement(\"tspan\");\r\n        item[fieldName].appendChild(domAdapter.createTextNode(item.value));\r\n        item.style && baseCss({\r\n            element: item[fieldName],\r\n            _styles: {}\r\n        }, item.style);\r\n        item.className && item[fieldName].setAttribute(\"class\", item.className);\r\n        element.appendChild(item[fieldName])\r\n    }\r\n}\r\n\r\nfunction restoreText() {\r\n    if (this._hasEllipsis) {\r\n        this.attr({\r\n            text: this._settings.text\r\n        })\r\n    }\r\n}\r\n\r\nfunction applyEllipsis(maxWidth) {\r\n    var lines;\r\n    var hasEllipsis = false;\r\n    var i;\r\n    var ii;\r\n    var lineParts;\r\n    var j;\r\n    var jj;\r\n    var text;\r\n    restoreText.call(this);\r\n    var ellipsis = this.renderer.text(ELLIPSIS).attr(this._styles).append(this.renderer.root);\r\n    var ellipsisWidth = ellipsis.getBBox().width;\r\n    if (this._getElementBBox().width > maxWidth) {\r\n        if (maxWidth - ellipsisWidth < 0) {\r\n            maxWidth = 0\r\n        } else {\r\n            maxWidth -= ellipsisWidth\r\n        }\r\n        lines = prepareLines(this.element, this._texts, maxWidth);\r\n        for (i = 0, ii = lines.length; i < ii; ++i) {\r\n            lineParts = lines[i].parts;\r\n            if (1 === lines[i].commonLength) {\r\n                continue\r\n            }\r\n            for (j = 0, jj = lineParts.length; j < jj; ++j) {\r\n                text = lineParts[j];\r\n                if (isDefined(text.endIndex)) {\r\n                    setNewText(text, text.endIndex);\r\n                    hasEllipsis = true\r\n                } else if (text.startBox > maxWidth) {\r\n                    removeTextSpan(text)\r\n                }\r\n            }\r\n        }\r\n    }\r\n    ellipsis.remove();\r\n    this._hasEllipsis = hasEllipsis;\r\n    return hasEllipsis\r\n}\r\n\r\nfunction cloneAndRemoveAttrs(node) {\r\n    var clone;\r\n    if (node) {\r\n        clone = node.cloneNode();\r\n        clone.removeAttribute(\"y\");\r\n        clone.removeAttribute(\"x\")\r\n    }\r\n    return clone || node\r\n}\r\n\r\nfunction detachTitleElements(element) {\r\n    var titleElements = domAdapter.querySelectorAll(element, \"title\");\r\n    for (var i = 0; i < titleElements.length; i++) {\r\n        element.removeChild(titleElements[i])\r\n    }\r\n    return titleElements\r\n}\r\n\r\nfunction detachAndStoreTitleElements(element) {\r\n    var titleElements = detachTitleElements(element);\r\n    return () => {\r\n        for (var i = 0; i < titleElements.length; i++) {\r\n            element.appendChild(titleElements[i])\r\n        }\r\n    }\r\n}\r\n\r\nfunction setMaxSize(maxWidth, maxHeight) {\r\n    var options = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};\r\n    var that = this;\r\n    var lines = [];\r\n    var textChanged = false;\r\n    var textIsEmpty = false;\r\n    var ellipsisMaxWidth = maxWidth;\r\n    restoreText.call(that);\r\n    var restoreTitleElement = detachAndStoreTitleElements(this.element);\r\n    var ellipsis = that.renderer.text(ELLIPSIS).attr(that._styles).append(that.renderer.root);\r\n    var ellipsisWidth = ellipsis.getBBox().width;\r\n    var {\r\n        width: width,\r\n        height: height\r\n    } = that._getElementBBox();\r\n    if ((width || height) && (width > maxWidth || maxHeight && height > maxHeight)) {\r\n        if (maxWidth - ellipsisWidth < 0) {\r\n            ellipsisMaxWidth = 0\r\n        } else {\r\n            ellipsisMaxWidth -= ellipsisWidth\r\n        }\r\n        lines = applyOverflowRules(that.element, that._texts, maxWidth, ellipsisMaxWidth, options);\r\n        lines = setMaxHeight(lines, ellipsisMaxWidth, options, maxHeight, parseFloat(this._getLineHeight()));\r\n        this._texts = lines.reduce((texts, line) => texts.concat(line.parts), []).filter(t => \"\" !== t.value).map(t => {\r\n            t.stroke && t.tspan.parentNode.appendChild(t.stroke);\r\n            return t\r\n        }).map(t => {\r\n            t.tspan.parentNode.appendChild(t.tspan);\r\n            return t\r\n        });\r\n        !this._texts.length && (this._texts = null);\r\n        textChanged = true;\r\n        if (this._texts) {\r\n            locateTextNodes(this)\r\n        } else {\r\n            this.element.textContent = \"\";\r\n            textIsEmpty = true\r\n        }\r\n    }\r\n    ellipsis.remove();\r\n    that._hasEllipsis = textChanged;\r\n    restoreTitleElement();\r\n    return {\r\n        rowCount: lines.length,\r\n        textChanged: textChanged,\r\n        textIsEmpty: textIsEmpty\r\n    }\r\n}\r\n\r\nfunction getIndexForEllipsis(text, maxWidth, startBox, endBox) {\r\n    var k;\r\n    var kk;\r\n    if (startBox <= maxWidth && endBox > maxWidth) {\r\n        for (k = 1, kk = text.value.length; k <= kk; ++k) {\r\n            if (startBox + text.tspan.getSubStringLength(0, k) > maxWidth) {\r\n                return k - 1\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction getTextWidth(text) {\r\n    return text.value.length ? text.tspan.getSubStringLength(0, text.value.length) : 0\r\n}\r\n\r\nfunction prepareLines(element, texts, maxWidth) {\r\n    var lines = [];\r\n    var i;\r\n    var ii;\r\n    var text;\r\n    var startBox;\r\n    var endBox;\r\n    if (texts) {\r\n        for (i = 0, ii = texts.length; i < ii; ++i) {\r\n            text = texts[i];\r\n            if (!lines[text.line]) {\r\n                text.startBox = startBox = 0;\r\n                lines.push({\r\n                    commonLength: text.value.length,\r\n                    parts: [text]\r\n                })\r\n            } else {\r\n                text.startBox = startBox;\r\n                lines[text.line].parts.push(text);\r\n                lines[text.line].commonLength += text.value.length\r\n            }\r\n            endBox = startBox + text.tspan.getSubStringLength(0, text.value.length);\r\n            text.endIndex = getIndexForEllipsis(text, maxWidth, startBox, endBox);\r\n            startBox = endBox\r\n        }\r\n    } else {\r\n        text = {\r\n            value: element.textContent,\r\n            tspan: element\r\n        };\r\n        text.startBox = startBox = 0;\r\n        endBox = startBox + getTextWidth(text);\r\n        text.endIndex = getIndexForEllipsis(text, maxWidth, startBox, endBox);\r\n        lines = [{\r\n            commonLength: element.textContent.length,\r\n            parts: [text]\r\n        }]\r\n    }\r\n    return lines\r\n}\r\n\r\nfunction getSpaceBreakIndex(text, maxWidth) {\r\n    var initialIndices = text.startBox > 0 ? [0] : [];\r\n    var spaceIndices = text.value.split(\"\").reduce((indices, char, index) => {\r\n        if (\" \" === char) {\r\n            indices.push(index)\r\n        }\r\n        return indices\r\n    }, initialIndices);\r\n    var spaceIndex = 0;\r\n    while (void 0 !== spaceIndices[spaceIndex + 1] && text.startBox + text.tspan.getSubStringLength(0, spaceIndices[spaceIndex + 1]) < maxWidth) {\r\n        spaceIndex++\r\n    }\r\n    return spaceIndices[spaceIndex]\r\n}\r\n\r\nfunction getWordBreakIndex(text, maxWidth) {\r\n    for (var i = 0; i < text.value.length - 1; i++) {\r\n        if (text.startBox + text.tspan.getSubStringLength(0, i + 1) > maxWidth) {\r\n            return i\r\n        }\r\n    }\r\n}\r\n\r\nfunction getEllipsisString(ellipsisMaxWidth, _ref) {\r\n    var {\r\n        hideOverflowEllipsis: hideOverflowEllipsis\r\n    } = _ref;\r\n    return hideOverflowEllipsis && 0 === ellipsisMaxWidth ? \"\" : ELLIPSIS\r\n}\r\n\r\nfunction setEllipsis(text, ellipsisMaxWidth, options) {\r\n    var ellipsis = getEllipsisString(ellipsisMaxWidth, options);\r\n    if (text.value.length && text.tspan.parentNode) {\r\n        for (var i = text.value.length - 1; i >= 1; i--) {\r\n            if (text.startBox + text.tspan.getSubStringLength(0, i) < ellipsisMaxWidth) {\r\n                setNewText(text, i, ellipsis);\r\n                break\r\n            } else if (1 === i) {\r\n                setNewText(text, 0, ellipsis)\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction wordWrap(text, maxWidth, ellipsisMaxWidth, options, lastStepBreakIndex) {\r\n    var wholeText = text.value;\r\n    var breakIndex;\r\n    if (\"none\" !== options.wordWrap) {\r\n        breakIndex = \"normal\" === options.wordWrap ? getSpaceBreakIndex(text, maxWidth) : getWordBreakIndex(text, maxWidth)\r\n    }\r\n    var restLines = [];\r\n    var restText;\r\n    if (isFinite(breakIndex) && !(0 === lastStepBreakIndex && 0 === breakIndex)) {\r\n        setNewText(text, breakIndex, \"\");\r\n        var newTextOffset = \" \" === wholeText[breakIndex] ? 1 : 0;\r\n        var restString = wholeText.slice(breakIndex + newTextOffset);\r\n        if (restString.length) {\r\n            var restTspan = cloneAndRemoveAttrs(text.tspan);\r\n            restTspan.textContent = restString;\r\n            text.tspan.parentNode.appendChild(restTspan);\r\n            restText = extend(extend({}, text), {\r\n                value: restString,\r\n                startBox: 0,\r\n                height: 0,\r\n                tspan: restTspan,\r\n                stroke: cloneAndRemoveAttrs(text.stroke),\r\n                endBox: restTspan.getSubStringLength(0, restString.length)\r\n            });\r\n            restText.stroke && (restText.stroke.textContent = restString);\r\n            if (restText.endBox > maxWidth) {\r\n                restLines = wordWrap(restText, maxWidth, ellipsisMaxWidth, options, breakIndex);\r\n                if (!restLines.length) {\r\n                    return []\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (text.value.length) {\r\n        if (\"ellipsis\" === options.textOverflow && text.tspan.getSubStringLength(0, text.value.length) > maxWidth) {\r\n            setEllipsis(text, ellipsisMaxWidth, options)\r\n        }\r\n        if (\"hide\" === options.textOverflow && text.tspan.getSubStringLength(0, text.value.length) > maxWidth) {\r\n            return []\r\n        }\r\n    } else {\r\n        text.tspan.parentNode.removeChild(text.tspan)\r\n    }\r\n    var parts = [];\r\n    if (restText) {\r\n        parts.push(restText)\r\n    }\r\n    return [{\r\n        commonLength: wholeText.length,\r\n        parts: parts\r\n    }].concat(restLines)\r\n}\r\n\r\nfunction calculateLineHeight(line, lineHeight) {\r\n    return line.parts.reduce((height, text) => max(height, getItemLineHeight(text, lineHeight)), 0)\r\n}\r\n\r\nfunction setMaxHeight(lines, ellipsisMaxWidth, options, maxHeight, lineHeight) {\r\n    var textOverflow = options.textOverflow;\r\n    if (!isFinite(maxHeight) || 0 === Number(maxHeight) || \"none\" === textOverflow) {\r\n        return lines\r\n    }\r\n    var result = lines.reduce((_ref2, l, index, arr) => {\r\n        var [lines, commonHeight] = _ref2;\r\n        var height = calculateLineHeight(l, lineHeight);\r\n        commonHeight += height;\r\n        if (commonHeight < maxHeight) {\r\n            lines.push(l)\r\n        } else {\r\n            l.parts.forEach(item => {\r\n                removeTextSpan(item)\r\n            });\r\n            if (\"ellipsis\" === textOverflow) {\r\n                var prevLine = arr[index - 1];\r\n                if (prevLine) {\r\n                    var text = prevLine.parts[prevLine.parts.length - 1];\r\n                    if (!text.hasEllipsis) {\r\n                        if (0 === ellipsisMaxWidth || text.endBox < ellipsisMaxWidth) {\r\n                            setNewText(text, text.value.length, getEllipsisString(ellipsisMaxWidth, options))\r\n                        } else {\r\n                            setEllipsis(text, ellipsisMaxWidth, options)\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return [lines, commonHeight]\r\n    }, [\r\n        [], 0\r\n    ]);\r\n    if (\"hide\" === textOverflow && result[1] > maxHeight) {\r\n        result[0].forEach(l => {\r\n            l.parts.forEach(item => {\r\n                removeTextSpan(item)\r\n            })\r\n        });\r\n        return []\r\n    }\r\n    return result[0]\r\n}\r\n\r\nfunction applyOverflowRules(element, texts, maxWidth, ellipsisMaxWidth, options) {\r\n    if (!texts) {\r\n        var textValue = element.textContent;\r\n        var text = {\r\n            value: textValue,\r\n            height: 0,\r\n            line: 0\r\n        };\r\n        element.textContent = \"\";\r\n        createTspans([text], element, \"tspan\");\r\n        texts = [text]\r\n    }\r\n    return texts.reduce((_ref3, text) => {\r\n        var [lines, startBox, endBox, stop, lineNumber] = _ref3;\r\n        var line = lines[lines.length - 1];\r\n        if (stop) {\r\n            return [lines, startBox, endBox, stop]\r\n        }\r\n        if (!line || text.line !== lineNumber) {\r\n            text.startBox = startBox = 0;\r\n            lines.push({\r\n                commonLength: text.value.length,\r\n                parts: [text]\r\n            })\r\n        } else {\r\n            text.startBox = startBox;\r\n            if (startBox > ellipsisMaxWidth && \"none\" === options.wordWrap && \"ellipsis\" === options.textOverflow) {\r\n                removeTextSpan(text);\r\n                return [lines, startBox, endBox, stop, lineNumber]\r\n            }\r\n            line.parts.push(text);\r\n            line.commonLength += text.value.length\r\n        }\r\n        text.endBox = endBox = startBox + getTextWidth(text);\r\n        startBox = endBox;\r\n        if (isDefined(maxWidth) && endBox > maxWidth) {\r\n            var wordWrapLines = wordWrap(text, maxWidth, ellipsisMaxWidth, options);\r\n            if (!wordWrapLines.length) {\r\n                lines = [];\r\n                stop = true\r\n            } else {\r\n                lines = lines.concat(wordWrapLines.filter(l => l.parts.length > 0))\r\n            }\r\n        }\r\n        return [lines, startBox, endBox, stop, text.line]\r\n    }, [\r\n        [], 0, 0, false, 0\r\n    ])[0]\r\n}\r\n\r\nfunction setNewText(text, index) {\r\n    var insertString = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : ELLIPSIS;\r\n    var newText = text.value.substr(0, index) + insertString;\r\n    text.value = text.tspan.textContent = newText;\r\n    text.stroke && (text.stroke.textContent = newText);\r\n    if (insertString === ELLIPSIS) {\r\n        text.hasEllipsis = true\r\n    }\r\n}\r\n\r\nfunction removeTextSpan(text) {\r\n    text.tspan.parentNode && text.tspan.parentNode.removeChild(text.tspan);\r\n    text.stroke && text.stroke.parentNode && text.stroke.parentNode.removeChild(text.stroke)\r\n}\r\n\r\nfunction createTextNodes(wrapper, text, isStroked) {\r\n    var items;\r\n    var parsedHtml;\r\n    wrapper._texts = null;\r\n    wrapper.clear();\r\n    if (null === text) {\r\n        return\r\n    }\r\n    text = \"\" + text;\r\n    if (!wrapper.renderer.encodeHtml && (/<[a-z][\\s\\S]*>/i.test(text) || -1 !== text.indexOf(\"&\"))) {\r\n        parsedHtml = removeExtraAttrs(text);\r\n        items = parseHTML(parsedHtml)\r\n    } else if (/\\n/g.test(text)) {\r\n        items = parseMultiline(text)\r\n    } else if (isStroked) {\r\n        items = [{\r\n            value: text.trim(),\r\n            height: 0\r\n        }]\r\n    }\r\n    if (items) {\r\n        if (items.length) {\r\n            wrapper._texts = items;\r\n            if (isStroked) {\r\n                createTspans(items, wrapper.element, KEY_STROKE)\r\n            }\r\n            createTspans(items, wrapper.element, \"tspan\")\r\n        }\r\n    } else {\r\n        wrapper.element.appendChild(domAdapter.createTextNode(text))\r\n    }\r\n}\r\n\r\nfunction setTextNodeAttribute(item, name, value) {\r\n    item.tspan.setAttribute(name, value);\r\n    item.stroke && item.stroke.setAttribute(name, value)\r\n}\r\n\r\nfunction getItemLineHeight(item, defaultValue) {\r\n    return item.inherits ? maxLengthFontSize(item.height, defaultValue) : item.height || defaultValue\r\n}\r\n\r\nfunction locateTextNodes(wrapper) {\r\n    if (!wrapper._texts) {\r\n        return\r\n    }\r\n    var items = wrapper._texts;\r\n    var x = wrapper._settings.x;\r\n    var lineHeight = wrapper._getLineHeight();\r\n    var i;\r\n    var ii;\r\n    var item = items[0];\r\n    setTextNodeAttribute(item, \"x\", x);\r\n    setTextNodeAttribute(item, \"y\", wrapper._settings.y);\r\n    for (i = 1, ii = items.length; i < ii; ++i) {\r\n        item = items[i];\r\n        if (parseFloat(item.height) >= 0) {\r\n            setTextNodeAttribute(item, \"x\", x);\r\n            var height = getItemLineHeight(item, lineHeight);\r\n            setTextNodeAttribute(item, \"dy\", height)\r\n        }\r\n    }\r\n}\r\n\r\nfunction alignTextNodes(wrapper, alignment) {\r\n    if (!wrapper._texts || \"center\" === alignment) {\r\n        return\r\n    }\r\n    var items = wrapper._texts;\r\n    var direction = \"left\" === alignment ? -1 : 1;\r\n    var maxTextWidth = Math.max.apply(Math, items.map(t => getTextWidth(t)));\r\n    for (var i = 0; i < items.length; i++) {\r\n        var item = items[i];\r\n        var textWidth = getTextWidth(item);\r\n        if (0 !== maxTextWidth && maxTextWidth !== textWidth) {\r\n            setTextNodeAttribute(item, \"dx\", direction * round((maxTextWidth - textWidth) / 2 * 10) / 10)\r\n        }\r\n    }\r\n}\r\n\r\nfunction maxLengthFontSize(fontSize1, fontSize2) {\r\n    var parsedHeight1 = parseFloat(fontSize1);\r\n    var parsedHeight2 = parseFloat(fontSize2);\r\n    var height1 = parsedHeight1 || DEFAULT_FONT_SIZE;\r\n    var height2 = parsedHeight2 || DEFAULT_FONT_SIZE;\r\n    return height1 > height2 ? !isNaN(parsedHeight1) ? fontSize1 : height1 : !isNaN(parsedHeight2) ? fontSize2 : height2\r\n}\r\n\r\nfunction strokeTextNodes(wrapper) {\r\n    if (!wrapper._texts) {\r\n        return\r\n    }\r\n    var items = wrapper._texts;\r\n    var stroke = wrapper._settings[KEY_STROKE];\r\n    var strokeWidth = wrapper._settings[KEY_STROKE_WIDTH];\r\n    var strokeOpacity = wrapper._settings[KEY_STROKE_OPACITY] || 1;\r\n    var tspan;\r\n    var i;\r\n    var ii;\r\n    for (i = 0, ii = items.length; i < ii; ++i) {\r\n        tspan = items[i].stroke;\r\n        tspan.setAttribute(KEY_STROKE, stroke);\r\n        tspan.setAttribute(KEY_STROKE_WIDTH, strokeWidth);\r\n        tspan.setAttribute(KEY_STROKE_OPACITY, strokeOpacity);\r\n        tspan.setAttribute(\"stroke-linejoin\", \"round\")\r\n    }\r\n}\r\n\r\nfunction baseAnimate(that, params, options, complete) {\r\n    options = options || {};\r\n    var key;\r\n    var value;\r\n    var renderer = that.renderer;\r\n    var settings = that._settings;\r\n    var animationParams = {};\r\n    var defaults = {\r\n        translateX: 0,\r\n        translateY: 0,\r\n        scaleX: 1,\r\n        scaleY: 1,\r\n        rotate: 0,\r\n        rotateX: 0,\r\n        rotateY: 0\r\n    };\r\n    if (complete) {\r\n        options.complete = complete\r\n    }\r\n    if (renderer.animationEnabled()) {\r\n        for (key in params) {\r\n            value = params[key];\r\n            if (/^(translate(X|Y)|rotate[XY]?|scale(X|Y))$/i.test(key)) {\r\n                animationParams.transform = animationParams.transform || {\r\n                    from: {},\r\n                    to: {}\r\n                };\r\n                animationParams.transform.from[key] = key in settings ? Number(settings[key].toFixed(3)) : defaults[key];\r\n                animationParams.transform.to[key] = value\r\n            } else if (\"arc\" === key || \"segments\" === key) {\r\n                animationParams[key] = value\r\n            } else {\r\n                animationParams[key] = {\r\n                    from: key in settings ? settings[key] : parseFloat(that.element.getAttribute(key) || 0),\r\n                    to: value\r\n                }\r\n            }\r\n        }\r\n        renderer.animateElement(that, animationParams, extend(extend({}, renderer._animation), options))\r\n    } else {\r\n        options.step && options.step.call(that, 1, 1);\r\n        options.complete && options.complete.call(that);\r\n        that.attr(params)\r\n    }\r\n    return that\r\n}\r\n\r\nfunction pathAnimate(params, options, complete) {\r\n    var curSegments = this.segments || [];\r\n    var newSegments;\r\n    var endSegments;\r\n    if (this.renderer.animationEnabled() && \"points\" in params) {\r\n        newSegments = buildPathSegments(params.points, this.type);\r\n        endSegments = compensateSegments(curSegments, newSegments, this.type);\r\n        params.segments = {\r\n            from: curSegments,\r\n            to: newSegments,\r\n            end: endSegments\r\n        };\r\n        delete params.points\r\n    }\r\n    return baseAnimate(this, params, options, complete)\r\n}\r\n\r\nfunction arcAnimate(params, options, complete) {\r\n    var settings = this._settings;\r\n    var arcParams = {\r\n        from: {},\r\n        to: {}\r\n    };\r\n    if (this.renderer.animationEnabled() && (\"x\" in params || \"y\" in params || \"innerRadius\" in params || \"outerRadius\" in params || \"startAngle\" in params || \"endAngle\" in params)) {\r\n        arcParams.from.x = settings.x || 0;\r\n        arcParams.from.y = settings.y || 0;\r\n        arcParams.from.innerRadius = settings.innerRadius || 0;\r\n        arcParams.from.outerRadius = settings.outerRadius || 0;\r\n        arcParams.from.startAngle = settings.startAngle || 0;\r\n        arcParams.from.endAngle = settings.endAngle || 0;\r\n        arcParams.to.x = \"x\" in params ? params.x : settings.x;\r\n        delete params.x;\r\n        arcParams.to.y = \"y\" in params ? params.y : settings.y;\r\n        delete params.y;\r\n        arcParams.to.innerRadius = \"innerRadius\" in params ? params.innerRadius : settings.innerRadius;\r\n        delete params.innerRadius;\r\n        arcParams.to.outerRadius = \"outerRadius\" in params ? params.outerRadius : settings.outerRadius;\r\n        delete params.outerRadius;\r\n        arcParams.to.startAngle = \"startAngle\" in params ? params.startAngle : settings.startAngle;\r\n        delete params.startAngle;\r\n        arcParams.to.endAngle = \"endAngle\" in params ? params.endAngle : settings.endAngle;\r\n        delete params.endAngle;\r\n        params.arc = arcParams\r\n    }\r\n    return baseAnimate(this, params, options, complete)\r\n}\r\n\r\nfunction buildLink(target, parameters) {\r\n    var obj = {\r\n        is: false,\r\n        name: parameters.name || parameters,\r\n        after: parameters.after\r\n    };\r\n    if (target) {\r\n        obj.to = target\r\n    } else {\r\n        obj.virtual = true\r\n    }\r\n    return obj\r\n}\r\nexport var SvgElement = function(renderer, tagName, type) {\r\n    this.renderer = renderer;\r\n    this.element = createElement(tagName);\r\n    this._settings = {};\r\n    this._styles = {};\r\n    if (\"path\" === tagName) {\r\n        this.type = type || \"line\"\r\n    }\r\n};\r\n\r\nfunction removeFuncIriCallback(callback) {\r\n    fixFuncIriCallbacks.remove(callback)\r\n}\r\nSvgElement.prototype = {\r\n    constructor: SvgElement,\r\n    _getJQElement: function() {\r\n        return this._$element || (this._$element = $(this.element))\r\n    },\r\n    _addFixIRICallback: function() {\r\n        var that = this;\r\n        var fn = function() {\r\n            fixFuncIri(that, \"fill\");\r\n            fixFuncIri(that, \"clip-path\");\r\n            fixFuncIri(that, \"filter\")\r\n        };\r\n        that.element._fixFuncIri = fn;\r\n        fn.renderer = that.renderer;\r\n        fixFuncIriCallbacks.add(fn);\r\n        that._addFixIRICallback = function() {}\r\n    },\r\n    _clearChildrenFuncIri: function() {\r\n        ! function clearChildren(element) {\r\n            var i;\r\n            for (i = 0; i < element.childNodes.length; i++) {\r\n                removeFuncIriCallback(element.childNodes[i]._fixFuncIri);\r\n                clearChildren(element.childNodes[i])\r\n            }\r\n        }(this.element)\r\n    },\r\n    dispose: function() {\r\n        removeFuncIriCallback(this.element._fixFuncIri);\r\n        this._clearChildrenFuncIri();\r\n        this._getJQElement().remove();\r\n        return this\r\n    },\r\n    append: function(parent) {\r\n        (parent || this.renderer.root).element.appendChild(this.element);\r\n        return this\r\n    },\r\n    remove: function() {\r\n        var element = this.element;\r\n        element.parentNode && element.parentNode.removeChild(element);\r\n        return this\r\n    },\r\n    enableLinks: function() {\r\n        this._links = [];\r\n        return this\r\n    },\r\n    virtualLink: function(parameters) {\r\n        linkItem({\r\n            _link: buildLink(null, parameters)\r\n        }, this);\r\n        return this\r\n    },\r\n    linkAfter: function(name) {\r\n        this._linkAfter = name;\r\n        return this\r\n    },\r\n    linkOn: function(target, parameters) {\r\n        this._link = buildLink(target, parameters);\r\n        linkItem(this, target);\r\n        return this\r\n    },\r\n    linkOff: function() {\r\n        unlinkItem(this);\r\n        this._link = null;\r\n        return this\r\n    },\r\n    linkAppend: function() {\r\n        var link = this._link;\r\n        var items = link.to._links;\r\n        var i;\r\n        var next;\r\n        for (i = link.i + 1;\r\n            (next = items[i]) && !next._link.is; ++i) {}\r\n        this._insert(link.to, next);\r\n        link.is = true;\r\n        return this\r\n    },\r\n    _insert: function(parent, next) {\r\n        parent.element.insertBefore(this.element, next ? next.element : null)\r\n    },\r\n    linkRemove: function() {\r\n        this.remove();\r\n        this._link.is = false;\r\n        return this\r\n    },\r\n    clear: function() {\r\n        this._clearChildrenFuncIri();\r\n        this._getJQElement().empty();\r\n        return this\r\n    },\r\n    toBackground: function() {\r\n        var elem = this.element;\r\n        var parent = elem.parentNode;\r\n        parent && parent.insertBefore(elem, parent.firstChild);\r\n        return this\r\n    },\r\n    toForeground: function() {\r\n        var elem = this.element;\r\n        var parent = elem.parentNode;\r\n        parent && parent.appendChild(elem);\r\n        return this\r\n    },\r\n    attr: function(attrs) {\r\n        return baseAttr(this, attrs)\r\n    },\r\n    smartAttr: function(attrs) {\r\n        return this.attr(processHatchingAttrs(this, attrs))\r\n    },\r\n    css: function(styles) {\r\n        return baseCss(this, styles)\r\n    },\r\n    animate: function(params, options, complete) {\r\n        return baseAnimate(this, params, options, complete)\r\n    },\r\n    sharp(pos, sharpDirection) {\r\n        return this.attr({\r\n            sharp: pos || true,\r\n            sharpDirection: sharpDirection\r\n        })\r\n    },\r\n    _applyTransformation() {\r\n        var tr = this._settings;\r\n        var rotateX;\r\n        var rotateY;\r\n        var transformations = [];\r\n        var sharpMode = tr.sharp;\r\n        var trDirection = tr.sharpDirection || 1;\r\n        var strokeOdd = tr[KEY_STROKE_WIDTH] % 2;\r\n        var correctionX = strokeOdd && (\"h\" === sharpMode || true === sharpMode) ? SHARPING_CORRECTION * trDirection : 0;\r\n        var correctionY = strokeOdd && (\"v\" === sharpMode || true === sharpMode) ? SHARPING_CORRECTION * trDirection : 0;\r\n        transformations.push(\"translate(\" + ((tr.translateX || 0) + correctionX) + \",\" + ((tr.translateY || 0) + correctionY) + \")\");\r\n        if (tr.rotate) {\r\n            if (\"rotateX\" in tr) {\r\n                rotateX = tr.rotateX\r\n            } else {\r\n                rotateX = tr.x\r\n            }\r\n            if (\"rotateY\" in tr) {\r\n                rotateY = tr.rotateY\r\n            } else {\r\n                rotateY = tr.y\r\n            }\r\n            transformations.push(\"rotate(\" + tr.rotate + \",\" + (rotateX || 0) + \",\" + (rotateY || 0) + \")\")\r\n        }\r\n        var scaleXDefined = isDefined(tr.scaleX);\r\n        var scaleYDefined = isDefined(tr.scaleY);\r\n        if (scaleXDefined || scaleYDefined) {\r\n            transformations.push(\"scale(\" + (scaleXDefined ? tr.scaleX : 1) + \",\" + (scaleYDefined ? tr.scaleY : 1) + \")\")\r\n        }\r\n        if (transformations.length) {\r\n            this.element.setAttribute(\"transform\", transformations.join(\" \"))\r\n        }\r\n    },\r\n    move: function(x, y, animate, animOptions) {\r\n        var obj = {};\r\n        isDefined(x) && (obj.translateX = x);\r\n        isDefined(y) && (obj.translateY = y);\r\n        if (!animate) {\r\n            this.attr(obj)\r\n        } else {\r\n            this.animate(obj, animOptions)\r\n        }\r\n        return this\r\n    },\r\n    rotate: function(angle, x, y, animate, animOptions) {\r\n        var obj = {\r\n            rotate: angle || 0\r\n        };\r\n        isDefined(x) && (obj.rotateX = x);\r\n        isDefined(y) && (obj.rotateY = y);\r\n        if (!animate) {\r\n            this.attr(obj)\r\n        } else {\r\n            this.animate(obj, animOptions)\r\n        }\r\n        return this\r\n    },\r\n    _getElementBBox: function() {\r\n        var elem = this.element;\r\n        var bBox;\r\n        try {\r\n            bBox = elem.getBBox && elem.getBBox()\r\n        } catch (e) {}\r\n        return bBox || {\r\n            x: 0,\r\n            y: 0,\r\n            width: elem.offsetWidth || 0,\r\n            height: elem.offsetHeight || 0\r\n        }\r\n    },\r\n    getBBox: function() {\r\n        var transformation = this._settings;\r\n        var bBox = this._getElementBBox();\r\n        if (transformation.rotate) {\r\n            bBox = rotateBBox(bBox, [(\"rotateX\" in transformation ? transformation.rotateX : transformation.x) || 0, (\"rotateY\" in transformation ? transformation.rotateY : transformation.y) || 0], -transformation.rotate)\r\n        } else {\r\n            bBox = normalizeBBox(bBox)\r\n        }\r\n        return bBox\r\n    },\r\n    markup: function() {\r\n        return getSvgMarkup(this.element)\r\n    },\r\n    getOffset: function() {\r\n        return this._getJQElement().offset()\r\n    },\r\n    stopAnimation: function(disableComplete) {\r\n        var animation = this.animation;\r\n        animation && animation.stop(disableComplete);\r\n        return this\r\n    },\r\n    setTitle: function(text) {\r\n        var titleElem = createElement(\"title\");\r\n        titleElem.textContent = text || \"\";\r\n        this.element.appendChild(titleElem)\r\n    },\r\n    removeTitle() {\r\n        detachTitleElements(this.element)\r\n    },\r\n    data: function(obj, val) {\r\n        var elem = this.element;\r\n        var key;\r\n        if (void 0 !== val) {\r\n            elem[obj] = val\r\n        } else {\r\n            for (key in obj) {\r\n                elem[key] = obj[key]\r\n            }\r\n        }\r\n        return this\r\n    },\r\n    on: function() {\r\n        var args = [this._getJQElement()];\r\n        args.push.apply(args, arguments);\r\n        eventsEngine.on.apply(eventsEngine, args);\r\n        return this\r\n    },\r\n    off: function() {\r\n        var args = [this._getJQElement()];\r\n        args.push.apply(args, arguments);\r\n        eventsEngine.off.apply(eventsEngine, args);\r\n        return this\r\n    },\r\n    trigger: function() {\r\n        var args = [this._getJQElement()];\r\n        args.push.apply(args, arguments);\r\n        eventsEngine.trigger.apply(eventsEngine, args);\r\n        return this\r\n    }\r\n};\r\nexport var PathSvgElement = function(renderer, type) {\r\n    SvgElement.call(this, renderer, \"path\", type)\r\n};\r\nPathSvgElement.prototype = objectCreate(SvgElement.prototype);\r\nextend(PathSvgElement.prototype, {\r\n    constructor: PathSvgElement,\r\n    attr: pathAttr,\r\n    animate: pathAnimate\r\n});\r\nexport var ArcSvgElement = function(renderer) {\r\n    SvgElement.call(this, renderer, \"path\", \"arc\")\r\n};\r\nArcSvgElement.prototype = objectCreate(SvgElement.prototype);\r\nextend(ArcSvgElement.prototype, {\r\n    constructor: ArcSvgElement,\r\n    attr: arcAttr,\r\n    animate: arcAnimate\r\n});\r\nexport var RectSvgElement = function(renderer) {\r\n    SvgElement.call(this, renderer, \"rect\")\r\n};\r\nRectSvgElement.prototype = objectCreate(SvgElement.prototype);\r\nextend(RectSvgElement.prototype, {\r\n    constructor: RectSvgElement,\r\n    attr: rectAttr\r\n});\r\nexport var TextSvgElement = function(renderer) {\r\n    SvgElement.call(this, renderer, \"text\");\r\n    this.css({\r\n        \"white-space\": \"pre\"\r\n    })\r\n};\r\nTextSvgElement.prototype = objectCreate(SvgElement.prototype);\r\nextend(TextSvgElement.prototype, {\r\n    constructor: TextSvgElement,\r\n    attr: textAttr,\r\n    css: textCss,\r\n    applyEllipsis: applyEllipsis,\r\n    setMaxSize: setMaxSize,\r\n    restoreText: restoreText,\r\n    _getLineHeight() {\r\n        return !isNaN(parseFloat(this._styles[KEY_FONT_SIZE])) ? this._styles[KEY_FONT_SIZE] : DEFAULT_FONT_SIZE\r\n    }\r\n});\r\n\r\nfunction updateIndexes(items, k) {\r\n    var i;\r\n    var item;\r\n    for (i = k; item = items[i]; ++i) {\r\n        item._link.i = i\r\n    }\r\n}\r\n\r\nfunction linkItem(target, container) {\r\n    var items = container._links;\r\n    var key = target._link.after = target._link.after || container._linkAfter;\r\n    var i;\r\n    var item;\r\n    if (key) {\r\n        for (i = 0;\r\n            (item = items[i]) && item._link.name !== key; ++i) {}\r\n        if (item) {\r\n            for (++i;\r\n                (item = items[i]) && item._link.after === key; ++i) {}\r\n        }\r\n    } else {\r\n        i = items.length\r\n    }\r\n    items.splice(i, 0, target);\r\n    updateIndexes(items, i)\r\n}\r\n\r\nfunction unlinkItem(target) {\r\n    var i;\r\n    var items = target._link.to._links;\r\n    for (i = 0; items[i] !== target; ++i) {}\r\n    items.splice(i, 1);\r\n    updateIndexes(items, i)\r\n}\r\nexport function Renderer(options) {\r\n    this.root = this._createElement(\"svg\", {\r\n        xmlns: \"http://www.w3.org/2000/svg\",\r\n        version: \"1.1\",\r\n        fill: NONE,\r\n        stroke: NONE,\r\n        \"stroke-width\": 0\r\n    }).attr({\r\n        class: options.cssClass\r\n    }).css({\r\n        \"line-height\": \"normal\",\r\n        \"-ms-user-select\": NONE,\r\n        \"-moz-user-select\": NONE,\r\n        \"-webkit-user-select\": NONE,\r\n        \"-webkit-tap-highlight-color\": \"rgba(0, 0, 0, 0)\",\r\n        display: \"block\",\r\n        overflow: \"hidden\"\r\n    });\r\n    this._init();\r\n    this.pathModified = !!options.pathModified;\r\n    this._$container = $(options.container);\r\n    this.root.append({\r\n        element: options.container\r\n    });\r\n    this.fixPlacement();\r\n    this._locker = 0;\r\n    this._backed = false\r\n}\r\nRenderer.prototype = {\r\n    constructor: Renderer,\r\n    _init: function() {\r\n        this._defs = this._createElement(\"defs\").append(this.root);\r\n        this._animationController = new AnimationController(this.root.element);\r\n        this._animation = {\r\n            enabled: true,\r\n            duration: 1e3,\r\n            easing: \"easeOutCubic\"\r\n        }\r\n    },\r\n    fixPlacement: function() {\r\n        if (!browser.mozilla) {\r\n            return\r\n        }\r\n        var box = getBoundingClientRect(this._$container.get(0));\r\n        var dx = roundValue(box.left % 1, 2);\r\n        var dy = roundValue(box.top % 1, 2);\r\n        if (browser.mozilla) {\r\n            this.root.move(-dx, -dy)\r\n        }\r\n    },\r\n    removePlacementFix: function() {\r\n        if (!browser.mozilla) {\r\n            return\r\n        }\r\n        if (browser.mozilla) {\r\n            this.root.attr({\r\n                transform: null\r\n            })\r\n        }\r\n    },\r\n    setOptions: function(options) {\r\n        this.rtl = !!options.rtl;\r\n        this.encodeHtml = !!options.encodeHtml;\r\n        this.updateAnimationOptions(options.animation || {});\r\n        this.root.attr({\r\n            direction: this.rtl ? \"rtl\" : \"ltr\"\r\n        });\r\n        return this\r\n    },\r\n    _createElement: function(tagName, attr, type) {\r\n        var elem = new SvgElement(this, tagName, type);\r\n        attr && elem.attr(attr);\r\n        return elem\r\n    },\r\n    lock: function() {\r\n        if (0 === this._locker) {\r\n            this._backed = !this._$container.is(\":visible\");\r\n            if (this._backed) {\r\n                backupRoot(this.root)\r\n            }\r\n        }++this._locker;\r\n        return this\r\n    },\r\n    unlock: function() {\r\n        --this._locker;\r\n        if (0 === this._locker) {\r\n            if (this._backed) {\r\n                restoreRoot(this.root, this._$container[0]);\r\n                this.fixPlacement()\r\n            }\r\n            this._backed = false\r\n        }\r\n        return this\r\n    },\r\n    resize: function(width, height) {\r\n        if (width >= 0 && height >= 0) {\r\n            this.root.attr({\r\n                width: width,\r\n                height: height\r\n            })\r\n        }\r\n        return this\r\n    },\r\n    dispose: function() {\r\n        var key;\r\n        this.root.dispose();\r\n        this._defs.dispose();\r\n        this._animationController.dispose();\r\n        fixFuncIriCallbacks.removeByRenderer(this);\r\n        for (key in this) {\r\n            this[key] = null\r\n        }\r\n        return this\r\n    },\r\n    animationEnabled: function() {\r\n        return !!this._animation.enabled\r\n    },\r\n    updateAnimationOptions: function(newOptions) {\r\n        extend(this._animation, newOptions);\r\n        return this\r\n    },\r\n    stopAllAnimations: function(lock) {\r\n        this._animationController[lock ? \"lock\" : \"stop\"]();\r\n        return this\r\n    },\r\n    animateElement: function(element, params, options) {\r\n        this._animationController.animateElement(element, params, options);\r\n        return this\r\n    },\r\n    svg: function() {\r\n        this.removePlacementFix();\r\n        var markup = this.root.markup();\r\n        this.fixPlacement();\r\n        return markup\r\n    },\r\n    getRootOffset: function() {\r\n        return this.root.getOffset()\r\n    },\r\n    onEndAnimation: function(endAnimation) {\r\n        this._animationController.onEndAnimation(endAnimation)\r\n    },\r\n    rect: function(x, y, width, height) {\r\n        var elem = new RectSvgElement(this);\r\n        return elem.attr({\r\n            x: x || 0,\r\n            y: y || 0,\r\n            width: width || 0,\r\n            height: height || 0\r\n        })\r\n    },\r\n    simpleRect: function() {\r\n        return this._createElement(\"rect\")\r\n    },\r\n    circle: function(x, y, r) {\r\n        return this._createElement(\"circle\", {\r\n            cx: x || 0,\r\n            cy: y || 0,\r\n            r: r || 0\r\n        })\r\n    },\r\n    g: function() {\r\n        return this._createElement(\"g\")\r\n    },\r\n    image: function(x, y, w, h, href, location) {\r\n        var image = this._createElement(\"image\", {\r\n            x: x || 0,\r\n            y: y || 0,\r\n            width: w || 0,\r\n            height: h || 0,\r\n            preserveAspectRatio: preserveAspectRatioMap[normalizeEnum(location)] || NONE\r\n        });\r\n        image.element.setAttributeNS(\"http://www.w3.org/1999/xlink\", \"href\", href || \"\");\r\n        return image\r\n    },\r\n    path: function(points, type) {\r\n        var elem = new PathSvgElement(this, type);\r\n        return elem.attr({\r\n            points: points || []\r\n        })\r\n    },\r\n    arc: function(x, y, innerRadius, outerRadius, startAngle, endAngle) {\r\n        var elem = new ArcSvgElement(this);\r\n        return elem.attr({\r\n            x: x || 0,\r\n            y: y || 0,\r\n            innerRadius: innerRadius || 0,\r\n            outerRadius: outerRadius || 0,\r\n            startAngle: startAngle || 0,\r\n            endAngle: endAngle || 0\r\n        })\r\n    },\r\n    text: function(_text, x, y) {\r\n        var elem = new TextSvgElement(this);\r\n        return elem.attr({\r\n            text: _text,\r\n            x: x || 0,\r\n            y: y || 0\r\n        })\r\n    },\r\n    linearGradient: function(stops) {\r\n        var id = getNextDefsSvgId();\r\n        var that = this;\r\n        var gradient = that._createElement(\"linearGradient\", {\r\n            id: id\r\n        }).append(that._defs);\r\n        gradient.id = id;\r\n        stops.forEach(stop => {\r\n            that._createElement(\"stop\", {\r\n                offset: stop.offset,\r\n                \"stop-color\": stop[\"stop-color\"]\r\n            }).append(gradient)\r\n        });\r\n        return gradient\r\n    },\r\n    pattern: function(color, hatching, _id) {\r\n        hatching = hatching || {};\r\n        var step = hatching.step || 6;\r\n        var stepTo2 = step / 2;\r\n        var stepBy15 = 1.5 * step;\r\n        var id = _id || getNextDefsSvgId();\r\n        var d = \"right\" === normalizeEnum(hatching.direction) ? \"M \" + stepTo2 + \" \" + -stepTo2 + \" L \" + -stepTo2 + \" \" + stepTo2 + \" M 0 \" + step + \" L \" + step + \" 0 M \" + stepBy15 + \" \" + stepTo2 + \" L \" + stepTo2 + \" \" + stepBy15 : \"M 0 0 L \" + step + \" \" + step + \" M \" + -stepTo2 + \" \" + stepTo2 + \" L \" + stepTo2 + \" \" + stepBy15 + \" M \" + stepTo2 + \" \" + -stepTo2 + \" L \" + stepBy15 + \" \" + stepTo2;\r\n        var pattern = this._createElement(\"pattern\", {\r\n            id: id,\r\n            width: step,\r\n            height: step,\r\n            patternUnits: \"userSpaceOnUse\"\r\n        }).append(this._defs);\r\n        pattern.id = id;\r\n        this.rect(0, 0, step, step).attr({\r\n            fill: color,\r\n            opacity: hatching.opacity\r\n        }).append(pattern);\r\n        new PathSvgElement(this).attr({\r\n            d: d,\r\n            \"stroke-width\": hatching.width || 1,\r\n            stroke: color\r\n        }).append(pattern);\r\n        return pattern\r\n    },\r\n    _getPointsWithYOffset: function(points, offset) {\r\n        return points.map((function(point, index) {\r\n            if (index % 2 !== 0) {\r\n                return point + offset\r\n            }\r\n            return point\r\n        }))\r\n    },\r\n    clipShape: function(method, methodArgs) {\r\n        var id = getNextDefsSvgId();\r\n        var clipPath = this._createElement(\"clipPath\", {\r\n            id: id\r\n        }).append(this._defs);\r\n        var shape = method.apply(this, methodArgs).append(clipPath);\r\n        shape.id = id;\r\n        shape.remove = function() {\r\n            throw \"Not implemented\"\r\n        };\r\n        shape.dispose = function() {\r\n            clipPath.dispose();\r\n            clipPath = null;\r\n            return this\r\n        };\r\n        return shape\r\n    },\r\n    clipRect(x, y, width, height) {\r\n        return this.clipShape(this.rect, arguments)\r\n    },\r\n    clipCircle(x, y, radius) {\r\n        return this.clipShape(this.circle, arguments)\r\n    },\r\n    shadowFilter: function(x, y, width, height, offsetX, offsetY, blur, color, opacity) {\r\n        var id = getNextDefsSvgId();\r\n        var filter = this._createElement(\"filter\", {\r\n            id: id,\r\n            x: x || 0,\r\n            y: y || 0,\r\n            width: width || 0,\r\n            height: height || 0\r\n        }).append(this._defs);\r\n        var gaussianBlur = this._createElement(\"feGaussianBlur\", {\r\n            in: \"SourceGraphic\",\r\n            result: \"gaussianBlurResult\",\r\n            stdDeviation: blur || 0\r\n        }).append(filter);\r\n        var offset = this._createElement(\"feOffset\", {\r\n            in: \"gaussianBlurResult\",\r\n            result: \"offsetResult\",\r\n            dx: offsetX || 0,\r\n            dy: offsetY || 0\r\n        }).append(filter);\r\n        var flood = this._createElement(\"feFlood\", {\r\n            result: \"floodResult\",\r\n            \"flood-color\": color || \"\",\r\n            \"flood-opacity\": opacity\r\n        }).append(filter);\r\n        var composite = this._createElement(\"feComposite\", {\r\n            in: \"floodResult\",\r\n            in2: \"offsetResult\",\r\n            operator: \"in\",\r\n            result: \"compositeResult\"\r\n        }).append(filter);\r\n        var finalComposite = this._createElement(\"feComposite\", {\r\n            in: \"SourceGraphic\",\r\n            in2: \"compositeResult\",\r\n            operator: \"over\"\r\n        }).append(filter);\r\n        filter.id = id;\r\n        filter.gaussianBlur = gaussianBlur;\r\n        filter.offset = offset;\r\n        filter.flood = flood;\r\n        filter.composite = composite;\r\n        filter.finalComposite = finalComposite;\r\n        filter.attr = function(attrs) {\r\n            var filterAttrs = {};\r\n            var offsetAttrs = {};\r\n            var floodAttrs = {};\r\n            \"x\" in attrs && (filterAttrs.x = attrs.x);\r\n            \"y\" in attrs && (filterAttrs.y = attrs.y);\r\n            \"width\" in attrs && (filterAttrs.width = attrs.width);\r\n            \"height\" in attrs && (filterAttrs.height = attrs.height);\r\n            baseAttr(this, filterAttrs);\r\n            \"blur\" in attrs && this.gaussianBlur.attr({\r\n                stdDeviation: attrs.blur\r\n            });\r\n            \"offsetX\" in attrs && (offsetAttrs.dx = attrs.offsetX);\r\n            \"offsetY\" in attrs && (offsetAttrs.dy = attrs.offsetY);\r\n            this.offset.attr(offsetAttrs);\r\n            \"color\" in attrs && (floodAttrs[\"flood-color\"] = attrs.color);\r\n            \"opacity\" in attrs && (floodAttrs[\"flood-opacity\"] = attrs.opacity);\r\n            this.flood.attr(floodAttrs);\r\n            return this\r\n        };\r\n        return filter\r\n    },\r\n    brightFilter: function(type, slope) {\r\n        var id = getNextDefsSvgId();\r\n        var filter = this._createElement(\"filter\", {\r\n            id: id\r\n        }).append(this._defs);\r\n        var componentTransferElement = this._createElement(\"feComponentTransfer\").append(filter);\r\n        var attrs = {\r\n            type: type,\r\n            slope: slope\r\n        };\r\n        filter.id = id;\r\n        this._createElement(\"feFuncR\", attrs).append(componentTransferElement);\r\n        this._createElement(\"feFuncG\", attrs).append(componentTransferElement);\r\n        this._createElement(\"feFuncB\", attrs).append(componentTransferElement);\r\n        return filter\r\n    },\r\n    getGrayScaleFilter: function() {\r\n        if (this._grayScaleFilter) {\r\n            return this._grayScaleFilter\r\n        }\r\n        var id = getNextDefsSvgId();\r\n        var filter = this._createElement(\"filter\", {\r\n            id: id\r\n        }).append(this._defs);\r\n        this._createElement(\"feColorMatrix\").attr({\r\n            type: \"matrix\",\r\n            values: \"0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 0.6 0\"\r\n        }).append(filter);\r\n        filter.id = id;\r\n        this._grayScaleFilter = filter;\r\n        return filter\r\n    },\r\n    initHatching: function() {\r\n        var storage = this._hatchingStorage = this._hatchingStorage || {\r\n            byHash: {},\r\n            baseId: getNextDefsSvgId()\r\n        };\r\n        var byHash = storage.byHash;\r\n        var name;\r\n        for (name in byHash) {\r\n            byHash[name].pattern.dispose()\r\n        }\r\n        storage.byHash = {};\r\n        storage.refToHash = {};\r\n        storage.nextId = 0\r\n    },\r\n    lockHatching: function(color, hatching, ref) {\r\n        var storage = this._hatchingStorage;\r\n        var hash = getHatchingHash(color, hatching);\r\n        var storageItem;\r\n        var pattern;\r\n        if (storage.refToHash[ref] !== hash) {\r\n            if (ref) {\r\n                this.releaseHatching(ref)\r\n            }\r\n            storageItem = storage.byHash[hash];\r\n            if (!storageItem) {\r\n                pattern = this.pattern(color, hatching, storage.baseId + \"-hatching-\" + storage.nextId++);\r\n                storageItem = storage.byHash[hash] = {\r\n                    pattern: pattern,\r\n                    count: 0\r\n                };\r\n                storage.refToHash[pattern.id] = hash\r\n            }++storageItem.count;\r\n            ref = storageItem.pattern.id\r\n        }\r\n        return ref\r\n    },\r\n    releaseHatching: function(ref) {\r\n        var storage = this._hatchingStorage;\r\n        var hash = storage.refToHash[ref];\r\n        var storageItem = storage.byHash[hash];\r\n        if (storageItem && 0 === --storageItem.count) {\r\n            storageItem.pattern.dispose();\r\n            delete storage.byHash[hash];\r\n            delete storage.refToHash[ref]\r\n        }\r\n    }\r\n};\r\n\r\nfunction getHatchingHash(color, hatching) {\r\n    return \"@\" + color + \"::\" + hatching.step + \":\" + hatching.width + \":\" + hatching.opacity + \":\" + hatching.direction\r\n}\r\nvar fixFuncIriCallbacks = function() {\r\n    var callbacks = [];\r\n    return {\r\n        add: function(fn) {\r\n            callbacks.push(fn)\r\n        },\r\n        remove: function(fn) {\r\n            callbacks = callbacks.filter((function(el) {\r\n                return el !== fn\r\n            }))\r\n        },\r\n        removeByRenderer: function(renderer) {\r\n            callbacks = callbacks.filter((function(el) {\r\n                return el.renderer !== renderer\r\n            }))\r\n        },\r\n        fire: function() {\r\n            callbacks.forEach((function(fn) {\r\n                fn()\r\n            }))\r\n        }\r\n    }\r\n}();\r\nexport var refreshPaths = function() {\r\n    fixFuncIriCallbacks.fire()\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}