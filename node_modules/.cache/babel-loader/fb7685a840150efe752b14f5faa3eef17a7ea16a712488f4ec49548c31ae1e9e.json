{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/**\r\n * DevExtreme (esm/viz/components/legend.js)\r\n * Version: 22.1.6\r\n * Build date: Tue Oct 18 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { enumParser, normalizeEnum, patchFontOptions } from \"../core/utils\";\nimport { extend } from \"../../core/utils/extend\";\nimport { LayoutElement, WrapperLayoutElement } from \"../core/layout_element\";\nimport { isDefined, isFunction } from \"../../core/utils/type\";\nimport { Title } from \"../core/title\";\nimport { clone } from \"../../core/utils/object\";\nimport { noop } from \"../../core/utils/common\";\nimport { processHatchingAttrs, getFuncIri } from \"../core/renderers/renderer\";\nimport { Deferred } from \"../../core/utils/deferred\";\nvar _Number = Number;\nvar _math = Math;\nvar _round = _math.round;\nvar _max = _math.max;\nvar _min = _math.min;\nvar _ceil = _math.ceil;\nvar _isDefined = isDefined;\nvar _isFunction = isFunction;\nvar _enumParser = enumParser;\nvar _normalizeEnum = normalizeEnum;\nvar _extend = extend;\nvar DEFAULT_MARGIN = 10;\nvar DEFAULT_MARKER_HATCHING_WIDTH = 2;\nvar DEFAULT_MARKER_HATCHING_STEP = 5;\nvar CENTER = \"center\";\nvar RIGHT = \"right\";\nvar LEFT = \"left\";\nvar TOP = \"top\";\nvar BOTTOM = \"bottom\";\nvar HORIZONTAL = \"horizontal\";\nvar VERTICAL = \"vertical\";\nvar INSIDE = \"inside\";\nvar OUTSIDE = \"outside\";\nvar NONE = \"none\";\nvar HEIGHT = \"height\";\nvar WIDTH = \"width\";\nvar parseHorizontalAlignment = _enumParser([LEFT, CENTER, RIGHT]);\nvar parseVerticalAlignment = _enumParser([TOP, BOTTOM]);\nvar parseOrientation = _enumParser([VERTICAL, HORIZONTAL]);\nvar parseItemTextPosition = _enumParser([LEFT, RIGHT, TOP, BOTTOM]);\nvar parsePosition = _enumParser([OUTSIDE, INSIDE]);\nvar parseItemsAlignment = _enumParser([LEFT, CENTER, RIGHT]);\nfunction getState(state, color, stateName) {\n  if (!state) {\n    return;\n  }\n  var colorFromAction = state.fill;\n  return extend({}, {\n    state: stateName,\n    fill: colorFromAction === NONE ? color : colorFromAction,\n    opacity: state.opacity,\n    hatching: _extend({}, state.hatching, {\n      step: DEFAULT_MARKER_HATCHING_STEP,\n      width: DEFAULT_MARKER_HATCHING_WIDTH\n    })\n  });\n}\nfunction getAttributes(item, state, size) {\n  var attrs = processHatchingAttrs(item, state);\n  if (attrs.fill && 0 === attrs.fill.indexOf(\"DevExpress\")) {\n    attrs.fill = getFuncIri(attrs.fill);\n  }\n  attrs.opacity = attrs.opacity >= 0 ? attrs.opacity : 1;\n  return extend({}, attrs, {\n    size: size\n  });\n}\nfunction parseMargins(options) {\n  var margin = options.margin;\n  if (margin >= 0) {\n    margin = _Number(options.margin);\n    margin = {\n      top: margin,\n      bottom: margin,\n      left: margin,\n      right: margin\n    };\n  } else {\n    margin = {\n      top: margin.top >= 0 ? _Number(margin.top) : DEFAULT_MARGIN,\n      bottom: margin.bottom >= 0 ? _Number(margin.bottom) : DEFAULT_MARGIN,\n      left: margin.left >= 0 ? _Number(margin.left) : DEFAULT_MARGIN,\n      right: margin.right >= 0 ? _Number(margin.right) : DEFAULT_MARGIN\n    };\n  }\n  options.margin = margin;\n}\nfunction getSizeItem(options, markerBBox, labelBBox) {\n  var width;\n  var height;\n  switch (options.itemTextPosition) {\n    case LEFT:\n    case RIGHT:\n      width = markerBBox.width + 7 + labelBBox.width;\n      height = _max(markerBBox.height, labelBBox.height);\n      break;\n    case TOP:\n    case BOTTOM:\n      width = _max(markerBBox.width, labelBBox.width);\n      height = markerBBox.height + 4 + labelBBox.height;\n  }\n  return {\n    width: width,\n    height: height\n  };\n}\nfunction calculateBBoxLabelAndMarker(markerBBox, labelBBox) {\n  var bBox = {};\n  bBox.left = _min(markerBBox.x, labelBBox.x);\n  bBox.top = _min(markerBBox.y, labelBBox.y);\n  bBox.right = _max(markerBBox.x + markerBBox.width, labelBBox.x + labelBBox.width);\n  bBox.bottom = _max(markerBBox.y + markerBBox.height, labelBBox.y + labelBBox.height);\n  return bBox;\n}\nfunction applyMarkerState(id, idToIndexMap, items, stateName) {\n  var item = idToIndexMap && items[idToIndexMap[id]];\n  if (item) {\n    item.renderMarker(item.states[stateName]);\n  }\n}\nfunction parseOptions(options, textField, allowInsidePosition) {\n  if (!options) {\n    return null;\n  }\n  parseMargins(options);\n  options.horizontalAlignment = parseHorizontalAlignment(options.horizontalAlignment, RIGHT);\n  options.verticalAlignment = parseVerticalAlignment(options.verticalAlignment, options.horizontalAlignment === CENTER ? BOTTOM : TOP);\n  options.orientation = parseOrientation(options.orientation, options.horizontalAlignment === CENTER ? HORIZONTAL : VERTICAL);\n  options.itemTextPosition = parseItemTextPosition(options.itemTextPosition, options.orientation === HORIZONTAL ? BOTTOM : RIGHT);\n  options.position = allowInsidePosition ? parsePosition(options.position, OUTSIDE) : OUTSIDE;\n  options.itemsAlignment = parseItemsAlignment(options.itemsAlignment, null);\n  options.hoverMode = _normalizeEnum(options.hoverMode);\n  options.customizeText = _isFunction(options.customizeText) ? options.customizeText : function () {\n    return this[textField];\n  };\n  options.customizeHint = _isFunction(options.customizeHint) ? options.customizeHint : noop;\n  options._incidentOccurred = options._incidentOccurred || noop;\n  return options;\n}\nfunction createSquareMarker(renderer, size) {\n  return renderer.rect(0, 0, size, size);\n}\nfunction createCircleMarker(renderer, size) {\n  return renderer.circle(size / 2, size / 2, size / 2);\n}\nfunction isCircle(type) {\n  return \"circle\" === _normalizeEnum(type);\n}\nfunction inRect(rect, x, y) {\n  return x >= rect.left && x <= rect.right && y >= rect.top && y <= rect.bottom;\n}\nfunction checkLinesSize(lines, layoutOptions, countItems, margins) {\n  var position = {\n    x: 0,\n    y: 0\n  };\n  var maxMeasureLength = 0;\n  var maxAltMeasureLength = 0;\n  var margin = 0;\n  if (\"y\" === layoutOptions.direction) {\n    margin = margins.top + margins.bottom;\n  } else {\n    margin = margins.left + margins.right;\n  }\n  lines.forEach(function (line, i) {\n    var firstItem = line[0];\n    var lineLength = line.length;\n    line.forEach(function (item, index) {\n      var offset = item.offset || layoutOptions.spacing;\n      position[layoutOptions.direction] += item[layoutOptions.measure] + (index !== lineLength - 1 ? offset : 0);\n      maxMeasureLength = _max(maxMeasureLength, position[layoutOptions.direction]);\n    });\n    position[layoutOptions.direction] = 0;\n    position[layoutOptions.altDirection] += firstItem[layoutOptions.altMeasure] + firstItem.altOffset || layoutOptions.altSpacing;\n    maxAltMeasureLength = _max(maxAltMeasureLength, position[layoutOptions.altDirection]);\n  });\n  if (maxMeasureLength + margin > layoutOptions.length) {\n    layoutOptions.countItem = decreaseItemCount(layoutOptions, countItems);\n    return true;\n  }\n}\nfunction decreaseItemCount(layoutOptions, countItems) {\n  layoutOptions.altCountItem++;\n  return _ceil(countItems / layoutOptions.altCountItem);\n}\nfunction getLineLength(line, layoutOptions) {\n  return line.reduce((lineLength, item) => {\n    var offset = item.offset || layoutOptions.spacing;\n    return lineLength + item[layoutOptions.measure] + offset;\n  }, 0);\n}\nfunction getMaxLineLength(lines, layoutOptions) {\n  return lines.reduce((maxLineLength, line) => _max(maxLineLength, getLineLength(line, layoutOptions)), 0);\n}\nfunction getInitPositionForDirection(line, layoutOptions, maxLineLength) {\n  var lineLength = getLineLength(line, layoutOptions);\n  var initPosition;\n  switch (layoutOptions.itemsAlignment) {\n    case RIGHT:\n      initPosition = maxLineLength - lineLength;\n      break;\n    case CENTER:\n      initPosition = (maxLineLength - lineLength) / 2;\n      break;\n    default:\n      initPosition = 0;\n  }\n  return initPosition;\n}\nfunction getPos(layoutOptions) {\n  switch (layoutOptions.itemTextPosition) {\n    case BOTTOM:\n      return {\n        horizontal: CENTER,\n        vertical: TOP\n      };\n    case TOP:\n      return {\n        horizontal: CENTER,\n        vertical: BOTTOM\n      };\n    case LEFT:\n      return {\n        horizontal: RIGHT,\n        vertical: CENTER\n      };\n    case RIGHT:\n      return {\n        horizontal: LEFT,\n        vertical: CENTER\n      };\n  }\n}\nfunction getLines(lines, layoutOptions, itemIndex) {\n  var tableLine = {};\n  if (itemIndex % layoutOptions.countItem === 0) {\n    if (layoutOptions.markerOffset) {\n      lines.push([], []);\n    } else {\n      lines.push([]);\n    }\n  }\n  if (layoutOptions.markerOffset) {\n    tableLine.firstLine = lines[lines.length - 1];\n    tableLine.secondLine = lines[lines.length - 2];\n  } else {\n    tableLine.firstLine = tableLine.secondLine = lines[lines.length - 1];\n  }\n  return tableLine;\n}\nfunction setMaxInLine(line, measure) {\n  var maxLineSize = line.reduce((maxLineSize, item) => {\n    var itemMeasure = item ? item[measure] : maxLineSize;\n    return _max(maxLineSize, itemMeasure);\n  }, 0);\n  line.forEach(item => {\n    if (item) {\n      item[measure] = maxLineSize;\n    }\n  });\n}\nfunction transpose(array) {\n  var width = array.length;\n  var height = array[0].length;\n  var i;\n  var j;\n  var transposeArray = [];\n  for (i = 0; i < height; i++) {\n    transposeArray[i] = [];\n    for (j = 0; j < width; j++) {\n      transposeArray[i][j] = array[j][i];\n    }\n  }\n  return transposeArray;\n}\nfunction getAlign(position) {\n  switch (position) {\n    case TOP:\n    case BOTTOM:\n      return CENTER;\n    case LEFT:\n      return RIGHT;\n    case RIGHT:\n      return LEFT;\n  }\n}\nvar getMarkerCreator = function (type) {\n  return isCircle(type) ? createCircleMarker : createSquareMarker;\n};\nfunction getTitleHorizontalAlignment(options) {\n  if (options.horizontalAlignment === CENTER) {\n    return CENTER;\n  } else if (options.itemTextPosition === RIGHT) {\n    return LEFT;\n  } else if (options.itemTextPosition === LEFT) {\n    return RIGHT;\n  } else {\n    return CENTER;\n  }\n}\nexport var Legend = function (settings) {\n  this._renderer = settings.renderer;\n  this._legendGroup = settings.group;\n  this._backgroundClass = settings.backgroundClass;\n  this._itemGroupClass = settings.itemGroupClass;\n  this._textField = settings.textField;\n  this._getCustomizeObject = settings.getFormatObject;\n  this._titleGroupClass = settings.titleGroupClass;\n  this._allowInsidePosition = settings.allowInsidePosition;\n  this._widget = settings.widget;\n  this._updated = false;\n};\nvar _Legend = Legend;\nvar legendPrototype = _Legend.prototype = clone(LayoutElement.prototype);\nextend(legendPrototype, {\n  constructor: _Legend,\n  getOptions: function () {\n    return this._options;\n  },\n  update: function () {\n    var data = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [];\n    var options = arguments.length > 1 ? arguments[1] : void 0;\n    var themeManagerTitleOptions = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};\n    var that = this;\n    options = that._options = parseOptions(options, that._textField, that._allowInsidePosition) || {};\n    var initMarkerSize = options.markerSize;\n    this._updated = true;\n    this._data = data.map(dataItem => {\n      dataItem.size = _Number(dataItem.size > 0 ? dataItem.size : initMarkerSize);\n      dataItem.marker = getAttributes(dataItem, dataItem.states.normal);\n      Object.defineProperty(dataItem.marker, \"size\", {\n        get: () => dataItem.size,\n        set(value) {\n          dataItem.size = value;\n        }\n      });\n      Object.defineProperty(dataItem.marker, \"opacity\", {\n        get: () => dataItem.states.normal.opacity,\n        set(value) {\n          dataItem.states.normal.opacity = dataItem.states.hover.opacity = dataItem.states.selection.opacity = value;\n        }\n      });\n      return dataItem;\n    });\n    if (options.customizeItems) {\n      that._data = options.customizeItems(data.slice()) || data;\n    }\n    that._boundingRect = {\n      width: 0,\n      height: 0,\n      x: 0,\n      y: 0\n    };\n    if (that.isVisible() && !that._title) {\n      that._title = new Title({\n        renderer: that._renderer,\n        cssClass: that._titleGroupClass,\n        root: that._legendGroup\n      });\n    }\n    if (that._title) {\n      var titleOptions = options.title;\n      themeManagerTitleOptions.horizontalAlignment = getTitleHorizontalAlignment(options);\n      that._title.update(themeManagerTitleOptions, titleOptions);\n    }\n    this.erase();\n    return that;\n  },\n  isVisible: function () {\n    return this._options && this._options.visible;\n  },\n  draw: function (width, height) {\n    var items = this._getItemData();\n    this.erase();\n    if (!(this.isVisible() && items && items.length)) {\n      return this;\n    }\n    this._insideLegendGroup = this._renderer.g().enableLinks().append(this._legendGroup);\n    this._title.changeLink(this._insideLegendGroup);\n    this._createBackground();\n    if (this._title.hasText()) {\n      var horizontalPadding = this._background ? 2 * this._options.paddingLeftRight : 0;\n      this._title.draw(width - horizontalPadding, height);\n    }\n    this._markersGroup = this._renderer.g().attr({\n      class: this._itemGroupClass\n    }).append(this._insideLegendGroup);\n    this._createItems(items);\n    this._updateElementsPosition(width, height);\n    return this;\n  },\n  _measureElements: function () {\n    var options = this._options;\n    var maxBBoxHeight = 0;\n    this._items.forEach(item => {\n      var labelBBox = item.label.getBBox();\n      var markerBBox = item.marker.getBBox();\n      item.markerBBox = markerBBox;\n      item.markerSize = Math.max(markerBBox.width, markerBBox.height);\n      var bBox = getSizeItem(options, markerBBox, labelBBox);\n      item.labelBBox = labelBBox;\n      item.bBox = bBox;\n      maxBBoxHeight = _max(maxBBoxHeight, bBox.height);\n    });\n    if (options.equalRowHeight) {\n      this._items.forEach(item => item.bBox.height = maxBBoxHeight);\n    }\n  },\n  _updateElementsPosition: function (width, height) {\n    var options = this._options;\n    this._size = {\n      width: width,\n      height: height\n    };\n    this._measureElements();\n    this._locateElements(options);\n    this._finalUpdate(options);\n    var size = this.getLayoutOptions();\n    if (size.width > width || size.height > height) {\n      this.freeSpace();\n    }\n  },\n  _createItems: function (items) {\n    var that = this;\n    var options = that._options;\n    var renderer = that._renderer;\n    var createMarker = getMarkerCreator(options.markerShape);\n    that._markersId = {};\n    var templateFunction = !options.markerTemplate ? (dataItem, group) => {\n      var attrs = dataItem.marker;\n      createMarker(renderer, attrs.size).attr({\n        fill: attrs.fill,\n        opacity: attrs.opacity\n      }).append({\n        element: group\n      });\n    } : options.markerTemplate;\n    var template = that._widget._getTemplate(templateFunction);\n    var markersGroup = that._markersGroup;\n    markersGroup.css(patchFontOptions(options.font));\n    that._deferredItems = [];\n    that._templatesGroups = [];\n    that._items = (items || []).map((dataItem, i) => {\n      var stateOfDataItem = dataItem.states;\n      var normalState = stateOfDataItem.normal;\n      var normalStateFill = normalState.fill;\n      dataItem.size = dataItem.marker.size;\n      var states = {\n        normal: extend(normalState, {\n          fill: normalStateFill || options.markerColor || options.defaultColor,\n          state: \"normal\"\n        }),\n        hover: getState(stateOfDataItem.hover, normalStateFill, \"hovered\"),\n        selection: getState(stateOfDataItem.selection, normalStateFill, \"selected\")\n      };\n      dataItem.states = states;\n      var itemGroup = renderer.g().append(markersGroup);\n      var markerGroup = renderer.g().attr({\n        class: \"dxl-marker\"\n      }).append(itemGroup);\n      that._deferredItems[i] = new Deferred();\n      that._templatesGroups.push(markerGroup);\n      var item = {\n        label: that._createLabel(dataItem, itemGroup),\n        marker: markerGroup,\n        renderer: renderer,\n        group: itemGroup,\n        tracker: {\n          id: dataItem.id,\n          argument: dataItem.argument,\n          argumentIndex: dataItem.argumentIndex\n        },\n        states: states,\n        itemTextPosition: options.itemTextPosition,\n        markerOffset: 0,\n        bBoxes: [],\n        renderMarker(state) {\n          dataItem.marker = getAttributes(item, state, dataItem.size);\n          markerGroup.clear();\n          template.render({\n            model: dataItem,\n            container: markerGroup.element,\n            onRendered: that._deferredItems[i].resolve\n          });\n        }\n      };\n      item.renderMarker(states.normal);\n      that._createHint(dataItem, itemGroup);\n      if (void 0 !== dataItem.id) {\n        that._markersId[dataItem.id] = i;\n      }\n      return item;\n    });\n  },\n  getTemplatesGroups: function () {\n    return this._templatesGroups || [];\n  },\n  getTemplatesDef: function () {\n    return this._deferredItems || [];\n  },\n  _getItemData: function () {\n    var items = this._data || [];\n    var options = this._options || {};\n    if (options.inverted) {\n      items = items.slice().reverse();\n    }\n    return items.filter(i => i.visible);\n  },\n  _finalUpdate: function (options) {\n    this._adjustBackgroundSettings(options);\n    this._setBoundingRect(options.margin);\n  },\n  erase: function () {\n    var insideLegendGroup = this._insideLegendGroup;\n    insideLegendGroup && insideLegendGroup.dispose();\n    this._insideLegendGroup = this._markersGroup = this._x1 = this._x2 = this._y2 = this._y2 = null;\n    return this;\n  },\n  _locateElements: function (locationOptions) {\n    this._moveInInitialValues();\n    this._locateRowsColumns(locationOptions);\n  },\n  _moveInInitialValues: function () {\n    this._title.hasText() && this._title.move([0, 0]);\n    this._legendGroup && this._legendGroup.move(0, 0);\n    this._background && this._background.attr({\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0\n    });\n  },\n  applySelected: function (id) {\n    applyMarkerState(id, this._markersId, this._items, \"selection\");\n    return this;\n  },\n  applyHover: function (id) {\n    applyMarkerState(id, this._markersId, this._items, \"hover\");\n    return this;\n  },\n  resetItem: function (id) {\n    applyMarkerState(id, this._markersId, this._items, \"normal\");\n    return this;\n  },\n  _createLabel: function (data, group) {\n    var labelFormatObject = this._getCustomizeObject(data);\n    var options = this._options;\n    var align = getAlign(options.itemTextPosition);\n    var text = options.customizeText.call(labelFormatObject, labelFormatObject);\n    var fontStyle = _isDefined(data.textOpacity) ? {\n      color: options.font.color,\n      opacity: data.textOpacity\n    } : {};\n    return this._renderer.text(text, 0, 0).css(patchFontOptions(fontStyle)).attr({\n      align: align,\n      class: options.cssClass\n    }).append(group);\n  },\n  _createHint: function (data, group) {\n    var labelFormatObject = this._getCustomizeObject(data);\n    var text = this._options.customizeHint.call(labelFormatObject, labelFormatObject);\n    if (_isDefined(text) && \"\" !== text) {\n      group.setTitle(text);\n    }\n  },\n  _createBackground: function () {\n    var isInside = this._options.position === INSIDE;\n    var color = this._options.backgroundColor;\n    var fill = color || (isInside ? this._options.containerBackgroundColor : NONE);\n    if (this._options.border.visible || (isInside || color) && color !== NONE) {\n      this._background = this._renderer.rect(0, 0, 0, 0).attr({\n        fill: fill,\n        class: this._backgroundClass\n      }).append(this._insideLegendGroup);\n    }\n  },\n  _locateRowsColumns: function (options) {\n    var iteration = 0;\n    var layoutOptions = this._getItemsLayoutOptions();\n    var countItems = this._items.length;\n    var lines;\n    do {\n      lines = [];\n      this._createLines(lines, layoutOptions);\n      this._alignLines(lines, layoutOptions);\n      iteration++;\n    } while (checkLinesSize(lines, layoutOptions, countItems, options.margin) && iteration < countItems);\n    this._applyItemPosition(lines, layoutOptions);\n  },\n  _createLines: function (lines, layoutOptions) {\n    this._items.forEach((item, i) => {\n      var tableLine = getLines(lines, layoutOptions, i);\n      var labelBox = {\n        width: item.labelBBox.width,\n        height: item.labelBBox.height,\n        element: item.label,\n        bBox: item.labelBBox,\n        pos: getPos(layoutOptions),\n        itemIndex: i\n      };\n      var markerBox = {\n        width: item.markerBBox.width,\n        height: item.markerBBox.height,\n        element: item.marker,\n        pos: {\n          horizontal: CENTER,\n          vertical: CENTER\n        },\n        bBox: {\n          width: item.markerBBox.width,\n          height: item.markerBBox.height,\n          x: item.markerBBox.x,\n          y: item.markerBBox.y\n        },\n        itemIndex: i\n      };\n      var firstItem;\n      var secondItem;\n      var offsetDirection = layoutOptions.markerOffset ? \"altOffset\" : \"offset\";\n      if (layoutOptions.inverseLabelPosition) {\n        firstItem = labelBox;\n        secondItem = markerBox;\n      } else {\n        firstItem = markerBox;\n        secondItem = labelBox;\n      }\n      firstItem[offsetDirection] = layoutOptions.labelOffset;\n      tableLine.secondLine.push(firstItem);\n      tableLine.firstLine.push(secondItem);\n    });\n  },\n  _alignLines: function (lines, layoutOptions) {\n    var i;\n    var measure = layoutOptions.altMeasure;\n    lines.forEach(line => setMaxInLine(line, measure));\n    measure = layoutOptions.measure;\n    if (layoutOptions.itemsAlignment) {\n      if (layoutOptions.markerOffset) {\n        for (i = 0; i < lines.length;) {\n          transpose([lines[i++], lines[i++]]).forEach(processLine);\n        }\n      }\n    } else {\n      transpose(lines).forEach(processLine);\n    }\n    function processLine(line) {\n      setMaxInLine(line, measure);\n    }\n  },\n  _applyItemPosition: function (lines, layoutOptions) {\n    var that = this;\n    var position = {\n      x: 0,\n      y: 0\n    };\n    var maxLineLength = getMaxLineLength(lines, layoutOptions);\n    lines.forEach(line => {\n      var firstItem = line[0];\n      var altOffset = firstItem.altOffset || layoutOptions.altSpacing;\n      position[layoutOptions.direction] = getInitPositionForDirection(line, layoutOptions, maxLineLength);\n      line.forEach(item => {\n        var offset = item.offset || layoutOptions.spacing;\n        var wrap = new WrapperLayoutElement(item.element, item.bBox);\n        var itemBBoxOptions = {\n          x: position.x,\n          y: position.y,\n          width: item.width,\n          height: item.height\n        };\n        var itemBBox = new WrapperLayoutElement(null, itemBBoxOptions);\n        var itemLegend = that._items[item.itemIndex];\n        wrap.position({\n          of: itemBBox,\n          my: item.pos,\n          at: item.pos\n        });\n        itemLegend.bBoxes.push(itemBBox);\n        position[layoutOptions.direction] += item[layoutOptions.measure] + offset;\n      });\n      position[layoutOptions.altDirection] += firstItem[layoutOptions.altMeasure] + altOffset;\n    });\n    this._items.forEach(item => {\n      var itemBBox = calculateBBoxLabelAndMarker(item.bBoxes[0].getLayoutOptions(), item.bBoxes[1].getLayoutOptions());\n      var horizontal = that._options.columnItemSpacing / 2;\n      var vertical = that._options.rowItemSpacing / 2;\n      item.tracker.left = itemBBox.left - horizontal;\n      item.tracker.right = itemBBox.right + horizontal;\n      item.tracker.top = itemBBox.top - vertical;\n      item.tracker.bottom = itemBBox.bottom + vertical;\n    });\n  },\n  _getItemsLayoutOptions: function () {\n    var options = this._options;\n    var orientation = options.orientation;\n    var layoutOptions = {\n      itemsAlignment: options.itemsAlignment,\n      orientation: options.orientation\n    };\n    var width = this._size.width - (this._background ? 2 * options.paddingLeftRight : 0);\n    var height = this._size.height - (this._background ? 2 * options.paddingTopBottom : 0);\n    if (orientation === HORIZONTAL) {\n      layoutOptions.length = width;\n      layoutOptions.spacing = options.columnItemSpacing;\n      layoutOptions.direction = \"x\";\n      layoutOptions.measure = WIDTH;\n      layoutOptions.altMeasure = HEIGHT;\n      layoutOptions.altDirection = \"y\";\n      layoutOptions.altSpacing = options.rowItemSpacing;\n      layoutOptions.countItem = options.columnCount;\n      layoutOptions.altCountItem = options.rowCount;\n      layoutOptions.marginTextLabel = 4;\n      layoutOptions.labelOffset = 7;\n      if (options.itemTextPosition === BOTTOM || options.itemTextPosition === TOP) {\n        layoutOptions.labelOffset = 4;\n        layoutOptions.markerOffset = true;\n      }\n    } else {\n      layoutOptions.length = height;\n      layoutOptions.spacing = options.rowItemSpacing;\n      layoutOptions.direction = \"y\";\n      layoutOptions.measure = HEIGHT;\n      layoutOptions.altMeasure = WIDTH;\n      layoutOptions.altDirection = \"x\";\n      layoutOptions.altSpacing = options.columnItemSpacing;\n      layoutOptions.countItem = options.rowCount;\n      layoutOptions.altCountItem = options.columnCount;\n      layoutOptions.marginTextLabel = 7;\n      layoutOptions.labelOffset = 4;\n      if (options.itemTextPosition === RIGHT || options.itemTextPosition === LEFT) {\n        layoutOptions.labelOffset = 7;\n        layoutOptions.markerOffset = true;\n      }\n    }\n    if (!layoutOptions.countItem) {\n      if (layoutOptions.altCountItem) {\n        layoutOptions.countItem = _ceil(this._items.length / layoutOptions.altCountItem);\n      } else {\n        layoutOptions.countItem = this._items.length;\n      }\n    }\n    if (options.itemTextPosition === TOP || options.itemTextPosition === LEFT) {\n      layoutOptions.inverseLabelPosition = true;\n    }\n    layoutOptions.itemTextPosition = options.itemTextPosition;\n    layoutOptions.altCountItem = layoutOptions.altCountItem || _ceil(this._items.length / layoutOptions.countItem);\n    return layoutOptions;\n  },\n  _adjustBackgroundSettings: function (locationOptions) {\n    if (!this._background) {\n      return;\n    }\n    var border = locationOptions.border;\n    var legendBox = this._calculateTotalBox();\n    var backgroundSettings = {\n      x: _round(legendBox.x - locationOptions.paddingLeftRight),\n      y: _round(legendBox.y - locationOptions.paddingTopBottom),\n      width: _round(legendBox.width) + 2 * locationOptions.paddingLeftRight,\n      height: _round(legendBox.height),\n      opacity: locationOptions.backgroundOpacity\n    };\n    if (border.visible && border.width && border.color && border.color !== NONE) {\n      backgroundSettings[\"stroke-width\"] = border.width;\n      backgroundSettings.stroke = border.color;\n      backgroundSettings[\"stroke-opacity\"] = border.opacity;\n      backgroundSettings.dashStyle = border.dashStyle;\n      backgroundSettings.rx = border.cornerRadius || 0;\n      backgroundSettings.ry = border.cornerRadius || 0;\n    }\n    this._background.attr(backgroundSettings);\n  },\n  _setBoundingRect: function (margin) {\n    if (!this._insideLegendGroup) {\n      return;\n    }\n    var box = this._calculateTotalBox();\n    box.height += margin.top + margin.bottom;\n    box.widthWithoutMargins = box.width;\n    box.width += margin.left + margin.right;\n    box.x -= margin.left;\n    box.y -= margin.top;\n    this._boundingRect = box;\n  },\n  _calculateTotalBox: function () {\n    var markerBox = this._markersGroup.getBBox();\n    var titleBox = this._title.getCorrectedLayoutOptions();\n    var box = this._insideLegendGroup.getBBox();\n    var verticalPadding = this._background ? 2 * this._options.paddingTopBottom : 0;\n    box.height = markerBox.height + titleBox.height + verticalPadding;\n    titleBox.width > box.width && (box.width = titleBox.width);\n    return box;\n  },\n  getActionCallback: function (point) {\n    var that = this;\n    if (that._options.visible) {\n      return function (act) {\n        that[act](point.index);\n      };\n    } else {\n      return noop;\n    }\n  },\n  getLayoutOptions: function () {\n    var options = this._options;\n    var boundingRect = this._insideLegendGroup ? this._boundingRect : {\n      width: 0,\n      height: 0,\n      x: 0,\n      y: 0\n    };\n    if (options) {\n      boundingRect.verticalAlignment = options.verticalAlignment;\n      boundingRect.horizontalAlignment = options.horizontalAlignment;\n      if (options.orientation === HORIZONTAL) {\n        boundingRect.cutLayoutSide = options.verticalAlignment;\n        boundingRect.cutSide = \"vertical\";\n      } else if (options.horizontalAlignment === CENTER) {\n        boundingRect.cutLayoutSide = options.verticalAlignment;\n        boundingRect.cutSide = \"vertical\";\n      } else {\n        boundingRect.cutLayoutSide = options.horizontalAlignment;\n        boundingRect.cutSide = \"horizontal\";\n      }\n      boundingRect.position = {\n        horizontal: options.horizontalAlignment,\n        vertical: options.verticalAlignment\n      };\n      return boundingRect;\n    }\n    return null;\n  },\n  shift: function (x, y) {\n    var box = {};\n    if (this._insideLegendGroup) {\n      this._insideLegendGroup.attr({\n        translateX: x - this._boundingRect.x,\n        translateY: y - this._boundingRect.y\n      });\n    }\n    this._title && this._shiftTitle(this._boundingRect.widthWithoutMargins);\n    this._markersGroup && this._shiftMarkers();\n    if (this._insideLegendGroup) {\n      box = this._legendGroup.getBBox();\n    }\n    this._x1 = box.x;\n    this._y1 = box.y;\n    this._x2 = box.x + box.width;\n    this._y2 = box.y + box.height;\n    return this;\n  },\n  _shiftTitle: function (boxWidth) {\n    var title = this._title;\n    var titleBox = title.getCorrectedLayoutOptions();\n    if (!titleBox || !title.hasText()) {\n      return;\n    }\n    var width = boxWidth - (this._background ? 2 * this._options.paddingLeftRight : 0);\n    var titleOptions = title.getOptions();\n    var titleY = titleBox.y + titleOptions.margin.top;\n    var titleX = 0;\n    if (titleOptions.verticalAlignment === BOTTOM && this._markersGroup) {\n      titleY += this._markersGroup.getBBox().height;\n    }\n    if (titleOptions.horizontalAlignment === RIGHT) {\n      titleX = width - titleBox.width;\n    } else if (titleOptions.horizontalAlignment === CENTER) {\n      titleX = (width - titleBox.width) / 2;\n    }\n    title.shift(titleX, titleY);\n  },\n  _shiftMarkers: function () {\n    var titleBox = this._title.getLayoutOptions();\n    var markerBox = this._markersGroup.getBBox();\n    var titleOptions = this._title.getOptions() || {};\n    var center = 0;\n    var y = 0;\n    if (titleBox.width > markerBox.width && this._options.horizontalAlignment === CENTER) {\n      center = titleBox.width / 2 - markerBox.width / 2;\n    }\n    if (titleOptions.verticalAlignment === TOP) {\n      y = titleBox.height;\n    }\n    if (0 !== center || 0 !== y) {\n      this._markersGroup.attr({\n        translateX: center,\n        translateY: y\n      });\n      this._items.forEach(item => {\n        item.tracker.left += center;\n        item.tracker.right += center;\n        item.tracker.top += y;\n        item.tracker.bottom += y;\n      });\n    }\n  },\n  getPosition: function () {\n    return this._options.position;\n  },\n  coordsIn: function (x, y) {\n    return x >= this._x1 && x <= this._x2 && y >= this._y1 && y <= this._y2;\n  },\n  getItemByCoord: function (x, y) {\n    var items = this._items;\n    var legendGroup = this._insideLegendGroup;\n    x -= legendGroup.attr(\"translateX\");\n    y -= legendGroup.attr(\"translateY\");\n    for (var i = 0; i < items.length; i++) {\n      if (inRect(items[i].tracker, x, y)) {\n        return items[i].tracker;\n      }\n    }\n    return null;\n  },\n  dispose: function () {\n    this._title && this._title.dispose();\n    this._legendGroup = this._insideLegendGroup = this._title = this._renderer = this._options = this._data = this._items = null;\n    return this;\n  },\n  layoutOptions: function () {\n    if (!this.isVisible()) {\n      return null;\n    }\n    var pos = this.getLayoutOptions();\n    return {\n      horizontalAlignment: this._options.horizontalAlignment,\n      verticalAlignment: this._options.verticalAlignment,\n      side: pos.cutSide,\n      priority: 1,\n      position: this.getPosition()\n    };\n  },\n  measure: function (size) {\n    if (this._updated || !this._insideLegendGroup) {\n      this.draw(size[0], size[1]);\n      this._updated = false;\n    } else {\n      this._items.forEach(item => {\n        item.bBoxes = [];\n      });\n      this._updateElementsPosition(size[0], size[1]);\n    }\n    var rect = this.getLayoutOptions();\n    return [rect.width, rect.height];\n  },\n  move: function (rect) {\n    this.shift(rect[0], rect[1]);\n  },\n  freeSpace: function () {\n    this._options._incidentOccurred(\"W2104\");\n    this.erase();\n  }\n});\nexport var plugin = {\n  name: \"legend\",\n  init: function () {\n    var group = this._renderer.g().attr({\n      class: this._rootClassPrefix + \"-legend\"\n    }).enableLinks().append(this._renderer.root);\n    this._legend = new Legend({\n      renderer: this._renderer,\n      group: group,\n      widget: this,\n      itemGroupClass: this._rootClassPrefix + \"-item\",\n      titleGroupClass: this._rootClassPrefix + \"-title\",\n      textField: \"text\",\n      getFormatObject: function (data) {\n        return {\n          item: data.item,\n          text: data.text\n        };\n      }\n    });\n    this._layout.add(this._legend);\n  },\n  extenders: {\n    _applyTilesAppearance: function () {\n      var that = this;\n      this._items.forEach(function (item) {\n        that._applyLegendItemStyle(item.id, item.getState());\n      });\n    },\n    _buildNodes: function () {\n      this._createLegendItems();\n    }\n  },\n  members: {\n    _applyLegendItemStyle: function (id, state) {\n      var legend = this._legend;\n      switch (state) {\n        case \"hover\":\n          legend.applyHover(id);\n          break;\n        case \"selection\":\n          legend.applySelected(id);\n          break;\n        default:\n          legend.resetItem(id);\n      }\n    },\n    _createLegendItems: function () {\n      if (this._legend.update(this._getLegendData(), this._getOption(\"legend\"), this._themeManager.theme(\"legend\").title)) {\n        this._requestChange([\"LAYOUT\"]);\n      }\n    }\n  },\n  dispose: function () {\n    this._legend.dispose();\n  },\n  customize: function (constructor) {\n    constructor.prototype._proxyData.push(function (x, y) {\n      if (this._legend.coordsIn(x, y)) {\n        var item = this._legend.getItemByCoord(x, y);\n        if (item) {\n          return {\n            id: item.id,\n            type: \"legend\"\n          };\n        }\n      }\n    });\n    constructor.addChange({\n      code: \"LEGEND\",\n      handler: function () {\n        this._createLegendItems();\n      },\n      isThemeDependent: true,\n      option: \"legend\",\n      isOptionChange: true\n    });\n  }\n};","map":{"version":3,"names":["enumParser","normalizeEnum","patchFontOptions","extend","LayoutElement","WrapperLayoutElement","isDefined","isFunction","Title","clone","noop","processHatchingAttrs","getFuncIri","Deferred","_Number","Number","_math","Math","_round","round","_max","max","_min","min","_ceil","ceil","_isDefined","_isFunction","_enumParser","_normalizeEnum","_extend","DEFAULT_MARGIN","DEFAULT_MARKER_HATCHING_WIDTH","DEFAULT_MARKER_HATCHING_STEP","CENTER","RIGHT","LEFT","TOP","BOTTOM","HORIZONTAL","VERTICAL","INSIDE","OUTSIDE","NONE","HEIGHT","WIDTH","parseHorizontalAlignment","parseVerticalAlignment","parseOrientation","parseItemTextPosition","parsePosition","parseItemsAlignment","getState","state","color","stateName","colorFromAction","fill","opacity","hatching","step","width","getAttributes","item","size","attrs","indexOf","parseMargins","options","margin","top","bottom","left","right","getSizeItem","markerBBox","labelBBox","height","itemTextPosition","calculateBBoxLabelAndMarker","bBox","x","y","applyMarkerState","id","idToIndexMap","items","renderMarker","states","parseOptions","textField","allowInsidePosition","horizontalAlignment","verticalAlignment","orientation","position","itemsAlignment","hoverMode","customizeText","customizeHint","_incidentOccurred","createSquareMarker","renderer","rect","createCircleMarker","circle","isCircle","type","inRect","checkLinesSize","lines","layoutOptions","countItems","margins","maxMeasureLength","maxAltMeasureLength","direction","forEach","line","i","firstItem","lineLength","length","index","offset","spacing","measure","altDirection","altMeasure","altOffset","altSpacing","countItem","decreaseItemCount","altCountItem","getLineLength","reduce","getMaxLineLength","maxLineLength","getInitPositionForDirection","initPosition","getPos","horizontal","vertical","getLines","itemIndex","tableLine","markerOffset","push","firstLine","secondLine","setMaxInLine","maxLineSize","itemMeasure","transpose","array","j","transposeArray","getAlign","getMarkerCreator","getTitleHorizontalAlignment","Legend","settings","_renderer","_legendGroup","group","_backgroundClass","backgroundClass","_itemGroupClass","itemGroupClass","_textField","_getCustomizeObject","getFormatObject","_titleGroupClass","titleGroupClass","_allowInsidePosition","_widget","widget","_updated","_Legend","legendPrototype","prototype","constructor","getOptions","_options","update","data","arguments","themeManagerTitleOptions","that","initMarkerSize","markerSize","_data","map","dataItem","marker","normal","Object","defineProperty","get","set","value","hover","selection","customizeItems","slice","_boundingRect","isVisible","_title","cssClass","root","titleOptions","title","erase","visible","draw","_getItemData","_insideLegendGroup","g","enableLinks","append","changeLink","_createBackground","hasText","horizontalPadding","_background","paddingLeftRight","_markersGroup","attr","class","_createItems","_updateElementsPosition","_measureElements","maxBBoxHeight","_items","label","getBBox","equalRowHeight","_size","_locateElements","_finalUpdate","getLayoutOptions","freeSpace","createMarker","markerShape","_markersId","templateFunction","markerTemplate","element","template","_getTemplate","markersGroup","css","font","_deferredItems","_templatesGroups","stateOfDataItem","normalState","normalStateFill","markerColor","defaultColor","itemGroup","markerGroup","_createLabel","tracker","argument","argumentIndex","bBoxes","clear","render","model","container","onRendered","resolve","_createHint","getTemplatesGroups","getTemplatesDef","inverted","reverse","filter","_adjustBackgroundSettings","_setBoundingRect","insideLegendGroup","dispose","_x1","_x2","_y2","locationOptions","_moveInInitialValues","_locateRowsColumns","move","applySelected","applyHover","resetItem","labelFormatObject","align","text","call","fontStyle","textOpacity","setTitle","isInside","backgroundColor","containerBackgroundColor","border","iteration","_getItemsLayoutOptions","_createLines","_alignLines","_applyItemPosition","labelBox","pos","markerBox","secondItem","offsetDirection","inverseLabelPosition","labelOffset","processLine","wrap","itemBBoxOptions","itemBBox","itemLegend","of","my","at","columnItemSpacing","rowItemSpacing","paddingTopBottom","columnCount","rowCount","marginTextLabel","legendBox","_calculateTotalBox","backgroundSettings","backgroundOpacity","stroke","dashStyle","rx","cornerRadius","ry","box","widthWithoutMargins","titleBox","getCorrectedLayoutOptions","verticalPadding","getActionCallback","point","act","boundingRect","cutLayoutSide","cutSide","shift","translateX","translateY","_shiftTitle","_shiftMarkers","_y1","boxWidth","titleY","titleX","center","getPosition","coordsIn","getItemByCoord","legendGroup","side","priority","plugin","name","init","_rootClassPrefix","_legend","_layout","add","extenders","_applyTilesAppearance","_applyLegendItemStyle","_buildNodes","_createLegendItems","members","legend","_getLegendData","_getOption","_themeManager","theme","_requestChange","customize","_proxyData","addChange","code","handler","isThemeDependent","option","isOptionChange"],"sources":["C:/Users/User/vue-chart/node_modules/devextreme/esm/viz/components/legend.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/viz/components/legend.js)\r\n * Version: 22.1.6\r\n * Build date: Tue Oct 18 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    enumParser,\r\n    normalizeEnum,\r\n    patchFontOptions\r\n} from \"../core/utils\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    LayoutElement,\r\n    WrapperLayoutElement\r\n} from \"../core/layout_element\";\r\nimport {\r\n    isDefined,\r\n    isFunction\r\n} from \"../../core/utils/type\";\r\nimport {\r\n    Title\r\n} from \"../core/title\";\r\nimport {\r\n    clone\r\n} from \"../../core/utils/object\";\r\nimport {\r\n    noop\r\n} from \"../../core/utils/common\";\r\nimport {\r\n    processHatchingAttrs,\r\n    getFuncIri\r\n} from \"../core/renderers/renderer\";\r\nimport {\r\n    Deferred\r\n} from \"../../core/utils/deferred\";\r\nvar _Number = Number;\r\nvar _math = Math;\r\nvar _round = _math.round;\r\nvar _max = _math.max;\r\nvar _min = _math.min;\r\nvar _ceil = _math.ceil;\r\nvar _isDefined = isDefined;\r\nvar _isFunction = isFunction;\r\nvar _enumParser = enumParser;\r\nvar _normalizeEnum = normalizeEnum;\r\nvar _extend = extend;\r\nvar DEFAULT_MARGIN = 10;\r\nvar DEFAULT_MARKER_HATCHING_WIDTH = 2;\r\nvar DEFAULT_MARKER_HATCHING_STEP = 5;\r\nvar CENTER = \"center\";\r\nvar RIGHT = \"right\";\r\nvar LEFT = \"left\";\r\nvar TOP = \"top\";\r\nvar BOTTOM = \"bottom\";\r\nvar HORIZONTAL = \"horizontal\";\r\nvar VERTICAL = \"vertical\";\r\nvar INSIDE = \"inside\";\r\nvar OUTSIDE = \"outside\";\r\nvar NONE = \"none\";\r\nvar HEIGHT = \"height\";\r\nvar WIDTH = \"width\";\r\nvar parseHorizontalAlignment = _enumParser([LEFT, CENTER, RIGHT]);\r\nvar parseVerticalAlignment = _enumParser([TOP, BOTTOM]);\r\nvar parseOrientation = _enumParser([VERTICAL, HORIZONTAL]);\r\nvar parseItemTextPosition = _enumParser([LEFT, RIGHT, TOP, BOTTOM]);\r\nvar parsePosition = _enumParser([OUTSIDE, INSIDE]);\r\nvar parseItemsAlignment = _enumParser([LEFT, CENTER, RIGHT]);\r\n\r\nfunction getState(state, color, stateName) {\r\n    if (!state) {\r\n        return\r\n    }\r\n    var colorFromAction = state.fill;\r\n    return extend({}, {\r\n        state: stateName,\r\n        fill: colorFromAction === NONE ? color : colorFromAction,\r\n        opacity: state.opacity,\r\n        hatching: _extend({}, state.hatching, {\r\n            step: DEFAULT_MARKER_HATCHING_STEP,\r\n            width: DEFAULT_MARKER_HATCHING_WIDTH\r\n        })\r\n    })\r\n}\r\n\r\nfunction getAttributes(item, state, size) {\r\n    var attrs = processHatchingAttrs(item, state);\r\n    if (attrs.fill && 0 === attrs.fill.indexOf(\"DevExpress\")) {\r\n        attrs.fill = getFuncIri(attrs.fill)\r\n    }\r\n    attrs.opacity = attrs.opacity >= 0 ? attrs.opacity : 1;\r\n    return extend({}, attrs, {\r\n        size: size\r\n    })\r\n}\r\n\r\nfunction parseMargins(options) {\r\n    var margin = options.margin;\r\n    if (margin >= 0) {\r\n        margin = _Number(options.margin);\r\n        margin = {\r\n            top: margin,\r\n            bottom: margin,\r\n            left: margin,\r\n            right: margin\r\n        }\r\n    } else {\r\n        margin = {\r\n            top: margin.top >= 0 ? _Number(margin.top) : DEFAULT_MARGIN,\r\n            bottom: margin.bottom >= 0 ? _Number(margin.bottom) : DEFAULT_MARGIN,\r\n            left: margin.left >= 0 ? _Number(margin.left) : DEFAULT_MARGIN,\r\n            right: margin.right >= 0 ? _Number(margin.right) : DEFAULT_MARGIN\r\n        }\r\n    }\r\n    options.margin = margin\r\n}\r\n\r\nfunction getSizeItem(options, markerBBox, labelBBox) {\r\n    var width;\r\n    var height;\r\n    switch (options.itemTextPosition) {\r\n        case LEFT:\r\n        case RIGHT:\r\n            width = markerBBox.width + 7 + labelBBox.width;\r\n            height = _max(markerBBox.height, labelBBox.height);\r\n            break;\r\n        case TOP:\r\n        case BOTTOM:\r\n            width = _max(markerBBox.width, labelBBox.width);\r\n            height = markerBBox.height + 4 + labelBBox.height\r\n    }\r\n    return {\r\n        width: width,\r\n        height: height\r\n    }\r\n}\r\n\r\nfunction calculateBBoxLabelAndMarker(markerBBox, labelBBox) {\r\n    var bBox = {};\r\n    bBox.left = _min(markerBBox.x, labelBBox.x);\r\n    bBox.top = _min(markerBBox.y, labelBBox.y);\r\n    bBox.right = _max(markerBBox.x + markerBBox.width, labelBBox.x + labelBBox.width);\r\n    bBox.bottom = _max(markerBBox.y + markerBBox.height, labelBBox.y + labelBBox.height);\r\n    return bBox\r\n}\r\n\r\nfunction applyMarkerState(id, idToIndexMap, items, stateName) {\r\n    var item = idToIndexMap && items[idToIndexMap[id]];\r\n    if (item) {\r\n        item.renderMarker(item.states[stateName])\r\n    }\r\n}\r\n\r\nfunction parseOptions(options, textField, allowInsidePosition) {\r\n    if (!options) {\r\n        return null\r\n    }\r\n    parseMargins(options);\r\n    options.horizontalAlignment = parseHorizontalAlignment(options.horizontalAlignment, RIGHT);\r\n    options.verticalAlignment = parseVerticalAlignment(options.verticalAlignment, options.horizontalAlignment === CENTER ? BOTTOM : TOP);\r\n    options.orientation = parseOrientation(options.orientation, options.horizontalAlignment === CENTER ? HORIZONTAL : VERTICAL);\r\n    options.itemTextPosition = parseItemTextPosition(options.itemTextPosition, options.orientation === HORIZONTAL ? BOTTOM : RIGHT);\r\n    options.position = allowInsidePosition ? parsePosition(options.position, OUTSIDE) : OUTSIDE;\r\n    options.itemsAlignment = parseItemsAlignment(options.itemsAlignment, null);\r\n    options.hoverMode = _normalizeEnum(options.hoverMode);\r\n    options.customizeText = _isFunction(options.customizeText) ? options.customizeText : function() {\r\n        return this[textField]\r\n    };\r\n    options.customizeHint = _isFunction(options.customizeHint) ? options.customizeHint : noop;\r\n    options._incidentOccurred = options._incidentOccurred || noop;\r\n    return options\r\n}\r\n\r\nfunction createSquareMarker(renderer, size) {\r\n    return renderer.rect(0, 0, size, size)\r\n}\r\n\r\nfunction createCircleMarker(renderer, size) {\r\n    return renderer.circle(size / 2, size / 2, size / 2)\r\n}\r\n\r\nfunction isCircle(type) {\r\n    return \"circle\" === _normalizeEnum(type)\r\n}\r\n\r\nfunction inRect(rect, x, y) {\r\n    return x >= rect.left && x <= rect.right && y >= rect.top && y <= rect.bottom\r\n}\r\n\r\nfunction checkLinesSize(lines, layoutOptions, countItems, margins) {\r\n    var position = {\r\n        x: 0,\r\n        y: 0\r\n    };\r\n    var maxMeasureLength = 0;\r\n    var maxAltMeasureLength = 0;\r\n    var margin = 0;\r\n    if (\"y\" === layoutOptions.direction) {\r\n        margin = margins.top + margins.bottom\r\n    } else {\r\n        margin = margins.left + margins.right\r\n    }\r\n    lines.forEach((function(line, i) {\r\n        var firstItem = line[0];\r\n        var lineLength = line.length;\r\n        line.forEach((function(item, index) {\r\n            var offset = item.offset || layoutOptions.spacing;\r\n            position[layoutOptions.direction] += item[layoutOptions.measure] + (index !== lineLength - 1 ? offset : 0);\r\n            maxMeasureLength = _max(maxMeasureLength, position[layoutOptions.direction])\r\n        }));\r\n        position[layoutOptions.direction] = 0;\r\n        position[layoutOptions.altDirection] += firstItem[layoutOptions.altMeasure] + firstItem.altOffset || layoutOptions.altSpacing;\r\n        maxAltMeasureLength = _max(maxAltMeasureLength, position[layoutOptions.altDirection])\r\n    }));\r\n    if (maxMeasureLength + margin > layoutOptions.length) {\r\n        layoutOptions.countItem = decreaseItemCount(layoutOptions, countItems);\r\n        return true\r\n    }\r\n}\r\n\r\nfunction decreaseItemCount(layoutOptions, countItems) {\r\n    layoutOptions.altCountItem++;\r\n    return _ceil(countItems / layoutOptions.altCountItem)\r\n}\r\n\r\nfunction getLineLength(line, layoutOptions) {\r\n    return line.reduce((lineLength, item) => {\r\n        var offset = item.offset || layoutOptions.spacing;\r\n        return lineLength + item[layoutOptions.measure] + offset\r\n    }, 0)\r\n}\r\n\r\nfunction getMaxLineLength(lines, layoutOptions) {\r\n    return lines.reduce((maxLineLength, line) => _max(maxLineLength, getLineLength(line, layoutOptions)), 0)\r\n}\r\n\r\nfunction getInitPositionForDirection(line, layoutOptions, maxLineLength) {\r\n    var lineLength = getLineLength(line, layoutOptions);\r\n    var initPosition;\r\n    switch (layoutOptions.itemsAlignment) {\r\n        case RIGHT:\r\n            initPosition = maxLineLength - lineLength;\r\n            break;\r\n        case CENTER:\r\n            initPosition = (maxLineLength - lineLength) / 2;\r\n            break;\r\n        default:\r\n            initPosition = 0\r\n    }\r\n    return initPosition\r\n}\r\n\r\nfunction getPos(layoutOptions) {\r\n    switch (layoutOptions.itemTextPosition) {\r\n        case BOTTOM:\r\n            return {\r\n                horizontal: CENTER, vertical: TOP\r\n            };\r\n        case TOP:\r\n            return {\r\n                horizontal: CENTER, vertical: BOTTOM\r\n            };\r\n        case LEFT:\r\n            return {\r\n                horizontal: RIGHT, vertical: CENTER\r\n            };\r\n        case RIGHT:\r\n            return {\r\n                horizontal: LEFT, vertical: CENTER\r\n            }\r\n    }\r\n}\r\n\r\nfunction getLines(lines, layoutOptions, itemIndex) {\r\n    var tableLine = {};\r\n    if (itemIndex % layoutOptions.countItem === 0) {\r\n        if (layoutOptions.markerOffset) {\r\n            lines.push([], [])\r\n        } else {\r\n            lines.push([])\r\n        }\r\n    }\r\n    if (layoutOptions.markerOffset) {\r\n        tableLine.firstLine = lines[lines.length - 1];\r\n        tableLine.secondLine = lines[lines.length - 2]\r\n    } else {\r\n        tableLine.firstLine = tableLine.secondLine = lines[lines.length - 1]\r\n    }\r\n    return tableLine\r\n}\r\n\r\nfunction setMaxInLine(line, measure) {\r\n    var maxLineSize = line.reduce((maxLineSize, item) => {\r\n        var itemMeasure = item ? item[measure] : maxLineSize;\r\n        return _max(maxLineSize, itemMeasure)\r\n    }, 0);\r\n    line.forEach(item => {\r\n        if (item) {\r\n            item[measure] = maxLineSize\r\n        }\r\n    })\r\n}\r\n\r\nfunction transpose(array) {\r\n    var width = array.length;\r\n    var height = array[0].length;\r\n    var i;\r\n    var j;\r\n    var transposeArray = [];\r\n    for (i = 0; i < height; i++) {\r\n        transposeArray[i] = [];\r\n        for (j = 0; j < width; j++) {\r\n            transposeArray[i][j] = array[j][i]\r\n        }\r\n    }\r\n    return transposeArray\r\n}\r\n\r\nfunction getAlign(position) {\r\n    switch (position) {\r\n        case TOP:\r\n        case BOTTOM:\r\n            return CENTER;\r\n        case LEFT:\r\n            return RIGHT;\r\n        case RIGHT:\r\n            return LEFT\r\n    }\r\n}\r\nvar getMarkerCreator = function(type) {\r\n    return isCircle(type) ? createCircleMarker : createSquareMarker\r\n};\r\n\r\nfunction getTitleHorizontalAlignment(options) {\r\n    if (options.horizontalAlignment === CENTER) {\r\n        return CENTER\r\n    } else if (options.itemTextPosition === RIGHT) {\r\n        return LEFT\r\n    } else if (options.itemTextPosition === LEFT) {\r\n        return RIGHT\r\n    } else {\r\n        return CENTER\r\n    }\r\n}\r\nexport var Legend = function(settings) {\r\n    this._renderer = settings.renderer;\r\n    this._legendGroup = settings.group;\r\n    this._backgroundClass = settings.backgroundClass;\r\n    this._itemGroupClass = settings.itemGroupClass;\r\n    this._textField = settings.textField;\r\n    this._getCustomizeObject = settings.getFormatObject;\r\n    this._titleGroupClass = settings.titleGroupClass;\r\n    this._allowInsidePosition = settings.allowInsidePosition;\r\n    this._widget = settings.widget;\r\n    this._updated = false\r\n};\r\nvar _Legend = Legend;\r\nvar legendPrototype = _Legend.prototype = clone(LayoutElement.prototype);\r\nextend(legendPrototype, {\r\n    constructor: _Legend,\r\n    getOptions: function() {\r\n        return this._options\r\n    },\r\n    update: function() {\r\n        var data = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [];\r\n        var options = arguments.length > 1 ? arguments[1] : void 0;\r\n        var themeManagerTitleOptions = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};\r\n        var that = this;\r\n        options = that._options = parseOptions(options, that._textField, that._allowInsidePosition) || {};\r\n        var initMarkerSize = options.markerSize;\r\n        this._updated = true;\r\n        this._data = data.map(dataItem => {\r\n            dataItem.size = _Number(dataItem.size > 0 ? dataItem.size : initMarkerSize);\r\n            dataItem.marker = getAttributes(dataItem, dataItem.states.normal);\r\n            Object.defineProperty(dataItem.marker, \"size\", {\r\n                get: () => dataItem.size,\r\n                set(value) {\r\n                    dataItem.size = value\r\n                }\r\n            });\r\n            Object.defineProperty(dataItem.marker, \"opacity\", {\r\n                get: () => dataItem.states.normal.opacity,\r\n                set(value) {\r\n                    dataItem.states.normal.opacity = dataItem.states.hover.opacity = dataItem.states.selection.opacity = value\r\n                }\r\n            });\r\n            return dataItem\r\n        });\r\n        if (options.customizeItems) {\r\n            that._data = options.customizeItems(data.slice()) || data\r\n        }\r\n        that._boundingRect = {\r\n            width: 0,\r\n            height: 0,\r\n            x: 0,\r\n            y: 0\r\n        };\r\n        if (that.isVisible() && !that._title) {\r\n            that._title = new Title({\r\n                renderer: that._renderer,\r\n                cssClass: that._titleGroupClass,\r\n                root: that._legendGroup\r\n            })\r\n        }\r\n        if (that._title) {\r\n            var titleOptions = options.title;\r\n            themeManagerTitleOptions.horizontalAlignment = getTitleHorizontalAlignment(options);\r\n            that._title.update(themeManagerTitleOptions, titleOptions)\r\n        }\r\n        this.erase();\r\n        return that\r\n    },\r\n    isVisible: function() {\r\n        return this._options && this._options.visible\r\n    },\r\n    draw: function(width, height) {\r\n        var items = this._getItemData();\r\n        this.erase();\r\n        if (!(this.isVisible() && items && items.length)) {\r\n            return this\r\n        }\r\n        this._insideLegendGroup = this._renderer.g().enableLinks().append(this._legendGroup);\r\n        this._title.changeLink(this._insideLegendGroup);\r\n        this._createBackground();\r\n        if (this._title.hasText()) {\r\n            var horizontalPadding = this._background ? 2 * this._options.paddingLeftRight : 0;\r\n            this._title.draw(width - horizontalPadding, height)\r\n        }\r\n        this._markersGroup = this._renderer.g().attr({\r\n            class: this._itemGroupClass\r\n        }).append(this._insideLegendGroup);\r\n        this._createItems(items);\r\n        this._updateElementsPosition(width, height);\r\n        return this\r\n    },\r\n    _measureElements: function() {\r\n        var options = this._options;\r\n        var maxBBoxHeight = 0;\r\n        this._items.forEach(item => {\r\n            var labelBBox = item.label.getBBox();\r\n            var markerBBox = item.marker.getBBox();\r\n            item.markerBBox = markerBBox;\r\n            item.markerSize = Math.max(markerBBox.width, markerBBox.height);\r\n            var bBox = getSizeItem(options, markerBBox, labelBBox);\r\n            item.labelBBox = labelBBox;\r\n            item.bBox = bBox;\r\n            maxBBoxHeight = _max(maxBBoxHeight, bBox.height)\r\n        });\r\n        if (options.equalRowHeight) {\r\n            this._items.forEach(item => item.bBox.height = maxBBoxHeight)\r\n        }\r\n    },\r\n    _updateElementsPosition: function(width, height) {\r\n        var options = this._options;\r\n        this._size = {\r\n            width: width,\r\n            height: height\r\n        };\r\n        this._measureElements();\r\n        this._locateElements(options);\r\n        this._finalUpdate(options);\r\n        var size = this.getLayoutOptions();\r\n        if (size.width > width || size.height > height) {\r\n            this.freeSpace()\r\n        }\r\n    },\r\n    _createItems: function(items) {\r\n        var that = this;\r\n        var options = that._options;\r\n        var renderer = that._renderer;\r\n        var createMarker = getMarkerCreator(options.markerShape);\r\n        that._markersId = {};\r\n        var templateFunction = !options.markerTemplate ? (dataItem, group) => {\r\n            var attrs = dataItem.marker;\r\n            createMarker(renderer, attrs.size).attr({\r\n                fill: attrs.fill,\r\n                opacity: attrs.opacity\r\n            }).append({\r\n                element: group\r\n            })\r\n        } : options.markerTemplate;\r\n        var template = that._widget._getTemplate(templateFunction);\r\n        var markersGroup = that._markersGroup;\r\n        markersGroup.css(patchFontOptions(options.font));\r\n        that._deferredItems = [];\r\n        that._templatesGroups = [];\r\n        that._items = (items || []).map((dataItem, i) => {\r\n            var stateOfDataItem = dataItem.states;\r\n            var normalState = stateOfDataItem.normal;\r\n            var normalStateFill = normalState.fill;\r\n            dataItem.size = dataItem.marker.size;\r\n            var states = {\r\n                normal: extend(normalState, {\r\n                    fill: normalStateFill || options.markerColor || options.defaultColor,\r\n                    state: \"normal\"\r\n                }),\r\n                hover: getState(stateOfDataItem.hover, normalStateFill, \"hovered\"),\r\n                selection: getState(stateOfDataItem.selection, normalStateFill, \"selected\")\r\n            };\r\n            dataItem.states = states;\r\n            var itemGroup = renderer.g().append(markersGroup);\r\n            var markerGroup = renderer.g().attr({\r\n                class: \"dxl-marker\"\r\n            }).append(itemGroup);\r\n            that._deferredItems[i] = new Deferred;\r\n            that._templatesGroups.push(markerGroup);\r\n            var item = {\r\n                label: that._createLabel(dataItem, itemGroup),\r\n                marker: markerGroup,\r\n                renderer: renderer,\r\n                group: itemGroup,\r\n                tracker: {\r\n                    id: dataItem.id,\r\n                    argument: dataItem.argument,\r\n                    argumentIndex: dataItem.argumentIndex\r\n                },\r\n                states: states,\r\n                itemTextPosition: options.itemTextPosition,\r\n                markerOffset: 0,\r\n                bBoxes: [],\r\n                renderMarker(state) {\r\n                    dataItem.marker = getAttributes(item, state, dataItem.size);\r\n                    markerGroup.clear();\r\n                    template.render({\r\n                        model: dataItem,\r\n                        container: markerGroup.element,\r\n                        onRendered: that._deferredItems[i].resolve\r\n                    })\r\n                }\r\n            };\r\n            item.renderMarker(states.normal);\r\n            that._createHint(dataItem, itemGroup);\r\n            if (void 0 !== dataItem.id) {\r\n                that._markersId[dataItem.id] = i\r\n            }\r\n            return item\r\n        })\r\n    },\r\n    getTemplatesGroups: function() {\r\n        return this._templatesGroups || []\r\n    },\r\n    getTemplatesDef: function() {\r\n        return this._deferredItems || []\r\n    },\r\n    _getItemData: function() {\r\n        var items = this._data || [];\r\n        var options = this._options || {};\r\n        if (options.inverted) {\r\n            items = items.slice().reverse()\r\n        }\r\n        return items.filter(i => i.visible)\r\n    },\r\n    _finalUpdate: function(options) {\r\n        this._adjustBackgroundSettings(options);\r\n        this._setBoundingRect(options.margin)\r\n    },\r\n    erase: function() {\r\n        var insideLegendGroup = this._insideLegendGroup;\r\n        insideLegendGroup && insideLegendGroup.dispose();\r\n        this._insideLegendGroup = this._markersGroup = this._x1 = this._x2 = this._y2 = this._y2 = null;\r\n        return this\r\n    },\r\n    _locateElements: function(locationOptions) {\r\n        this._moveInInitialValues();\r\n        this._locateRowsColumns(locationOptions)\r\n    },\r\n    _moveInInitialValues: function() {\r\n        this._title.hasText() && this._title.move([0, 0]);\r\n        this._legendGroup && this._legendGroup.move(0, 0);\r\n        this._background && this._background.attr({\r\n            x: 0,\r\n            y: 0,\r\n            width: 0,\r\n            height: 0\r\n        })\r\n    },\r\n    applySelected: function(id) {\r\n        applyMarkerState(id, this._markersId, this._items, \"selection\");\r\n        return this\r\n    },\r\n    applyHover: function(id) {\r\n        applyMarkerState(id, this._markersId, this._items, \"hover\");\r\n        return this\r\n    },\r\n    resetItem: function(id) {\r\n        applyMarkerState(id, this._markersId, this._items, \"normal\");\r\n        return this\r\n    },\r\n    _createLabel: function(data, group) {\r\n        var labelFormatObject = this._getCustomizeObject(data);\r\n        var options = this._options;\r\n        var align = getAlign(options.itemTextPosition);\r\n        var text = options.customizeText.call(labelFormatObject, labelFormatObject);\r\n        var fontStyle = _isDefined(data.textOpacity) ? {\r\n            color: options.font.color,\r\n            opacity: data.textOpacity\r\n        } : {};\r\n        return this._renderer.text(text, 0, 0).css(patchFontOptions(fontStyle)).attr({\r\n            align: align,\r\n            class: options.cssClass\r\n        }).append(group)\r\n    },\r\n    _createHint: function(data, group) {\r\n        var labelFormatObject = this._getCustomizeObject(data);\r\n        var text = this._options.customizeHint.call(labelFormatObject, labelFormatObject);\r\n        if (_isDefined(text) && \"\" !== text) {\r\n            group.setTitle(text)\r\n        }\r\n    },\r\n    _createBackground: function() {\r\n        var isInside = this._options.position === INSIDE;\r\n        var color = this._options.backgroundColor;\r\n        var fill = color || (isInside ? this._options.containerBackgroundColor : NONE);\r\n        if (this._options.border.visible || (isInside || color) && color !== NONE) {\r\n            this._background = this._renderer.rect(0, 0, 0, 0).attr({\r\n                fill: fill,\r\n                class: this._backgroundClass\r\n            }).append(this._insideLegendGroup)\r\n        }\r\n    },\r\n    _locateRowsColumns: function(options) {\r\n        var iteration = 0;\r\n        var layoutOptions = this._getItemsLayoutOptions();\r\n        var countItems = this._items.length;\r\n        var lines;\r\n        do {\r\n            lines = [];\r\n            this._createLines(lines, layoutOptions);\r\n            this._alignLines(lines, layoutOptions);\r\n            iteration++\r\n        } while (checkLinesSize(lines, layoutOptions, countItems, options.margin) && iteration < countItems);\r\n        this._applyItemPosition(lines, layoutOptions)\r\n    },\r\n    _createLines: function(lines, layoutOptions) {\r\n        this._items.forEach((item, i) => {\r\n            var tableLine = getLines(lines, layoutOptions, i);\r\n            var labelBox = {\r\n                width: item.labelBBox.width,\r\n                height: item.labelBBox.height,\r\n                element: item.label,\r\n                bBox: item.labelBBox,\r\n                pos: getPos(layoutOptions),\r\n                itemIndex: i\r\n            };\r\n            var markerBox = {\r\n                width: item.markerBBox.width,\r\n                height: item.markerBBox.height,\r\n                element: item.marker,\r\n                pos: {\r\n                    horizontal: CENTER,\r\n                    vertical: CENTER\r\n                },\r\n                bBox: {\r\n                    width: item.markerBBox.width,\r\n                    height: item.markerBBox.height,\r\n                    x: item.markerBBox.x,\r\n                    y: item.markerBBox.y\r\n                },\r\n                itemIndex: i\r\n            };\r\n            var firstItem;\r\n            var secondItem;\r\n            var offsetDirection = layoutOptions.markerOffset ? \"altOffset\" : \"offset\";\r\n            if (layoutOptions.inverseLabelPosition) {\r\n                firstItem = labelBox;\r\n                secondItem = markerBox\r\n            } else {\r\n                firstItem = markerBox;\r\n                secondItem = labelBox\r\n            }\r\n            firstItem[offsetDirection] = layoutOptions.labelOffset;\r\n            tableLine.secondLine.push(firstItem);\r\n            tableLine.firstLine.push(secondItem)\r\n        })\r\n    },\r\n    _alignLines: function(lines, layoutOptions) {\r\n        var i;\r\n        var measure = layoutOptions.altMeasure;\r\n        lines.forEach(line => setMaxInLine(line, measure));\r\n        measure = layoutOptions.measure;\r\n        if (layoutOptions.itemsAlignment) {\r\n            if (layoutOptions.markerOffset) {\r\n                for (i = 0; i < lines.length;) {\r\n                    transpose([lines[i++], lines[i++]]).forEach(processLine)\r\n                }\r\n            }\r\n        } else {\r\n            transpose(lines).forEach(processLine)\r\n        }\r\n\r\n        function processLine(line) {\r\n            setMaxInLine(line, measure)\r\n        }\r\n    },\r\n    _applyItemPosition: function(lines, layoutOptions) {\r\n        var that = this;\r\n        var position = {\r\n            x: 0,\r\n            y: 0\r\n        };\r\n        var maxLineLength = getMaxLineLength(lines, layoutOptions);\r\n        lines.forEach(line => {\r\n            var firstItem = line[0];\r\n            var altOffset = firstItem.altOffset || layoutOptions.altSpacing;\r\n            position[layoutOptions.direction] = getInitPositionForDirection(line, layoutOptions, maxLineLength);\r\n            line.forEach(item => {\r\n                var offset = item.offset || layoutOptions.spacing;\r\n                var wrap = new WrapperLayoutElement(item.element, item.bBox);\r\n                var itemBBoxOptions = {\r\n                    x: position.x,\r\n                    y: position.y,\r\n                    width: item.width,\r\n                    height: item.height\r\n                };\r\n                var itemBBox = new WrapperLayoutElement(null, itemBBoxOptions);\r\n                var itemLegend = that._items[item.itemIndex];\r\n                wrap.position({\r\n                    of: itemBBox,\r\n                    my: item.pos,\r\n                    at: item.pos\r\n                });\r\n                itemLegend.bBoxes.push(itemBBox);\r\n                position[layoutOptions.direction] += item[layoutOptions.measure] + offset\r\n            });\r\n            position[layoutOptions.altDirection] += firstItem[layoutOptions.altMeasure] + altOffset\r\n        });\r\n        this._items.forEach(item => {\r\n            var itemBBox = calculateBBoxLabelAndMarker(item.bBoxes[0].getLayoutOptions(), item.bBoxes[1].getLayoutOptions());\r\n            var horizontal = that._options.columnItemSpacing / 2;\r\n            var vertical = that._options.rowItemSpacing / 2;\r\n            item.tracker.left = itemBBox.left - horizontal;\r\n            item.tracker.right = itemBBox.right + horizontal;\r\n            item.tracker.top = itemBBox.top - vertical;\r\n            item.tracker.bottom = itemBBox.bottom + vertical\r\n        })\r\n    },\r\n    _getItemsLayoutOptions: function() {\r\n        var options = this._options;\r\n        var orientation = options.orientation;\r\n        var layoutOptions = {\r\n            itemsAlignment: options.itemsAlignment,\r\n            orientation: options.orientation\r\n        };\r\n        var width = this._size.width - (this._background ? 2 * options.paddingLeftRight : 0);\r\n        var height = this._size.height - (this._background ? 2 * options.paddingTopBottom : 0);\r\n        if (orientation === HORIZONTAL) {\r\n            layoutOptions.length = width;\r\n            layoutOptions.spacing = options.columnItemSpacing;\r\n            layoutOptions.direction = \"x\";\r\n            layoutOptions.measure = WIDTH;\r\n            layoutOptions.altMeasure = HEIGHT;\r\n            layoutOptions.altDirection = \"y\";\r\n            layoutOptions.altSpacing = options.rowItemSpacing;\r\n            layoutOptions.countItem = options.columnCount;\r\n            layoutOptions.altCountItem = options.rowCount;\r\n            layoutOptions.marginTextLabel = 4;\r\n            layoutOptions.labelOffset = 7;\r\n            if (options.itemTextPosition === BOTTOM || options.itemTextPosition === TOP) {\r\n                layoutOptions.labelOffset = 4;\r\n                layoutOptions.markerOffset = true\r\n            }\r\n        } else {\r\n            layoutOptions.length = height;\r\n            layoutOptions.spacing = options.rowItemSpacing;\r\n            layoutOptions.direction = \"y\";\r\n            layoutOptions.measure = HEIGHT;\r\n            layoutOptions.altMeasure = WIDTH;\r\n            layoutOptions.altDirection = \"x\";\r\n            layoutOptions.altSpacing = options.columnItemSpacing;\r\n            layoutOptions.countItem = options.rowCount;\r\n            layoutOptions.altCountItem = options.columnCount;\r\n            layoutOptions.marginTextLabel = 7;\r\n            layoutOptions.labelOffset = 4;\r\n            if (options.itemTextPosition === RIGHT || options.itemTextPosition === LEFT) {\r\n                layoutOptions.labelOffset = 7;\r\n                layoutOptions.markerOffset = true\r\n            }\r\n        }\r\n        if (!layoutOptions.countItem) {\r\n            if (layoutOptions.altCountItem) {\r\n                layoutOptions.countItem = _ceil(this._items.length / layoutOptions.altCountItem)\r\n            } else {\r\n                layoutOptions.countItem = this._items.length\r\n            }\r\n        }\r\n        if (options.itemTextPosition === TOP || options.itemTextPosition === LEFT) {\r\n            layoutOptions.inverseLabelPosition = true\r\n        }\r\n        layoutOptions.itemTextPosition = options.itemTextPosition;\r\n        layoutOptions.altCountItem = layoutOptions.altCountItem || _ceil(this._items.length / layoutOptions.countItem);\r\n        return layoutOptions\r\n    },\r\n    _adjustBackgroundSettings: function(locationOptions) {\r\n        if (!this._background) {\r\n            return\r\n        }\r\n        var border = locationOptions.border;\r\n        var legendBox = this._calculateTotalBox();\r\n        var backgroundSettings = {\r\n            x: _round(legendBox.x - locationOptions.paddingLeftRight),\r\n            y: _round(legendBox.y - locationOptions.paddingTopBottom),\r\n            width: _round(legendBox.width) + 2 * locationOptions.paddingLeftRight,\r\n            height: _round(legendBox.height),\r\n            opacity: locationOptions.backgroundOpacity\r\n        };\r\n        if (border.visible && border.width && border.color && border.color !== NONE) {\r\n            backgroundSettings[\"stroke-width\"] = border.width;\r\n            backgroundSettings.stroke = border.color;\r\n            backgroundSettings[\"stroke-opacity\"] = border.opacity;\r\n            backgroundSettings.dashStyle = border.dashStyle;\r\n            backgroundSettings.rx = border.cornerRadius || 0;\r\n            backgroundSettings.ry = border.cornerRadius || 0\r\n        }\r\n        this._background.attr(backgroundSettings)\r\n    },\r\n    _setBoundingRect: function(margin) {\r\n        if (!this._insideLegendGroup) {\r\n            return\r\n        }\r\n        var box = this._calculateTotalBox();\r\n        box.height += margin.top + margin.bottom;\r\n        box.widthWithoutMargins = box.width;\r\n        box.width += margin.left + margin.right;\r\n        box.x -= margin.left;\r\n        box.y -= margin.top;\r\n        this._boundingRect = box\r\n    },\r\n    _calculateTotalBox: function() {\r\n        var markerBox = this._markersGroup.getBBox();\r\n        var titleBox = this._title.getCorrectedLayoutOptions();\r\n        var box = this._insideLegendGroup.getBBox();\r\n        var verticalPadding = this._background ? 2 * this._options.paddingTopBottom : 0;\r\n        box.height = markerBox.height + titleBox.height + verticalPadding;\r\n        titleBox.width > box.width && (box.width = titleBox.width);\r\n        return box\r\n    },\r\n    getActionCallback: function(point) {\r\n        var that = this;\r\n        if (that._options.visible) {\r\n            return function(act) {\r\n                that[act](point.index)\r\n            }\r\n        } else {\r\n            return noop\r\n        }\r\n    },\r\n    getLayoutOptions: function() {\r\n        var options = this._options;\r\n        var boundingRect = this._insideLegendGroup ? this._boundingRect : {\r\n            width: 0,\r\n            height: 0,\r\n            x: 0,\r\n            y: 0\r\n        };\r\n        if (options) {\r\n            boundingRect.verticalAlignment = options.verticalAlignment;\r\n            boundingRect.horizontalAlignment = options.horizontalAlignment;\r\n            if (options.orientation === HORIZONTAL) {\r\n                boundingRect.cutLayoutSide = options.verticalAlignment;\r\n                boundingRect.cutSide = \"vertical\"\r\n            } else if (options.horizontalAlignment === CENTER) {\r\n                boundingRect.cutLayoutSide = options.verticalAlignment;\r\n                boundingRect.cutSide = \"vertical\"\r\n            } else {\r\n                boundingRect.cutLayoutSide = options.horizontalAlignment;\r\n                boundingRect.cutSide = \"horizontal\"\r\n            }\r\n            boundingRect.position = {\r\n                horizontal: options.horizontalAlignment,\r\n                vertical: options.verticalAlignment\r\n            };\r\n            return boundingRect\r\n        }\r\n        return null\r\n    },\r\n    shift: function(x, y) {\r\n        var box = {};\r\n        if (this._insideLegendGroup) {\r\n            this._insideLegendGroup.attr({\r\n                translateX: x - this._boundingRect.x,\r\n                translateY: y - this._boundingRect.y\r\n            })\r\n        }\r\n        this._title && this._shiftTitle(this._boundingRect.widthWithoutMargins);\r\n        this._markersGroup && this._shiftMarkers();\r\n        if (this._insideLegendGroup) {\r\n            box = this._legendGroup.getBBox()\r\n        }\r\n        this._x1 = box.x;\r\n        this._y1 = box.y;\r\n        this._x2 = box.x + box.width;\r\n        this._y2 = box.y + box.height;\r\n        return this\r\n    },\r\n    _shiftTitle: function(boxWidth) {\r\n        var title = this._title;\r\n        var titleBox = title.getCorrectedLayoutOptions();\r\n        if (!titleBox || !title.hasText()) {\r\n            return\r\n        }\r\n        var width = boxWidth - (this._background ? 2 * this._options.paddingLeftRight : 0);\r\n        var titleOptions = title.getOptions();\r\n        var titleY = titleBox.y + titleOptions.margin.top;\r\n        var titleX = 0;\r\n        if (titleOptions.verticalAlignment === BOTTOM && this._markersGroup) {\r\n            titleY += this._markersGroup.getBBox().height\r\n        }\r\n        if (titleOptions.horizontalAlignment === RIGHT) {\r\n            titleX = width - titleBox.width\r\n        } else if (titleOptions.horizontalAlignment === CENTER) {\r\n            titleX = (width - titleBox.width) / 2\r\n        }\r\n        title.shift(titleX, titleY)\r\n    },\r\n    _shiftMarkers: function() {\r\n        var titleBox = this._title.getLayoutOptions();\r\n        var markerBox = this._markersGroup.getBBox();\r\n        var titleOptions = this._title.getOptions() || {};\r\n        var center = 0;\r\n        var y = 0;\r\n        if (titleBox.width > markerBox.width && this._options.horizontalAlignment === CENTER) {\r\n            center = titleBox.width / 2 - markerBox.width / 2\r\n        }\r\n        if (titleOptions.verticalAlignment === TOP) {\r\n            y = titleBox.height\r\n        }\r\n        if (0 !== center || 0 !== y) {\r\n            this._markersGroup.attr({\r\n                translateX: center,\r\n                translateY: y\r\n            });\r\n            this._items.forEach(item => {\r\n                item.tracker.left += center;\r\n                item.tracker.right += center;\r\n                item.tracker.top += y;\r\n                item.tracker.bottom += y\r\n            })\r\n        }\r\n    },\r\n    getPosition: function() {\r\n        return this._options.position\r\n    },\r\n    coordsIn: function(x, y) {\r\n        return x >= this._x1 && x <= this._x2 && y >= this._y1 && y <= this._y2\r\n    },\r\n    getItemByCoord: function(x, y) {\r\n        var items = this._items;\r\n        var legendGroup = this._insideLegendGroup;\r\n        x -= legendGroup.attr(\"translateX\");\r\n        y -= legendGroup.attr(\"translateY\");\r\n        for (var i = 0; i < items.length; i++) {\r\n            if (inRect(items[i].tracker, x, y)) {\r\n                return items[i].tracker\r\n            }\r\n        }\r\n        return null\r\n    },\r\n    dispose: function() {\r\n        this._title && this._title.dispose();\r\n        this._legendGroup = this._insideLegendGroup = this._title = this._renderer = this._options = this._data = this._items = null;\r\n        return this\r\n    },\r\n    layoutOptions: function() {\r\n        if (!this.isVisible()) {\r\n            return null\r\n        }\r\n        var pos = this.getLayoutOptions();\r\n        return {\r\n            horizontalAlignment: this._options.horizontalAlignment,\r\n            verticalAlignment: this._options.verticalAlignment,\r\n            side: pos.cutSide,\r\n            priority: 1,\r\n            position: this.getPosition()\r\n        }\r\n    },\r\n    measure: function(size) {\r\n        if (this._updated || !this._insideLegendGroup) {\r\n            this.draw(size[0], size[1]);\r\n            this._updated = false\r\n        } else {\r\n            this._items.forEach(item => {\r\n                item.bBoxes = []\r\n            });\r\n            this._updateElementsPosition(size[0], size[1])\r\n        }\r\n        var rect = this.getLayoutOptions();\r\n        return [rect.width, rect.height]\r\n    },\r\n    move: function(rect) {\r\n        this.shift(rect[0], rect[1])\r\n    },\r\n    freeSpace: function() {\r\n        this._options._incidentOccurred(\"W2104\");\r\n        this.erase()\r\n    }\r\n});\r\nexport var plugin = {\r\n    name: \"legend\",\r\n    init: function() {\r\n        var group = this._renderer.g().attr({\r\n            class: this._rootClassPrefix + \"-legend\"\r\n        }).enableLinks().append(this._renderer.root);\r\n        this._legend = new Legend({\r\n            renderer: this._renderer,\r\n            group: group,\r\n            widget: this,\r\n            itemGroupClass: this._rootClassPrefix + \"-item\",\r\n            titleGroupClass: this._rootClassPrefix + \"-title\",\r\n            textField: \"text\",\r\n            getFormatObject: function(data) {\r\n                return {\r\n                    item: data.item,\r\n                    text: data.text\r\n                }\r\n            }\r\n        });\r\n        this._layout.add(this._legend)\r\n    },\r\n    extenders: {\r\n        _applyTilesAppearance: function() {\r\n            var that = this;\r\n            this._items.forEach((function(item) {\r\n                that._applyLegendItemStyle(item.id, item.getState())\r\n            }))\r\n        },\r\n        _buildNodes: function() {\r\n            this._createLegendItems()\r\n        }\r\n    },\r\n    members: {\r\n        _applyLegendItemStyle: function(id, state) {\r\n            var legend = this._legend;\r\n            switch (state) {\r\n                case \"hover\":\r\n                    legend.applyHover(id);\r\n                    break;\r\n                case \"selection\":\r\n                    legend.applySelected(id);\r\n                    break;\r\n                default:\r\n                    legend.resetItem(id)\r\n            }\r\n        },\r\n        _createLegendItems: function() {\r\n            if (this._legend.update(this._getLegendData(), this._getOption(\"legend\"), this._themeManager.theme(\"legend\").title)) {\r\n                this._requestChange([\"LAYOUT\"])\r\n            }\r\n        }\r\n    },\r\n    dispose: function() {\r\n        this._legend.dispose()\r\n    },\r\n    customize: function(constructor) {\r\n        constructor.prototype._proxyData.push((function(x, y) {\r\n            if (this._legend.coordsIn(x, y)) {\r\n                var item = this._legend.getItemByCoord(x, y);\r\n                if (item) {\r\n                    return {\r\n                        id: item.id,\r\n                        type: \"legend\"\r\n                    }\r\n                }\r\n            }\r\n        }));\r\n        constructor.addChange({\r\n            code: \"LEGEND\",\r\n            handler: function() {\r\n                this._createLegendItems()\r\n            },\r\n            isThemeDependent: true,\r\n            option: \"legend\",\r\n            isOptionChange: true\r\n        })\r\n    }\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}