{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/**\r\n * DevExtreme (esm/viz/core/annotations.js)\r\n * Version: 22.1.6\r\n * Build date: Tue Oct 18 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport domAdapter from \"../../core/dom_adapter\";\nimport { isDefined, isFunction } from \"../../core/utils/type\";\nimport { Tooltip } from \"../core/tooltip\";\nimport { extend } from \"../../core/utils/extend\";\nimport { patchFontOptions } from \"./utils\";\nimport { Plaque } from \"./plaque\";\nimport pointerEvents from \"../../events/pointer\";\nimport { start as dragEventStart, move as dragEventMove, end as dragEventEnd } from \"../../events/drag\";\nimport { addNamespace } from \"../../events/utils/index\";\nimport eventsEngine from \"../../events/core/events_engine\";\nvar getDocument = domAdapter.getDocument;\nvar EVENT_NS = \"annotations\";\nvar DOT_EVENT_NS = \".\" + EVENT_NS;\nvar POINTER_ACTION = addNamespace([pointerEvents.down, pointerEvents.move], EVENT_NS);\nvar POINTER_UP_EVENT_NAME = addNamespace(pointerEvents.up, EVENT_NS);\nvar DRAG_START_EVENT_NAME = dragEventStart + DOT_EVENT_NS;\nvar DRAG_EVENT_NAME = dragEventMove + DOT_EVENT_NS;\nvar DRAG_END_EVENT_NAME = dragEventEnd + DOT_EVENT_NS;\nfunction coreAnnotation(options, contentTemplate) {\n  return {\n    draw: function (widget, group) {\n      var annotationGroup = widget._renderer.g().append(group).css(patchFontOptions(options.font));\n      if (this.plaque) {\n        this.plaque.clear();\n      }\n      this.plaque = new Plaque(extend(true, {}, options, {\n        cornerRadius: (options.border || {}).cornerRadius\n      }), widget, annotationGroup, contentTemplate, widget._isAnnotationBounded(options));\n      this.plaque.draw(widget._getAnnotationCoords(this));\n      if (options.allowDragging) {\n        annotationGroup.on(DRAG_START_EVENT_NAME, {\n          immediate: true\n        }, e => {\n          this._dragOffsetX = this.plaque.x - e.pageX;\n          this._dragOffsetY = this.plaque.y - e.pageY;\n        }).on(DRAG_EVENT_NAME, e => {\n          this.plaque.move(e.pageX + this._dragOffsetX, e.pageY + this._dragOffsetY);\n        }).on(DRAG_END_EVENT_NAME, e => {\n          this.offsetX = (this.offsetX || 0) + e.offset.x;\n          this.offsetY = (this.offsetY || 0) + e.offset.y;\n        });\n      }\n    },\n    hitTest(x, y) {\n      return this.plaque.hitTest(x, y);\n    },\n    showTooltip(tooltip, _ref) {\n      var {\n        x: x,\n        y: y\n      } = _ref;\n      var that = this;\n      var options = that.options;\n      if (tooltip.annotation !== that) {\n        tooltip.setTemplate(options.tooltipTemplate);\n        var callback = result => {\n          result && (tooltip.annotation = that);\n        };\n        callback(tooltip.show(options, {\n          x: x,\n          y: y\n        }, {\n          target: options\n        }, options.customizeTooltip, callback));\n      } else if (!tooltip.isCursorOnTooltip(x, y)) {\n        tooltip.move(x, y);\n      }\n    }\n  };\n}\nfunction getTemplateFunction(options, widget) {\n  var template;\n  if (\"text\" === options.type) {\n    template = function (item, groupElement) {\n      var text = widget._renderer.text(item.text).attr({\n        class: item.cssClass\n      }).append({\n        element: groupElement\n      });\n      if (item.width > 0 || item.height > 0) {\n        text.setMaxSize(item.width, item.height, {\n          wordWrap: item.wordWrap,\n          textOverflow: item.textOverflow\n        });\n      }\n    };\n  } else if (\"image\" === options.type) {\n    template = function (item, groupElement) {\n      var {\n        width: width,\n        height: height,\n        url: url,\n        location: location\n      } = item.image || {};\n      var {\n        width: outerWidth,\n        height: outerHeight\n      } = item;\n      var imageWidth = outerWidth > 0 ? Math.min(width, outerWidth) : width;\n      var imageHeight = outerHeight > 0 ? Math.min(height, outerHeight) : height;\n      widget._renderer.image(0, 0, imageWidth, imageHeight, url, location || \"center\").append({\n        element: groupElement\n      });\n    };\n  } else if (\"custom\" === options.type) {\n    template = options.template;\n  }\n  return template;\n}\nfunction getImageObject(image) {\n  return \"string\" === typeof image ? {\n    url: image\n  } : image;\n}\nexport var createAnnotations = function (widget, items) {\n  var commonAnnotationSettings = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};\n  var customizeAnnotation = arguments.length > 3 ? arguments[3] : void 0;\n  var pullOptions = arguments.length > 4 ? arguments[4] : void 0;\n  var commonImageOptions = getImageObject(commonAnnotationSettings.image);\n  return items.reduce((arr, item) => {\n    var currentImageOptions = getImageObject(item.image);\n    var customizedItem = isFunction(customizeAnnotation) ? customizeAnnotation(item) : {};\n    if (customizedItem) {\n      customizedItem.image = getImageObject(customizedItem.image);\n    }\n    var options = extend(true, {}, commonAnnotationSettings, item, {\n      image: commonImageOptions\n    }, {\n      image: currentImageOptions\n    }, customizedItem);\n    var templateFunction = getTemplateFunction(options, widget);\n    var annotation = templateFunction && extend(true, pullOptions(options), coreAnnotation(options, widget._getTemplate(templateFunction)));\n    annotation && arr.push(annotation);\n    return arr;\n  }, []);\n};\nvar chartPlugin = {\n  name: \"annotations_chart\",\n  init() {},\n  dispose() {},\n  members: {\n    _getAnnotationCoords(annotation) {\n      var _axis, _axis2;\n      var coords = {\n        offsetX: annotation.offsetX,\n        offsetY: annotation.offsetY\n      };\n      var argCoordName = this._options.silent(\"rotated\") ? \"y\" : \"x\";\n      var valCoordName = this._options.silent(\"rotated\") ? \"x\" : \"y\";\n      var argAxis = this.getArgumentAxis();\n      var argument = argAxis.validateUnit(annotation.argument);\n      var axis = this.getValueAxis(annotation.axis);\n      var series;\n      var pane = null === (_axis = axis) || void 0 === _axis ? void 0 : _axis.pane;\n      if (annotation.series) {\n        var _series;\n        series = this.series.filter(s => s.name === annotation.series)[0];\n        axis = null === (_series = series) || void 0 === _series ? void 0 : _series.getValueAxis();\n        isDefined(axis) && (pane = axis.pane);\n      }\n      if (isDefined(argument)) {\n        if (series) {\n          var center = series.getPointCenterByArg(argument);\n          center && (coords[argCoordName] = center[argCoordName]);\n        } else {\n          coords[argCoordName] = argAxis.getTranslator().translate(argument);\n        }\n        !isDefined(pane) && (pane = argAxis.pane);\n      }\n      var value = null === (_axis2 = axis) || void 0 === _axis2 ? void 0 : _axis2.validateUnit(annotation.value);\n      if (isDefined(value)) {\n        var _axis3;\n        coords[valCoordName] = null === (_axis3 = axis) || void 0 === _axis3 ? void 0 : _axis3.getTranslator().translate(value);\n        !isDefined(pane) && isDefined(axis) && (pane = axis.pane);\n      }\n      coords.canvas = this._getCanvasForPane(pane);\n      if (isDefined(coords[argCoordName]) && !isDefined(value)) {\n        var _series2;\n        if (!isDefined(axis) && !isDefined(series)) {\n          coords[valCoordName] = argAxis.getAxisPosition();\n        } else if (isDefined(axis) && !isDefined(series)) {\n          coords[valCoordName] = this._argumentAxes.filter(a => a.pane === axis.pane)[0].getAxisPosition();\n        } else if (null !== (_series2 = series) && void 0 !== _series2 && _series2.checkSeriesViewportCoord(argAxis, coords[argCoordName])) {\n          coords[valCoordName] = series.getSeriesPairCoord(coords[argCoordName], true);\n        }\n      }\n      if (!isDefined(argument) && isDefined(coords[valCoordName])) {\n        if (isDefined(axis) && !isDefined(series)) {\n          coords[argCoordName] = axis.getAxisPosition();\n        } else if (isDefined(series)) {\n          if (series.checkSeriesViewportCoord(axis, coords[valCoordName])) {\n            coords[argCoordName] = series.getSeriesPairCoord(coords[valCoordName], false);\n          }\n        }\n      }\n      return coords;\n    },\n    _annotationsPointerEventHandler(event) {\n      if (this._disposed) {\n        return;\n      }\n      var originalEvent = event.originalEvent || {};\n      var touch = originalEvent.touches && originalEvent.touches[0] || {};\n      var rootOffset = this._renderer.getRootOffset();\n      var coords = {\n        x: touch.pageX || originalEvent.pageX || event.pageX,\n        y: touch.pageY || originalEvent.pageY || event.pageY\n      };\n      var annotation = this._annotations.items.filter(a => a.hitTest(coords.x - rootOffset.left, coords.y - rootOffset.top))[0];\n      if (!annotation || !annotation.options.tooltipEnabled) {\n        this._annotations.hideTooltip();\n        return;\n      }\n      this._clear();\n      if (annotation.options.allowDragging && event.type === pointerEvents.down) {\n        this._annotations._hideToolTipForDrag = true;\n      }\n      if (!this._annotations._hideToolTipForDrag) {\n        annotation.showTooltip(this._annotations.tooltip, coords);\n        event.stopPropagation();\n      }\n    },\n    _isAnnotationBounded: options => isDefined(options.value) || isDefined(options.argument),\n    _pullOptions: options => ({\n      type: options.type,\n      name: options.name,\n      x: options.x,\n      y: options.y,\n      value: options.value,\n      argument: options.argument,\n      axis: options.axis,\n      series: options.series,\n      options: options,\n      offsetX: options.offsetX,\n      offsetY: options.offsetY\n    }),\n    _forceAnnotationRender() {\n      this._change([\"FORCE_RENDER\"]);\n    },\n    _clear() {\n      this.hideTooltip();\n      this.clearHover();\n    }\n  }\n};\nvar polarChartPlugin = {\n  name: \"annotations_polar_chart\",\n  init() {},\n  dispose() {},\n  members: {\n    _getAnnotationCoords(annotation) {\n      var coords = {\n        offsetX: annotation.offsetX,\n        offsetY: annotation.offsetY,\n        canvas: this._calcCanvas()\n      };\n      var argAxis = this.getArgumentAxis();\n      var argument = argAxis.validateUnit(annotation.argument);\n      var value = this.getValueAxis().validateUnit(annotation.value);\n      var radius = annotation.radius;\n      var angle = annotation.angle;\n      var pointCoords;\n      var series;\n      if (annotation.series) {\n        series = this.series.filter(s => s.name === annotation.series)[0];\n      }\n      extend(true, coords, this.getXYFromPolar(angle, radius, argument, value));\n      if (isDefined(series)) {\n        if (isDefined(coords.angle) && !isDefined(value) && !isDefined(radius)) {\n          if (!isDefined(argument)) {\n            argument = argAxis.getTranslator().from(isFinite(angle) ? this.getActualAngle(angle) : coords.angle);\n          }\n          pointCoords = series.getSeriesPairCoord({\n            argument: argument,\n            angle: -coords.angle\n          }, true);\n        } else if (isDefined(coords.radius) && !isDefined(argument) && !isDefined(angle)) {\n          pointCoords = series.getSeriesPairCoord({\n            radius: coords.radius\n          }, false);\n        }\n        if (isDefined(pointCoords)) {\n          coords.x = pointCoords.x;\n          coords.y = pointCoords.y;\n        }\n      }\n      if (annotation.series && !isDefined(pointCoords)) {\n        coords.x = coords.y = void 0;\n      }\n      return coords;\n    },\n    _annotationsPointerEventHandler: chartPlugin.members._annotationsPointerEventHandler,\n    _isAnnotationBounded: chartPlugin.members._isAnnotationBounded,\n    _pullOptions(options) {\n      var polarOptions = extend({}, {\n        radius: options.radius,\n        angle: options.angle\n      }, chartPlugin.members._pullOptions(options));\n      delete polarOptions.axis;\n      return polarOptions;\n    },\n    _forceAnnotationRender: chartPlugin.members._forceAnnotationRender,\n    _clear: chartPlugin.members._clear\n  }\n};\nvar vectorMapPlugin = {\n  name: \"annotations_vector_map\",\n  init() {},\n  dispose() {\n    this._annotations._offTracker();\n    this._annotations._offTracker = null;\n  },\n  members: {\n    _getAnnotationCoords(annotation) {\n      var coords = {\n        offsetX: annotation.offsetX,\n        offsetY: annotation.offsetY\n      };\n      coords.canvas = this._projection.getCanvas();\n      if (annotation.coordinates) {\n        var data = this._projection.toScreenPoint(annotation.coordinates);\n        coords.x = data[0];\n        coords.y = data[1];\n      }\n      return coords;\n    },\n    _annotationsPointerEventHandler: chartPlugin.members._annotationsPointerEventHandler,\n    _isAnnotationBounded: options => isDefined(options.coordinates),\n    _pullOptions(options) {\n      var vectorMapOptions = extend({}, {\n        coordinates: options.coordinates\n      }, chartPlugin.members._pullOptions(options));\n      delete vectorMapOptions.axis;\n      delete vectorMapOptions.series;\n      delete vectorMapOptions.argument;\n      delete vectorMapOptions.value;\n      return vectorMapOptions;\n    },\n    _forceAnnotationRender() {\n      this._change([\"EXTRA_ELEMENTS\"]);\n    },\n    _getAnnotationStyles: () => ({\n      \"text-anchor\": \"start\"\n    }),\n    _clear() {}\n  },\n  extenders: {\n    _prepareExtraElements() {\n      var that = this;\n      var renderElements = () => {\n        that._renderExtraElements();\n      };\n      that._annotations._offTracker = that._tracker.on({\n        move: renderElements,\n        zoom: renderElements,\n        end: renderElements\n      });\n    }\n  }\n};\nvar pieChartPlugin = {\n  name: \"annotations_pie_chart\",\n  init() {},\n  dispose() {},\n  members: {\n    _getAnnotationCoords(annotation) {\n      var series;\n      var coords = {\n        offsetX: annotation.offsetX,\n        offsetY: annotation.offsetY,\n        canvas: this._canvas\n      };\n      if (annotation.argument) {\n        if (annotation.series) {\n          series = this.getSeriesByName(annotation.series);\n        } else {\n          series = this.series[0];\n        }\n        var argument = series.getPointsByArg(annotation.argument)[0];\n        var {\n          x: x,\n          y: y\n        } = argument.getAnnotationCoords(annotation.location);\n        coords.x = x;\n        coords.y = y;\n      }\n      return coords;\n    },\n    _isAnnotationBounded: options => options.argument,\n    _annotationsPointerEventHandler: chartPlugin.members._annotationsPointerEventHandler,\n    _pullOptions(options) {\n      var pieChartOptions = extend({}, {\n        location: options.location\n      }, chartPlugin.members._pullOptions(options));\n      delete pieChartOptions.axis;\n      return pieChartOptions;\n    },\n    _clear: chartPlugin.members._clear,\n    _forceAnnotationRender: chartPlugin.members._forceAnnotationRender\n  }\n};\nvar corePlugin = {\n  name: \"annotations_core\",\n  init() {\n    this._annotations = {\n      items: [],\n      _hideToolTipForDrag: false,\n      tooltip: new Tooltip({\n        cssClass: \"\".concat(this._rootClassPrefix, \"-annotation-tooltip\"),\n        eventTrigger: this._eventTrigger,\n        widgetRoot: this.element(),\n        widget: this\n      }),\n      hideTooltip() {\n        this.tooltip.annotation = null;\n        this.tooltip.hide();\n      },\n      clearItems() {\n        this.items.forEach(i => i.plaque.clear());\n        this.items = [];\n      }\n    };\n    this._annotations.tooltip.setRendererOptions(this._getRendererOptions());\n  },\n  dispose() {\n    this._annotationsGroup.linkRemove().linkOff();\n    eventsEngine.off(getDocument(), DOT_EVENT_NS);\n    this._annotationsGroup.off(DOT_EVENT_NS);\n    this._annotations.tooltip && this._annotations.tooltip.dispose();\n  },\n  extenders: {\n    _createHtmlStructure() {\n      this._annotationsGroup = this._renderer.g().attr({\n        class: \"\".concat(this._rootClassPrefix, \"-annotations\")\n      }).css(this._getAnnotationStyles()).linkOn(this._renderer.root, \"annotations\").linkAppend();\n      eventsEngine.on(getDocument(), POINTER_ACTION, e => {\n        if (this._disposed) {\n          return;\n        }\n        if (!this._annotations.tooltip.isCursorOnTooltip(e.pageX, e.pageY)) {\n          this._annotations.hideTooltip();\n        }\n      });\n      eventsEngine.on(getDocument(), POINTER_UP_EVENT_NAME, event => {\n        this._annotations._hideToolTipForDrag = false;\n        this._annotationsPointerEventHandler(event);\n      });\n      this._annotationsGroup.on(POINTER_ACTION, this._annotationsPointerEventHandler.bind(this));\n    },\n    _renderExtraElements() {\n      this._annotationsGroup.clear();\n      this._annotations.items.forEach(item => item.draw(this, this._annotationsGroup));\n    },\n    _stopCurrentHandling() {\n      this._annotations.hideTooltip();\n    }\n  },\n  members: {\n    _buildAnnotations() {\n      this._annotations.clearItems();\n      var items = this._getOption(\"annotations\", true);\n      if (!(null !== items && void 0 !== items && items.length)) {\n        return;\n      }\n      this._annotations.items = createAnnotations(this, items, this._getOption(\"commonAnnotationSettings\"), this._getOption(\"customizeAnnotation\", true), this._pullOptions);\n    },\n    _setAnnotationTooltipOptions() {\n      var tooltipOptions = extend({}, this._getOption(\"tooltip\"));\n      tooltipOptions.contentTemplate = tooltipOptions.customizeTooltip = void 0;\n      this._annotations.tooltip.update(tooltipOptions);\n    },\n    _getAnnotationCoords: () => ({}),\n    _pullOptions: () => ({}),\n    _getAnnotationStyles: () => ({})\n  },\n  customize(constructor) {\n    constructor.addChange({\n      code: \"ANNOTATIONITEMS\",\n      handler() {\n        this._requestChange([\"ANNOTATIONS\"]);\n      },\n      isOptionChange: true,\n      option: \"annotations\"\n    });\n    constructor.addChange({\n      code: \"ANNOTATIONSSETTINGS\",\n      handler() {\n        this._requestChange([\"ANNOTATIONS\"]);\n      },\n      isOptionChange: true,\n      option: \"commonAnnotationSettings\"\n    });\n    constructor.addChange({\n      code: \"ANNOTATIONS\",\n      handler() {\n        this._buildAnnotations();\n        this._setAnnotationTooltipOptions();\n        this._forceAnnotationRender();\n      },\n      isThemeDependent: true,\n      isOptionChange: true\n    });\n  },\n  fontFields: [\"commonAnnotationSettings.font\"]\n};\nexport var plugins = {\n  core: corePlugin,\n  chart: chartPlugin,\n  polarChart: polarChartPlugin,\n  vectorMap: vectorMapPlugin,\n  pieChart: pieChartPlugin\n};","map":{"version":3,"names":["domAdapter","isDefined","isFunction","Tooltip","extend","patchFontOptions","Plaque","pointerEvents","start","dragEventStart","move","dragEventMove","end","dragEventEnd","addNamespace","eventsEngine","getDocument","EVENT_NS","DOT_EVENT_NS","POINTER_ACTION","down","POINTER_UP_EVENT_NAME","up","DRAG_START_EVENT_NAME","DRAG_EVENT_NAME","DRAG_END_EVENT_NAME","coreAnnotation","options","contentTemplate","draw","widget","group","annotationGroup","_renderer","g","append","css","font","plaque","clear","cornerRadius","border","_isAnnotationBounded","_getAnnotationCoords","allowDragging","on","immediate","e","_dragOffsetX","x","pageX","_dragOffsetY","y","pageY","offsetX","offset","offsetY","hitTest","showTooltip","tooltip","_ref","that","annotation","setTemplate","tooltipTemplate","callback","result","show","target","customizeTooltip","isCursorOnTooltip","getTemplateFunction","template","type","item","groupElement","text","attr","class","cssClass","element","width","height","setMaxSize","wordWrap","textOverflow","url","location","image","outerWidth","outerHeight","imageWidth","Math","min","imageHeight","getImageObject","createAnnotations","items","commonAnnotationSettings","arguments","length","customizeAnnotation","pullOptions","commonImageOptions","reduce","arr","currentImageOptions","customizedItem","templateFunction","_getTemplate","push","chartPlugin","name","init","dispose","members","_axis","_axis2","coords","argCoordName","_options","silent","valCoordName","argAxis","getArgumentAxis","argument","validateUnit","axis","getValueAxis","series","pane","_series","filter","s","center","getPointCenterByArg","getTranslator","translate","value","_axis3","canvas","_getCanvasForPane","_series2","getAxisPosition","_argumentAxes","a","checkSeriesViewportCoord","getSeriesPairCoord","_annotationsPointerEventHandler","event","_disposed","originalEvent","touch","touches","rootOffset","getRootOffset","_annotations","left","top","tooltipEnabled","hideTooltip","_clear","_hideToolTipForDrag","stopPropagation","_pullOptions","_forceAnnotationRender","_change","clearHover","polarChartPlugin","_calcCanvas","radius","angle","pointCoords","getXYFromPolar","from","isFinite","getActualAngle","polarOptions","vectorMapPlugin","_offTracker","_projection","getCanvas","coordinates","data","toScreenPoint","vectorMapOptions","_getAnnotationStyles","extenders","_prepareExtraElements","renderElements","_renderExtraElements","_tracker","zoom","pieChartPlugin","_canvas","getSeriesByName","getPointsByArg","getAnnotationCoords","pieChartOptions","corePlugin","concat","_rootClassPrefix","eventTrigger","_eventTrigger","widgetRoot","hide","clearItems","forEach","i","setRendererOptions","_getRendererOptions","_annotationsGroup","linkRemove","linkOff","off","_createHtmlStructure","linkOn","root","linkAppend","bind","_stopCurrentHandling","_buildAnnotations","_getOption","_setAnnotationTooltipOptions","tooltipOptions","update","customize","constructor","addChange","code","handler","_requestChange","isOptionChange","option","isThemeDependent","fontFields","plugins","core","chart","polarChart","vectorMap","pieChart"],"sources":["C:/Users/User/vue-chart/node_modules/devextreme/esm/viz/core/annotations.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/viz/core/annotations.js)\r\n * Version: 22.1.6\r\n * Build date: Tue Oct 18 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport domAdapter from \"../../core/dom_adapter\";\r\nimport {\r\n    isDefined,\r\n    isFunction\r\n} from \"../../core/utils/type\";\r\nimport {\r\n    Tooltip\r\n} from \"../core/tooltip\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    patchFontOptions\r\n} from \"./utils\";\r\nimport {\r\n    Plaque\r\n} from \"./plaque\";\r\nimport pointerEvents from \"../../events/pointer\";\r\nimport {\r\n    start as dragEventStart,\r\n    move as dragEventMove,\r\n    end as dragEventEnd\r\n} from \"../../events/drag\";\r\nimport {\r\n    addNamespace\r\n} from \"../../events/utils/index\";\r\nimport eventsEngine from \"../../events/core/events_engine\";\r\nvar getDocument = domAdapter.getDocument;\r\nvar EVENT_NS = \"annotations\";\r\nvar DOT_EVENT_NS = \".\" + EVENT_NS;\r\nvar POINTER_ACTION = addNamespace([pointerEvents.down, pointerEvents.move], EVENT_NS);\r\nvar POINTER_UP_EVENT_NAME = addNamespace(pointerEvents.up, EVENT_NS);\r\nvar DRAG_START_EVENT_NAME = dragEventStart + DOT_EVENT_NS;\r\nvar DRAG_EVENT_NAME = dragEventMove + DOT_EVENT_NS;\r\nvar DRAG_END_EVENT_NAME = dragEventEnd + DOT_EVENT_NS;\r\n\r\nfunction coreAnnotation(options, contentTemplate) {\r\n    return {\r\n        draw: function(widget, group) {\r\n            var annotationGroup = widget._renderer.g().append(group).css(patchFontOptions(options.font));\r\n            if (this.plaque) {\r\n                this.plaque.clear()\r\n            }\r\n            this.plaque = new Plaque(extend(true, {}, options, {\r\n                cornerRadius: (options.border || {}).cornerRadius\r\n            }), widget, annotationGroup, contentTemplate, widget._isAnnotationBounded(options));\r\n            this.plaque.draw(widget._getAnnotationCoords(this));\r\n            if (options.allowDragging) {\r\n                annotationGroup.on(DRAG_START_EVENT_NAME, {\r\n                    immediate: true\r\n                }, e => {\r\n                    this._dragOffsetX = this.plaque.x - e.pageX;\r\n                    this._dragOffsetY = this.plaque.y - e.pageY\r\n                }).on(DRAG_EVENT_NAME, e => {\r\n                    this.plaque.move(e.pageX + this._dragOffsetX, e.pageY + this._dragOffsetY)\r\n                }).on(DRAG_END_EVENT_NAME, e => {\r\n                    this.offsetX = (this.offsetX || 0) + e.offset.x;\r\n                    this.offsetY = (this.offsetY || 0) + e.offset.y\r\n                })\r\n            }\r\n        },\r\n        hitTest(x, y) {\r\n            return this.plaque.hitTest(x, y)\r\n        },\r\n        showTooltip(tooltip, _ref) {\r\n            var {\r\n                x: x,\r\n                y: y\r\n            } = _ref;\r\n            var that = this;\r\n            var options = that.options;\r\n            if (tooltip.annotation !== that) {\r\n                tooltip.setTemplate(options.tooltipTemplate);\r\n                var callback = result => {\r\n                    result && (tooltip.annotation = that)\r\n                };\r\n                callback(tooltip.show(options, {\r\n                    x: x,\r\n                    y: y\r\n                }, {\r\n                    target: options\r\n                }, options.customizeTooltip, callback))\r\n            } else if (!tooltip.isCursorOnTooltip(x, y)) {\r\n                tooltip.move(x, y)\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction getTemplateFunction(options, widget) {\r\n    var template;\r\n    if (\"text\" === options.type) {\r\n        template = function(item, groupElement) {\r\n            var text = widget._renderer.text(item.text).attr({\r\n                class: item.cssClass\r\n            }).append({\r\n                element: groupElement\r\n            });\r\n            if (item.width > 0 || item.height > 0) {\r\n                text.setMaxSize(item.width, item.height, {\r\n                    wordWrap: item.wordWrap,\r\n                    textOverflow: item.textOverflow\r\n                })\r\n            }\r\n        }\r\n    } else if (\"image\" === options.type) {\r\n        template = function(item, groupElement) {\r\n            var {\r\n                width: width,\r\n                height: height,\r\n                url: url,\r\n                location: location\r\n            } = item.image || {};\r\n            var {\r\n                width: outerWidth,\r\n                height: outerHeight\r\n            } = item;\r\n            var imageWidth = outerWidth > 0 ? Math.min(width, outerWidth) : width;\r\n            var imageHeight = outerHeight > 0 ? Math.min(height, outerHeight) : height;\r\n            widget._renderer.image(0, 0, imageWidth, imageHeight, url, location || \"center\").append({\r\n                element: groupElement\r\n            })\r\n        }\r\n    } else if (\"custom\" === options.type) {\r\n        template = options.template\r\n    }\r\n    return template\r\n}\r\n\r\nfunction getImageObject(image) {\r\n    return \"string\" === typeof image ? {\r\n        url: image\r\n    } : image\r\n}\r\nexport var createAnnotations = function(widget, items) {\r\n    var commonAnnotationSettings = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};\r\n    var customizeAnnotation = arguments.length > 3 ? arguments[3] : void 0;\r\n    var pullOptions = arguments.length > 4 ? arguments[4] : void 0;\r\n    var commonImageOptions = getImageObject(commonAnnotationSettings.image);\r\n    return items.reduce((arr, item) => {\r\n        var currentImageOptions = getImageObject(item.image);\r\n        var customizedItem = isFunction(customizeAnnotation) ? customizeAnnotation(item) : {};\r\n        if (customizedItem) {\r\n            customizedItem.image = getImageObject(customizedItem.image)\r\n        }\r\n        var options = extend(true, {}, commonAnnotationSettings, item, {\r\n            image: commonImageOptions\r\n        }, {\r\n            image: currentImageOptions\r\n        }, customizedItem);\r\n        var templateFunction = getTemplateFunction(options, widget);\r\n        var annotation = templateFunction && extend(true, pullOptions(options), coreAnnotation(options, widget._getTemplate(templateFunction)));\r\n        annotation && arr.push(annotation);\r\n        return arr\r\n    }, [])\r\n};\r\nvar chartPlugin = {\r\n    name: \"annotations_chart\",\r\n    init() {},\r\n    dispose() {},\r\n    members: {\r\n        _getAnnotationCoords(annotation) {\r\n            var _axis, _axis2;\r\n            var coords = {\r\n                offsetX: annotation.offsetX,\r\n                offsetY: annotation.offsetY\r\n            };\r\n            var argCoordName = this._options.silent(\"rotated\") ? \"y\" : \"x\";\r\n            var valCoordName = this._options.silent(\"rotated\") ? \"x\" : \"y\";\r\n            var argAxis = this.getArgumentAxis();\r\n            var argument = argAxis.validateUnit(annotation.argument);\r\n            var axis = this.getValueAxis(annotation.axis);\r\n            var series;\r\n            var pane = null === (_axis = axis) || void 0 === _axis ? void 0 : _axis.pane;\r\n            if (annotation.series) {\r\n                var _series;\r\n                series = this.series.filter(s => s.name === annotation.series)[0];\r\n                axis = null === (_series = series) || void 0 === _series ? void 0 : _series.getValueAxis();\r\n                isDefined(axis) && (pane = axis.pane)\r\n            }\r\n            if (isDefined(argument)) {\r\n                if (series) {\r\n                    var center = series.getPointCenterByArg(argument);\r\n                    center && (coords[argCoordName] = center[argCoordName])\r\n                } else {\r\n                    coords[argCoordName] = argAxis.getTranslator().translate(argument)\r\n                }!isDefined(pane) && (pane = argAxis.pane)\r\n            }\r\n            var value = null === (_axis2 = axis) || void 0 === _axis2 ? void 0 : _axis2.validateUnit(annotation.value);\r\n            if (isDefined(value)) {\r\n                var _axis3;\r\n                coords[valCoordName] = null === (_axis3 = axis) || void 0 === _axis3 ? void 0 : _axis3.getTranslator().translate(value);\r\n                !isDefined(pane) && isDefined(axis) && (pane = axis.pane)\r\n            }\r\n            coords.canvas = this._getCanvasForPane(pane);\r\n            if (isDefined(coords[argCoordName]) && !isDefined(value)) {\r\n                var _series2;\r\n                if (!isDefined(axis) && !isDefined(series)) {\r\n                    coords[valCoordName] = argAxis.getAxisPosition()\r\n                } else if (isDefined(axis) && !isDefined(series)) {\r\n                    coords[valCoordName] = this._argumentAxes.filter(a => a.pane === axis.pane)[0].getAxisPosition()\r\n                } else if (null !== (_series2 = series) && void 0 !== _series2 && _series2.checkSeriesViewportCoord(argAxis, coords[argCoordName])) {\r\n                    coords[valCoordName] = series.getSeriesPairCoord(coords[argCoordName], true)\r\n                }\r\n            }\r\n            if (!isDefined(argument) && isDefined(coords[valCoordName])) {\r\n                if (isDefined(axis) && !isDefined(series)) {\r\n                    coords[argCoordName] = axis.getAxisPosition()\r\n                } else if (isDefined(series)) {\r\n                    if (series.checkSeriesViewportCoord(axis, coords[valCoordName])) {\r\n                        coords[argCoordName] = series.getSeriesPairCoord(coords[valCoordName], false)\r\n                    }\r\n                }\r\n            }\r\n            return coords\r\n        },\r\n        _annotationsPointerEventHandler(event) {\r\n            if (this._disposed) {\r\n                return\r\n            }\r\n            var originalEvent = event.originalEvent || {};\r\n            var touch = originalEvent.touches && originalEvent.touches[0] || {};\r\n            var rootOffset = this._renderer.getRootOffset();\r\n            var coords = {\r\n                x: touch.pageX || originalEvent.pageX || event.pageX,\r\n                y: touch.pageY || originalEvent.pageY || event.pageY\r\n            };\r\n            var annotation = this._annotations.items.filter(a => a.hitTest(coords.x - rootOffset.left, coords.y - rootOffset.top))[0];\r\n            if (!annotation || !annotation.options.tooltipEnabled) {\r\n                this._annotations.hideTooltip();\r\n                return\r\n            }\r\n            this._clear();\r\n            if (annotation.options.allowDragging && event.type === pointerEvents.down) {\r\n                this._annotations._hideToolTipForDrag = true\r\n            }\r\n            if (!this._annotations._hideToolTipForDrag) {\r\n                annotation.showTooltip(this._annotations.tooltip, coords);\r\n                event.stopPropagation()\r\n            }\r\n        },\r\n        _isAnnotationBounded: options => isDefined(options.value) || isDefined(options.argument),\r\n        _pullOptions: options => ({\r\n            type: options.type,\r\n            name: options.name,\r\n            x: options.x,\r\n            y: options.y,\r\n            value: options.value,\r\n            argument: options.argument,\r\n            axis: options.axis,\r\n            series: options.series,\r\n            options: options,\r\n            offsetX: options.offsetX,\r\n            offsetY: options.offsetY\r\n        }),\r\n        _forceAnnotationRender() {\r\n            this._change([\"FORCE_RENDER\"])\r\n        },\r\n        _clear() {\r\n            this.hideTooltip();\r\n            this.clearHover()\r\n        }\r\n    }\r\n};\r\nvar polarChartPlugin = {\r\n    name: \"annotations_polar_chart\",\r\n    init() {},\r\n    dispose() {},\r\n    members: {\r\n        _getAnnotationCoords(annotation) {\r\n            var coords = {\r\n                offsetX: annotation.offsetX,\r\n                offsetY: annotation.offsetY,\r\n                canvas: this._calcCanvas()\r\n            };\r\n            var argAxis = this.getArgumentAxis();\r\n            var argument = argAxis.validateUnit(annotation.argument);\r\n            var value = this.getValueAxis().validateUnit(annotation.value);\r\n            var radius = annotation.radius;\r\n            var angle = annotation.angle;\r\n            var pointCoords;\r\n            var series;\r\n            if (annotation.series) {\r\n                series = this.series.filter(s => s.name === annotation.series)[0]\r\n            }\r\n            extend(true, coords, this.getXYFromPolar(angle, radius, argument, value));\r\n            if (isDefined(series)) {\r\n                if (isDefined(coords.angle) && !isDefined(value) && !isDefined(radius)) {\r\n                    if (!isDefined(argument)) {\r\n                        argument = argAxis.getTranslator().from(isFinite(angle) ? this.getActualAngle(angle) : coords.angle)\r\n                    }\r\n                    pointCoords = series.getSeriesPairCoord({\r\n                        argument: argument,\r\n                        angle: -coords.angle\r\n                    }, true)\r\n                } else if (isDefined(coords.radius) && !isDefined(argument) && !isDefined(angle)) {\r\n                    pointCoords = series.getSeriesPairCoord({\r\n                        radius: coords.radius\r\n                    }, false)\r\n                }\r\n                if (isDefined(pointCoords)) {\r\n                    coords.x = pointCoords.x;\r\n                    coords.y = pointCoords.y\r\n                }\r\n            }\r\n            if (annotation.series && !isDefined(pointCoords)) {\r\n                coords.x = coords.y = void 0\r\n            }\r\n            return coords\r\n        },\r\n        _annotationsPointerEventHandler: chartPlugin.members._annotationsPointerEventHandler,\r\n        _isAnnotationBounded: chartPlugin.members._isAnnotationBounded,\r\n        _pullOptions(options) {\r\n            var polarOptions = extend({}, {\r\n                radius: options.radius,\r\n                angle: options.angle\r\n            }, chartPlugin.members._pullOptions(options));\r\n            delete polarOptions.axis;\r\n            return polarOptions\r\n        },\r\n        _forceAnnotationRender: chartPlugin.members._forceAnnotationRender,\r\n        _clear: chartPlugin.members._clear\r\n    }\r\n};\r\nvar vectorMapPlugin = {\r\n    name: \"annotations_vector_map\",\r\n    init() {},\r\n    dispose() {\r\n        this._annotations._offTracker();\r\n        this._annotations._offTracker = null\r\n    },\r\n    members: {\r\n        _getAnnotationCoords(annotation) {\r\n            var coords = {\r\n                offsetX: annotation.offsetX,\r\n                offsetY: annotation.offsetY\r\n            };\r\n            coords.canvas = this._projection.getCanvas();\r\n            if (annotation.coordinates) {\r\n                var data = this._projection.toScreenPoint(annotation.coordinates);\r\n                coords.x = data[0];\r\n                coords.y = data[1]\r\n            }\r\n            return coords\r\n        },\r\n        _annotationsPointerEventHandler: chartPlugin.members._annotationsPointerEventHandler,\r\n        _isAnnotationBounded: options => isDefined(options.coordinates),\r\n        _pullOptions(options) {\r\n            var vectorMapOptions = extend({}, {\r\n                coordinates: options.coordinates\r\n            }, chartPlugin.members._pullOptions(options));\r\n            delete vectorMapOptions.axis;\r\n            delete vectorMapOptions.series;\r\n            delete vectorMapOptions.argument;\r\n            delete vectorMapOptions.value;\r\n            return vectorMapOptions\r\n        },\r\n        _forceAnnotationRender() {\r\n            this._change([\"EXTRA_ELEMENTS\"])\r\n        },\r\n        _getAnnotationStyles: () => ({\r\n            \"text-anchor\": \"start\"\r\n        }),\r\n        _clear() {}\r\n    },\r\n    extenders: {\r\n        _prepareExtraElements() {\r\n            var that = this;\r\n            var renderElements = () => {\r\n                that._renderExtraElements()\r\n            };\r\n            that._annotations._offTracker = that._tracker.on({\r\n                move: renderElements,\r\n                zoom: renderElements,\r\n                end: renderElements\r\n            })\r\n        }\r\n    }\r\n};\r\nvar pieChartPlugin = {\r\n    name: \"annotations_pie_chart\",\r\n    init() {},\r\n    dispose() {},\r\n    members: {\r\n        _getAnnotationCoords(annotation) {\r\n            var series;\r\n            var coords = {\r\n                offsetX: annotation.offsetX,\r\n                offsetY: annotation.offsetY,\r\n                canvas: this._canvas\r\n            };\r\n            if (annotation.argument) {\r\n                if (annotation.series) {\r\n                    series = this.getSeriesByName(annotation.series)\r\n                } else {\r\n                    series = this.series[0]\r\n                }\r\n                var argument = series.getPointsByArg(annotation.argument)[0];\r\n                var {\r\n                    x: x,\r\n                    y: y\r\n                } = argument.getAnnotationCoords(annotation.location);\r\n                coords.x = x;\r\n                coords.y = y\r\n            }\r\n            return coords\r\n        },\r\n        _isAnnotationBounded: options => options.argument,\r\n        _annotationsPointerEventHandler: chartPlugin.members._annotationsPointerEventHandler,\r\n        _pullOptions(options) {\r\n            var pieChartOptions = extend({}, {\r\n                location: options.location\r\n            }, chartPlugin.members._pullOptions(options));\r\n            delete pieChartOptions.axis;\r\n            return pieChartOptions\r\n        },\r\n        _clear: chartPlugin.members._clear,\r\n        _forceAnnotationRender: chartPlugin.members._forceAnnotationRender\r\n    }\r\n};\r\nvar corePlugin = {\r\n    name: \"annotations_core\",\r\n    init() {\r\n        this._annotations = {\r\n            items: [],\r\n            _hideToolTipForDrag: false,\r\n            tooltip: new Tooltip({\r\n                cssClass: \"\".concat(this._rootClassPrefix, \"-annotation-tooltip\"),\r\n                eventTrigger: this._eventTrigger,\r\n                widgetRoot: this.element(),\r\n                widget: this\r\n            }),\r\n            hideTooltip() {\r\n                this.tooltip.annotation = null;\r\n                this.tooltip.hide()\r\n            },\r\n            clearItems() {\r\n                this.items.forEach(i => i.plaque.clear());\r\n                this.items = []\r\n            }\r\n        };\r\n        this._annotations.tooltip.setRendererOptions(this._getRendererOptions())\r\n    },\r\n    dispose() {\r\n        this._annotationsGroup.linkRemove().linkOff();\r\n        eventsEngine.off(getDocument(), DOT_EVENT_NS);\r\n        this._annotationsGroup.off(DOT_EVENT_NS);\r\n        this._annotations.tooltip && this._annotations.tooltip.dispose()\r\n    },\r\n    extenders: {\r\n        _createHtmlStructure() {\r\n            this._annotationsGroup = this._renderer.g().attr({\r\n                class: \"\".concat(this._rootClassPrefix, \"-annotations\")\r\n            }).css(this._getAnnotationStyles()).linkOn(this._renderer.root, \"annotations\").linkAppend();\r\n            eventsEngine.on(getDocument(), POINTER_ACTION, e => {\r\n                if (this._disposed) {\r\n                    return\r\n                }\r\n                if (!this._annotations.tooltip.isCursorOnTooltip(e.pageX, e.pageY)) {\r\n                    this._annotations.hideTooltip()\r\n                }\r\n            });\r\n            eventsEngine.on(getDocument(), POINTER_UP_EVENT_NAME, event => {\r\n                this._annotations._hideToolTipForDrag = false;\r\n                this._annotationsPointerEventHandler(event)\r\n            });\r\n            this._annotationsGroup.on(POINTER_ACTION, this._annotationsPointerEventHandler.bind(this))\r\n        },\r\n        _renderExtraElements() {\r\n            this._annotationsGroup.clear();\r\n            this._annotations.items.forEach(item => item.draw(this, this._annotationsGroup))\r\n        },\r\n        _stopCurrentHandling() {\r\n            this._annotations.hideTooltip()\r\n        }\r\n    },\r\n    members: {\r\n        _buildAnnotations() {\r\n            this._annotations.clearItems();\r\n            var items = this._getOption(\"annotations\", true);\r\n            if (!(null !== items && void 0 !== items && items.length)) {\r\n                return\r\n            }\r\n            this._annotations.items = createAnnotations(this, items, this._getOption(\"commonAnnotationSettings\"), this._getOption(\"customizeAnnotation\", true), this._pullOptions)\r\n        },\r\n        _setAnnotationTooltipOptions() {\r\n            var tooltipOptions = extend({}, this._getOption(\"tooltip\"));\r\n            tooltipOptions.contentTemplate = tooltipOptions.customizeTooltip = void 0;\r\n            this._annotations.tooltip.update(tooltipOptions)\r\n        },\r\n        _getAnnotationCoords: () => ({}),\r\n        _pullOptions: () => ({}),\r\n        _getAnnotationStyles: () => ({})\r\n    },\r\n    customize(constructor) {\r\n        constructor.addChange({\r\n            code: \"ANNOTATIONITEMS\",\r\n            handler() {\r\n                this._requestChange([\"ANNOTATIONS\"])\r\n            },\r\n            isOptionChange: true,\r\n            option: \"annotations\"\r\n        });\r\n        constructor.addChange({\r\n            code: \"ANNOTATIONSSETTINGS\",\r\n            handler() {\r\n                this._requestChange([\"ANNOTATIONS\"])\r\n            },\r\n            isOptionChange: true,\r\n            option: \"commonAnnotationSettings\"\r\n        });\r\n        constructor.addChange({\r\n            code: \"ANNOTATIONS\",\r\n            handler() {\r\n                this._buildAnnotations();\r\n                this._setAnnotationTooltipOptions();\r\n                this._forceAnnotationRender()\r\n            },\r\n            isThemeDependent: true,\r\n            isOptionChange: true\r\n        })\r\n    },\r\n    fontFields: [\"commonAnnotationSettings.font\"]\r\n};\r\nexport var plugins = {\r\n    core: corePlugin,\r\n    chart: chartPlugin,\r\n    polarChart: polarChartPlugin,\r\n    vectorMap: vectorMapPlugin,\r\n    pieChart: pieChartPlugin\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}